(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fr(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const xt={},ze=[],de=()=>{},Ka=()=>!1,Tn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),gr=t=>t.startsWith("onUpdate:"),Lt=Object.assign,pr=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},za=Object.prototype.hasOwnProperty,_t=(t,e)=>za.call(t,e),ct=Array.isArray,Vi=t=>An(t)==="[object Map]",$a=t=>An(t)==="[object Set]",dt=t=>typeof t=="function",Rt=t=>typeof t=="string",Je=t=>typeof t=="symbol",Tt=t=>t!==null&&typeof t=="object",Do=t=>(Tt(t)||dt(t))&&dt(t.then)&&dt(t.catch),Xa=Object.prototype.toString,An=t=>Xa.call(t),Ya=t=>An(t).slice(8,-1),qa=t=>An(t)==="[object Object]",mr=t=>Rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Wi=fr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mn=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Qa=/-(\w)/g,ie=Mn(t=>t.replace(Qa,(e,n)=>n?n.toUpperCase():"")),Ja=/\B([A-Z])/g,Be=Mn(t=>t.replace(Ja,"-$1").toLowerCase()),Fn=Mn(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bn=Mn(t=>t?`on${Fn(t)}`:""),Me=(t,e)=>!Object.is(t,e),Hn=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Go=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Za=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Br;const kn=()=>Br||(Br=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vr(t){if(ct(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=Rt(s)?nl(s):vr(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(Rt(t)||Tt(t))return t}const tl=/;(?![^(]*\))/g,el=/:([^]+)/,il=/\/\*[^]*?\*\//g;function nl(t){const e={};return t.replace(il,"").split(tl).forEach(n=>{if(n){const s=n.split(el);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function _r(t){let e="";if(Rt(t))e=t;else if(ct(t))for(let n=0;n<t.length;n++){const s=_r(t[n]);s&&(e+=s+" ")}else if(Tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const rl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sl=fr(rl);function Io(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yt;class ol{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Yt,!e&&Yt&&(this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Yt;try{return Yt=this,e()}finally{Yt=n}}}on(){Yt=this}off(){Yt=this.parent}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function al(){return Yt}let bt;const jn=new WeakSet;class Lo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Yt&&Yt.active&&Yt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,jn.has(this)&&(jn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hr(this),Ho(this);const e=bt,n=ae;bt=this,ae=!0;try{return this.fn()}finally{jo(this),bt=e,ae=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)xr(e);this.deps=this.depsTail=void 0,Hr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?jn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){er(this)&&this.run()}get dirty(){return er(this)}}let Uo=0,Ki,zi;function Bo(t,e=!1){if(t.flags|=8,e){t.next=zi,zi=t;return}t.next=Ki,Ki=t}function yr(){Uo++}function br(){if(--Uo>0)return;if(zi){let e=zi;for(zi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ki;){let e=Ki;for(Ki=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Ho(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function jo(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),xr(s),ll(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function er(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Vo(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Vo(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Zi))return;t.globalVersion=Zi;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!er(t)){t.flags&=-3;return}const n=bt,s=ae;bt=t,ae=!0;try{Ho(t);const i=t.fn(t._value);(e.version===0||Me(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{bt=n,ae=s,jo(t),t.flags&=-3}}function xr(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)xr(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function ll(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ae=!0;const Wo=[];function Fe(){Wo.push(ae),ae=!1}function ke(){const t=Wo.pop();ae=t===void 0?!0:t}function Hr(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=bt;bt=void 0;try{e()}finally{bt=n}}}let Zi=0;class hl{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!bt||!ae||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new hl(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,Ko(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=s)}return n}trigger(e){this.version++,Zi++,this.notify(e)}notify(e){yr();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{br()}}}function Ko(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Ko(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ir=new WeakMap,Ie=Symbol(""),nr=Symbol(""),tn=Symbol("");function Dt(t,e,n){if(ae&&bt){let s=ir.get(t);s||ir.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new wr),i.map=s,i.key=n),i.track()}}function ye(t,e,n,s,i,r){const o=ir.get(t);if(!o){Zi++;return}const a=h=>{h&&h.trigger()};if(yr(),e==="clear")o.forEach(a);else{const h=ct(t),m=h&&mr(n);if(h&&n==="length"){const p=Number(s);o.forEach((y,w)=>{(w==="length"||w===tn||!Je(w)&&w>=p)&&a(y)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),m&&a(o.get(tn)),e){case"add":h?m&&a(o.get("length")):(a(o.get(Ie)),Vi(t)&&a(o.get(nr)));break;case"delete":h||(a(o.get(Ie)),Vi(t)&&a(o.get(nr)));break;case"set":Vi(t)&&a(o.get(Ie));break}}br()}function He(t){const e=vt(t);return e===t?e:(Dt(e,"iterate",tn),ee(t)?e:e.map(Gt))}function Rn(t){return Dt(t=vt(t),"iterate",tn),t}const cl={__proto__:null,[Symbol.iterator](){return Vn(this,Symbol.iterator,Gt)},concat(...t){return He(this).concat(...t.map(e=>ct(e)?He(e):e))},entries(){return Vn(this,"entries",t=>(t[1]=Gt(t[1]),t))},every(t,e){return ge(this,"every",t,e,void 0,arguments)},filter(t,e){return ge(this,"filter",t,e,n=>n.map(Gt),arguments)},find(t,e){return ge(this,"find",t,e,Gt,arguments)},findIndex(t,e){return ge(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ge(this,"findLast",t,e,Gt,arguments)},findLastIndex(t,e){return ge(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ge(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wn(this,"includes",t)},indexOf(...t){return Wn(this,"indexOf",t)},join(t){return He(this).join(t)},lastIndexOf(...t){return Wn(this,"lastIndexOf",t)},map(t,e){return ge(this,"map",t,e,void 0,arguments)},pop(){return Ze(this,"pop")},push(...t){return Ze(this,"push",t)},reduce(t,...e){return jr(this,"reduce",t,e)},reduceRight(t,...e){return jr(this,"reduceRight",t,e)},shift(){return Ze(this,"shift")},some(t,e){return ge(this,"some",t,e,void 0,arguments)},splice(...t){return Ze(this,"splice",t)},toReversed(){return He(this).toReversed()},toSorted(t){return He(this).toSorted(t)},toSpliced(...t){return He(this).toSpliced(...t)},unshift(...t){return Ze(this,"unshift",t)},values(){return Vn(this,"values",Gt)}};function Vn(t,e,n){const s=Rn(t),i=s[e]();return s!==t&&!ee(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const ul=Array.prototype;function ge(t,e,n,s,i,r){const o=Rn(t),a=o!==t&&!ee(t),h=o[e];if(h!==ul[e]){const y=h.apply(t,r);return a?Gt(y):y}let m=n;o!==t&&(a?m=function(y,w){return n.call(this,Gt(y),w,t)}:n.length>2&&(m=function(y,w){return n.call(this,y,w,t)}));const p=h.call(o,m,s);return a&&i?i(p):p}function jr(t,e,n,s){const i=Rn(t);let r=n;return i!==t&&(ee(t)?n.length>3&&(r=function(o,a,h){return n.call(this,o,a,h,t)}):r=function(o,a,h){return n.call(this,o,Gt(a),h,t)}),i[e](r,...s)}function Wn(t,e,n){const s=vt(t);Dt(s,"iterate",tn);const i=s[e](...n);return(i===-1||i===!1)&&Pr(n[0])?(n[0]=vt(n[0]),s[e](...n)):i}function Ze(t,e,n=[]){Fe(),yr();const s=vt(t)[e].apply(t,n);return br(),ke(),s}const dl=fr("__proto__,__v_isRef,__isVue"),zo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Je));function fl(t){Je(t)||(t=String(t));const e=vt(this);return Dt(e,"has",t),e.hasOwnProperty(t)}class $o{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Sl:Qo:r?qo:Yo).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ct(e);if(!i){let h;if(o&&(h=cl[n]))return h;if(n==="hasOwnProperty")return fl}const a=Reflect.get(e,n,It(e)?e:s);return(Je(n)?zo.has(n):dl(n))||(i||Dt(e,"get",n),r)?a:It(a)?o&&mr(n)?a:a.value:Tt(a)?i?Jo(a):sn(a):a}}class Xo extends $o{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const h=Le(r);if(!ee(s)&&!Le(s)&&(r=vt(r),s=vt(s)),!ct(e)&&It(r)&&!It(s))return h?!1:(r.value=s,!0)}const o=ct(e)&&mr(n)?Number(n)<e.length:_t(e,n),a=Reflect.set(e,n,s,It(e)?e:i);return e===vt(i)&&(o?Me(s,r)&&ye(e,"set",n,s):ye(e,"add",n,s)),a}deleteProperty(e,n){const s=_t(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&ye(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!Je(n)||!zo.has(n))&&Dt(e,"has",n),s}ownKeys(e){return Dt(e,"iterate",ct(e)?"length":Ie),Reflect.ownKeys(e)}}class gl extends $o{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const pl=new Xo,ml=new gl,vl=new Xo(!0);const rr=t=>t,hn=t=>Reflect.getPrototypeOf(t);function _l(t,e,n){return function(...s){const i=this.__v_raw,r=vt(i),o=Vi(r),a=t==="entries"||t===Symbol.iterator&&o,h=t==="keys"&&o,m=i[t](...s),p=n?rr:e?sr:Gt;return!e&&Dt(r,"iterate",h?nr:Ie),{next(){const{value:y,done:w}=m.next();return w?{value:y,done:w}:{value:a?[p(y[0]),p(y[1])]:p(y),done:w}},[Symbol.iterator](){return this}}}}function cn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function yl(t,e){const n={get(i){const r=this.__v_raw,o=vt(r),a=vt(i);t||(Me(i,a)&&Dt(o,"get",i),Dt(o,"get",a));const{has:h}=hn(o),m=e?rr:t?sr:Gt;if(h.call(o,i))return m(r.get(i));if(h.call(o,a))return m(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&Dt(vt(i),"iterate",Ie),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=vt(r),a=vt(i);return t||(Me(i,a)&&Dt(o,"has",i),Dt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,h=vt(a),m=e?rr:t?sr:Gt;return!t&&Dt(h,"iterate",Ie),a.forEach((p,y)=>i.call(r,m(p),m(y),o))}};return Lt(n,t?{add:cn("add"),set:cn("set"),delete:cn("delete"),clear:cn("clear")}:{add(i){!e&&!ee(i)&&!Le(i)&&(i=vt(i));const r=vt(this);return hn(r).has.call(r,i)||(r.add(i),ye(r,"add",i,i)),this},set(i,r){!e&&!ee(r)&&!Le(r)&&(r=vt(r));const o=vt(this),{has:a,get:h}=hn(o);let m=a.call(o,i);m||(i=vt(i),m=a.call(o,i));const p=h.call(o,i);return o.set(i,r),m?Me(r,p)&&ye(o,"set",i,r):ye(o,"add",i,r),this},delete(i){const r=vt(this),{has:o,get:a}=hn(r);let h=o.call(r,i);h||(i=vt(i),h=o.call(r,i)),a&&a.call(r,i);const m=r.delete(i);return h&&ye(r,"delete",i,void 0),m},clear(){const i=vt(this),r=i.size!==0,o=i.clear();return r&&ye(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=_l(i,t,e)}),n}function Sr(t,e){const n=yl(t,e);return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(_t(n,i)&&i in s?n:s,i,r)}const bl={get:Sr(!1,!1)},xl={get:Sr(!1,!0)},wl={get:Sr(!0,!1)};const Yo=new WeakMap,qo=new WeakMap,Qo=new WeakMap,Sl=new WeakMap;function Cl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pl(t){return t.__v_skip||!Object.isExtensible(t)?0:Cl(Ya(t))}function sn(t){return Le(t)?t:Cr(t,!1,pl,bl,Yo)}function Tl(t){return Cr(t,!1,vl,xl,qo)}function Jo(t){return Cr(t,!0,ml,wl,Qo)}function Cr(t,e,n,s,i){if(!Tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=Pl(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function $e(t){return Le(t)?$e(t.__v_raw):!!(t&&t.__v_isReactive)}function Le(t){return!!(t&&t.__v_isReadonly)}function ee(t){return!!(t&&t.__v_isShallow)}function Pr(t){return t?!!t.__v_raw:!1}function vt(t){const e=t&&t.__v_raw;return e?vt(e):t}function Al(t){return!_t(t,"__v_skip")&&Object.isExtensible(t)&&Go(t,"__v_skip",!0),t}const Gt=t=>Tt(t)?sn(t):t,sr=t=>Tt(t)?Jo(t):t;function It(t){return t?t.__v_isRef===!0:!1}function Ht(t){return Ml(t,!1)}function Ml(t,e){return It(t)?t:new Fl(t,e)}class Fl{constructor(e,n){this.dep=new wr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:vt(e),this._value=n?e:Gt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||ee(e)||Le(e);e=s?e:vt(e),Me(e,n)&&(this._rawValue=e,this._value=s?e:Gt(e),this.dep.trigger())}}function Tr(t){return It(t)?t.value:t}const kl={get:(t,e,n)=>e==="__v_raw"?t:Tr(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return It(i)&&!It(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function Zo(t){return $e(t)?t:new Proxy(t,kl)}class Rl{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new wr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Zi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return Bo(this,!0),!0}get value(){const e=this.dep.track();return Vo(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ol(t,e,n=!1){let s,i;return dt(t)?s=t:(s=t.get,i=t.set),new Rl(s,i,n)}const un={},_n=new WeakMap;let Ge;function El(t,e=!1,n=Ge){if(n){let s=_n.get(n);s||_n.set(n,s=[]),s.push(t)}}function Nl(t,e,n=xt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:h}=n,m=T=>i?T:ee(T)||i===!1||i===0?Ae(T,1):Ae(T);let p,y,w,b,u=!1,A=!1;if(It(t)?(y=()=>t.value,u=ee(t)):$e(t)?(y=()=>m(t),u=!0):ct(t)?(A=!0,u=t.some(T=>$e(T)||ee(T)),y=()=>t.map(T=>{if(It(T))return T.value;if($e(T))return m(T);if(dt(T))return h?h(T,2):T()})):dt(t)?e?y=h?()=>h(t,2):t:y=()=>{if(w){Fe();try{w()}finally{ke()}}const T=Ge;Ge=p;try{return h?h(t,3,[b]):t(b)}finally{Ge=T}}:y=de,e&&i){const T=y,k=i===!0?1/0:i;y=()=>Ae(T(),k)}const R=al(),S=()=>{p.stop(),R&&R.active&&pr(R.effects,p)};if(r&&e){const T=e;e=(...k)=>{T(...k),S()}}let v=A?new Array(t.length).fill(un):un;const _=T=>{if(!(!(p.flags&1)||!p.dirty&&!T))if(e){const k=p.run();if(i||u||(A?k.some((E,G)=>Me(E,v[G])):Me(k,v))){w&&w();const E=Ge;Ge=p;try{const G=[k,v===un?void 0:A&&v[0]===un?[]:v,b];h?h(e,3,G):e(...G),v=k}finally{Ge=E}}}else p.run()};return a&&a(_),p=new Lo(y),p.scheduler=o?()=>o(_,!1):_,b=T=>El(T,!1,p),w=p.onStop=()=>{const T=_n.get(p);if(T){if(h)h(T,4);else for(const k of T)k();_n.delete(p)}},e?s?_(!0):v=p.run():o?o(_.bind(null,!0),!0):p.run(),S.pause=p.pause.bind(p),S.resume=p.resume.bind(p),S.stop=S,S}function Ae(t,e=1/0,n){if(e<=0||!Tt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,It(t))Ae(t.value,e,n);else if(ct(t))for(let s=0;s<t.length;s++)Ae(t[s],e,n);else if($a(t)||Vi(t))t.forEach(s=>{Ae(s,e,n)});else if(qa(t)){for(const s in t)Ae(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ae(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function on(t,e,n,s){try{return s?t(...s):t()}catch(i){On(i,e,n)}}function fe(t,e,n,s){if(dt(t)){const i=on(t,e,n,s);return i&&Do(i)&&i.catch(r=>{On(r,e,n)}),i}if(ct(t)){const i=[];for(let r=0;r<t.length;r++)i.push(fe(t[r],e,n,s));return i}}function On(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||xt;if(e){let a=e.parent;const h=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const p=a.ec;if(p){for(let y=0;y<p.length;y++)if(p[y](t,h,m)===!1)return}a=a.parent}if(r){Fe(),on(r,null,10,[t,h,m]),ke();return}}Dl(t,n,i,s,o)}function Dl(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const jt=[];let ce=-1;const Xe=[];let Pe=null,Ve=0;const ta=Promise.resolve();let yn=null;function Gl(t){const e=yn||ta;return t?e.then(this?t.bind(this):t):e}function Il(t){let e=ce+1,n=jt.length;for(;e<n;){const s=e+n>>>1,i=jt[s],r=en(i);r<t||r===t&&i.flags&2?e=s+1:n=s}return e}function Ar(t){if(!(t.flags&1)){const e=en(t),n=jt[jt.length-1];!n||!(t.flags&2)&&e>=en(n)?jt.push(t):jt.splice(Il(e),0,t),t.flags|=1,ea()}}function ea(){yn||(yn=ta.then(na))}function Ll(t){ct(t)?Xe.push(...t):Pe&&t.id===-1?Pe.splice(Ve+1,0,t):t.flags&1||(Xe.push(t),t.flags|=1),ea()}function Vr(t,e,n=ce+1){for(;n<jt.length;n++){const s=jt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;jt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ia(t){if(Xe.length){const e=[...new Set(Xe)].sort((n,s)=>en(n)-en(s));if(Xe.length=0,Pe){Pe.push(...e);return}for(Pe=e,Ve=0;Ve<Pe.length;Ve++){const n=Pe[Ve];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Pe=null,Ve=0}}const en=t=>t.id==null?t.flags&2?-1:1/0:t.id;function na(t){try{for(ce=0;ce<jt.length;ce++){const e=jt[ce];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),on(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ce<jt.length;ce++){const e=jt[ce];e&&(e.flags&=-2)}ce=-1,jt.length=0,ia(),yn=null,(jt.length||Xe.length)&&na()}}let te=null,ra=null;function bn(t){const e=te;return te=t,ra=t&&t.type.__scopeId||null,e}function We(t,e=te,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&ts(-1);const r=bn(e);let o;try{o=t(...i)}finally{bn(r),s._d&&ts(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Re(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let h=a.dir[s];h&&(Fe(),fe(h,n,8,[t.el,a,t,e]),ke())}}const Ul=Symbol("_vte"),Bl=t=>t.__isTeleport;function Mr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Mr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function En(t,e){return dt(t)?Lt({name:t.name},e,{setup:t}):t}function sa(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xn(t,e,n,s,i=!1){if(ct(t)){t.forEach((u,A)=>xn(u,e&&(ct(e)?e[A]:e),n,s,i));return}if($i(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&xn(t,e,n,s.component.subTree);return}const r=s.shapeFlag&4?Nr(s.component):s.el,o=i?null:r,{i:a,r:h}=t,m=e&&e.r,p=a.refs===xt?a.refs={}:a.refs,y=a.setupState,w=vt(y),b=y===xt?()=>!1:u=>_t(w,u);if(m!=null&&m!==h&&(Rt(m)?(p[m]=null,b(m)&&(y[m]=null)):It(m)&&(m.value=null)),dt(h))on(h,a,12,[o,p]);else{const u=Rt(h),A=It(h);if(u||A){const R=()=>{if(t.f){const S=u?b(h)?y[h]:p[h]:h.value;i?ct(S)&&pr(S,r):ct(S)?S.includes(r)||S.push(r):u?(p[h]=[r],b(h)&&(y[h]=p[h])):(h.value=[r],t.k&&(p[t.k]=h.value))}else u?(p[h]=o,b(h)&&(y[h]=o)):A&&(h.value=o,t.k&&(p[t.k]=o))};o?(R.id=-1,Xt(R,n)):R()}}}kn().requestIdleCallback;kn().cancelIdleCallback;const $i=t=>!!t.type.__asyncLoader,oa=t=>t.type.__isKeepAlive;function Hl(t,e){aa(t,"a",e)}function jl(t,e){aa(t,"da",e)}function aa(t,e,n=Nt){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Nn(e,s,n),n){let i=n.parent;for(;i&&i.parent;)oa(i.parent.vnode)&&Vl(s,e,n,i),i=i.parent}}function Vl(t,e,n,s){const i=Nn(e,t,s,!0);kr(()=>{pr(s[e],i)},n)}function Nn(t,e,n=Nt,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Fe();const a=an(n),h=fe(e,n,t,o);return a(),ke(),h});return s?i.unshift(r):i.push(r),r}}const we=t=>(e,n=Nt)=>{(!rn||t==="sp")&&Nn(t,(...s)=>e(...s),n)},Wl=we("bm"),Dn=we("m"),Kl=we("bu"),Fr=we("u"),la=we("bum"),kr=we("um"),zl=we("sp"),$l=we("rtg"),Xl=we("rtc");function Yl(t,e=Nt){Nn("ec",t,e)}const ql="components";function Oe(t,e){return Jl(ql,t,!0,e)||t}const Ql=Symbol.for("v-ndc");function Jl(t,e,n=!0,s=!1){const i=te||Nt;if(i){const r=i.type;{const a=Bh(r,!1);if(a&&(a===e||a===ie(e)||a===Fn(ie(e))))return r}const o=Wr(i[t]||r[t],e)||Wr(i.appContext[t],e);return!o&&s?r:o}}function Wr(t,e){return t&&(t[e]||t[ie(e)]||t[Fn(ie(e))])}function Kr(t,e,n,s){let i;const r=n,o=ct(t);if(o||Rt(t)){const a=o&&$e(t);let h=!1;a&&(h=!ee(t),t=Rn(t)),i=new Array(t.length);for(let m=0,p=t.length;m<p;m++)i[m]=e(h?Gt(t[m]):t[m],m,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,r)}else if(Tt(t))if(t[Symbol.iterator])i=Array.from(t,(a,h)=>e(a,h,void 0,r));else{const a=Object.keys(t);i=new Array(a.length);for(let h=0,m=a.length;h<m;h++){const p=a[h];i[h]=e(t[p],p,h,r)}}else i=[];return i}const or=t=>t?ka(t)?Nr(t):or(t.parent):null,Xi=Lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>or(t.parent),$root:t=>or(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ca(t),$forceUpdate:t=>t.f||(t.f=()=>{Ar(t.update)}),$nextTick:t=>t.n||(t.n=Gl.bind(t.proxy)),$watch:t=>bh.bind(t)}),Kn=(t,e)=>t!==xt&&!t.__isScriptSetup&&_t(t,e),Zl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:h}=t;let m;if(e[0]!=="$"){const b=o[e];if(b!==void 0)switch(b){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Kn(s,e))return o[e]=1,s[e];if(i!==xt&&_t(i,e))return o[e]=2,i[e];if((m=t.propsOptions[0])&&_t(m,e))return o[e]=3,r[e];if(n!==xt&&_t(n,e))return o[e]=4,n[e];ar&&(o[e]=0)}}const p=Xi[e];let y,w;if(p)return e==="$attrs"&&Dt(t.attrs,"get",""),p(t);if((y=a.__cssModules)&&(y=y[e]))return y;if(n!==xt&&_t(n,e))return o[e]=4,n[e];if(w=h.config.globalProperties,_t(w,e))return w[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Kn(i,e)?(i[e]=n,!0):s!==xt&&_t(s,e)?(s[e]=n,!0):_t(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==xt&&_t(t,o)||Kn(e,o)||(a=r[0])&&_t(a,o)||_t(s,o)||_t(Xi,o)||_t(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:_t(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function zr(t){return ct(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ar=!0;function th(t){const e=ca(t),n=t.proxy,s=t.ctx;ar=!1,e.beforeCreate&&$r(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:h,inject:m,created:p,beforeMount:y,mounted:w,beforeUpdate:b,updated:u,activated:A,deactivated:R,beforeDestroy:S,beforeUnmount:v,destroyed:_,unmounted:T,render:k,renderTracked:E,renderTriggered:G,errorCaptured:f,serverPrefetch:d,expose:g,inheritAttrs:C,components:F,directives:l,filters:x}=e;if(m&&eh(m,s,null),o)for(const M in o){const O=o[M];dt(O)&&(s[M]=O.bind(n))}if(i){const M=i.call(n,n);Tt(M)&&(t.data=sn(M))}if(ar=!0,r)for(const M in r){const O=r[M],D=dt(O)?O.bind(n,n):dt(O.get)?O.get.bind(n,n):de,U=!dt(O)&&dt(O.set)?O.set.bind(n):de,H=re({get:D,set:U});Object.defineProperty(s,M,{enumerable:!0,configurable:!0,get:()=>H.value,set:B=>H.value=B})}if(a)for(const M in a)ha(a[M],s,n,M);if(h){const M=dt(h)?h.call(n):h;Reflect.ownKeys(M).forEach(O=>{ah(O,M[O])})}p&&$r(p,t,"c");function P(M,O){ct(O)?O.forEach(D=>M(D.bind(n))):O&&M(O.bind(n))}if(P(Wl,y),P(Dn,w),P(Kl,b),P(Fr,u),P(Hl,A),P(jl,R),P(Yl,f),P(Xl,E),P($l,G),P(la,v),P(kr,T),P(zl,d),ct(g))if(g.length){const M=t.exposed||(t.exposed={});g.forEach(O=>{Object.defineProperty(M,O,{get:()=>n[O],set:D=>n[O]=D})})}else t.exposed||(t.exposed={});k&&t.render===de&&(t.render=k),C!=null&&(t.inheritAttrs=C),F&&(t.components=F),l&&(t.directives=l),d&&sa(t)}function eh(t,e,n=de){ct(t)&&(t=lr(t));for(const s in t){const i=t[s];let r;Tt(i)?"default"in i?r=gn(i.from||s,i.default,!0):r=gn(i.from||s):r=gn(i),It(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function $r(t,e,n){fe(ct(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function ha(t,e,n,s){let i=s.includes(".")?Ca(n,s):()=>n[s];if(Rt(t)){const r=e[t];dt(r)&&Yi(i,r)}else if(dt(t))Yi(i,t.bind(n));else if(Tt(t))if(ct(t))t.forEach(r=>ha(r,e,n,s));else{const r=dt(t.handler)?t.handler.bind(n):e[t.handler];dt(r)&&Yi(i,r,t)}}function ca(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let h;return a?h=a:!i.length&&!n&&!s?h=e:(h={},i.length&&i.forEach(m=>wn(h,m,o,!0)),wn(h,e,o)),Tt(e)&&r.set(e,h),h}function wn(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&wn(t,r,n,!0),i&&i.forEach(o=>wn(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=ih[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const ih={data:Xr,props:Yr,emits:Yr,methods:ji,computed:ji,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:ji,directives:ji,watch:rh,provide:Xr,inject:nh};function Xr(t,e){return e?t?function(){return Lt(dt(t)?t.call(this,this):t,dt(e)?e.call(this,this):e)}:e:t}function nh(t,e){return ji(lr(t),lr(e))}function lr(t){if(ct(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bt(t,e){return t?[...new Set([].concat(t,e))]:e}function ji(t,e){return t?Lt(Object.create(null),t,e):e}function Yr(t,e){return t?ct(t)&&ct(e)?[...new Set([...t,...e])]:Lt(Object.create(null),zr(t),zr(e??{})):e}function rh(t,e){if(!t)return e;if(!e)return t;const n=Lt(Object.create(null),t);for(const s in e)n[s]=Bt(t[s],e[s]);return n}function ua(){return{app:null,config:{isNativeTag:Ka,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sh=0;function oh(t,e){return function(s,i=null){dt(s)||(s=Lt({},s)),i!=null&&!Tt(i)&&(i=null);const r=ua(),o=new WeakSet,a=[];let h=!1;const m=r.app={_uid:sh++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:jh,get config(){return r.config},set config(p){},use(p,...y){return o.has(p)||(p&&dt(p.install)?(o.add(p),p.install(m,...y)):dt(p)&&(o.add(p),p(m,...y))),m},mixin(p){return r.mixins.includes(p)||r.mixins.push(p),m},component(p,y){return y?(r.components[p]=y,m):r.components[p]},directive(p,y){return y?(r.directives[p]=y,m):r.directives[p]},mount(p,y,w){if(!h){const b=m._ceVNode||yt(s,i);return b.appContext=r,w===!0?w="svg":w===!1&&(w=void 0),t(b,p,w),h=!0,m._container=p,p.__vue_app__=m,Nr(b.component)}},onUnmount(p){a.push(p)},unmount(){h&&(fe(a,m._instance,16),t(null,m._container),delete m._container.__vue_app__)},provide(p,y){return r.provides[p]=y,m},runWithContext(p){const y=Ye;Ye=m;try{return p()}finally{Ye=y}}};return m}}let Ye=null;function ah(t,e){if(Nt){let n=Nt.provides;const s=Nt.parent&&Nt.parent.provides;s===n&&(n=Nt.provides=Object.create(s)),n[t]=e}}function gn(t,e,n=!1){const s=Nt||te;if(s||Ye){const i=Ye?Ye._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&dt(e)?e.call(s&&s.proxy):e}}const da={},fa=()=>Object.create(da),ga=t=>Object.getPrototypeOf(t)===da;function lh(t,e,n,s=!1){const i={},r=fa();t.propsDefaults=Object.create(null),pa(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:Tl(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function hh(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=vt(i),[h]=t.propsOptions;let m=!1;if((s||o>0)&&!(o&16)){if(o&8){const p=t.vnode.dynamicProps;for(let y=0;y<p.length;y++){let w=p[y];if(Gn(t.emitsOptions,w))continue;const b=e[w];if(h)if(_t(r,w))b!==r[w]&&(r[w]=b,m=!0);else{const u=ie(w);i[u]=hr(h,a,u,b,t,!1)}else b!==r[w]&&(r[w]=b,m=!0)}}}else{pa(t,e,i,r)&&(m=!0);let p;for(const y in a)(!e||!_t(e,y)&&((p=Be(y))===y||!_t(e,p)))&&(h?n&&(n[y]!==void 0||n[p]!==void 0)&&(i[y]=hr(h,a,y,void 0,t,!0)):delete i[y]);if(r!==a)for(const y in r)(!e||!_t(e,y))&&(delete r[y],m=!0)}m&&ye(t.attrs,"set","")}function pa(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let h in e){if(Wi(h))continue;const m=e[h];let p;i&&_t(i,p=ie(h))?!r||!r.includes(p)?n[p]=m:(a||(a={}))[p]=m:Gn(t.emitsOptions,h)||(!(h in s)||m!==s[h])&&(s[h]=m,o=!0)}if(r){const h=vt(n),m=a||xt;for(let p=0;p<r.length;p++){const y=r[p];n[y]=hr(i,h,y,m[y],t,!_t(m,y))}}return o}function hr(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=_t(o,"default");if(a&&s===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&dt(h)){const{propsDefaults:m}=i;if(n in m)s=m[n];else{const p=an(i);s=m[n]=h.call(null,e),p()}}else s=h;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Be(n))&&(s=!0))}return s}const ch=new WeakMap;function ma(t,e,n=!1){const s=n?ch:e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let h=!1;if(!dt(t)){const p=y=>{h=!0;const[w,b]=ma(y,e,!0);Lt(o,w),b&&a.push(...b)};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!r&&!h)return Tt(t)&&s.set(t,ze),ze;if(ct(r))for(let p=0;p<r.length;p++){const y=ie(r[p]);qr(y)&&(o[y]=xt)}else if(r)for(const p in r){const y=ie(p);if(qr(y)){const w=r[p],b=o[y]=ct(w)||dt(w)?{type:w}:Lt({},w),u=b.type;let A=!1,R=!0;if(ct(u))for(let S=0;S<u.length;++S){const v=u[S],_=dt(v)&&v.name;if(_==="Boolean"){A=!0;break}else _==="String"&&(R=!1)}else A=dt(u)&&u.name==="Boolean";b[0]=A,b[1]=R,(A||_t(b,"default"))&&a.push(y)}}const m=[o,a];return Tt(t)&&s.set(t,m),m}function qr(t){return t[0]!=="$"&&!Wi(t)}const va=t=>t[0]==="_"||t==="$stable",Rr=t=>ct(t)?t.map(ue):[ue(t)],uh=(t,e,n)=>{if(e._n)return e;const s=We((...i)=>Rr(e(...i)),n);return s._c=!1,s},_a=(t,e,n)=>{const s=t._ctx;for(const i in t){if(va(i))continue;const r=t[i];if(dt(r))e[i]=uh(i,r,s);else if(r!=null){const o=Rr(r);e[i]=()=>o}}},ya=(t,e)=>{const n=Rr(e);t.slots.default=()=>n},ba=(t,e,n)=>{for(const s in e)(n||s!=="_")&&(t[s]=e[s])},dh=(t,e,n)=>{const s=t.slots=fa();if(t.vnode.shapeFlag&32){const i=e._;i?(ba(s,e,n),n&&Go(s,"_",i,!0)):_a(e,s)}else e&&ya(t,e)},fh=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=xt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:ba(i,e,n):(r=!e.$stable,_a(e,i)),o=e}else e&&(ya(t,e),o={default:1});if(r)for(const a in i)!va(a)&&o[a]==null&&delete i[a]},Xt=Ah;function gh(t){return ph(t)}function ph(t,e){const n=kn();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:h,setText:m,setElementText:p,parentNode:y,nextSibling:w,setScopeId:b=de,insertStaticContent:u}=t,A=(N,L,j,V=null,W=null,$=null,nt=void 0,tt=null,et=!!L.dynamicChildren)=>{if(N===L)return;N&&!ti(N,L)&&(V=I(N),B(N,W,$,!0),N=null),L.patchFlag===-2&&(et=!1,L.dynamicChildren=null);const{type:X,ref:st,shapeFlag:rt}=L;switch(X){case In:R(N,L,j,V);break;case Ue:S(N,L,j,V);break;case $n:N==null&&v(L,j,V,nt);break;case se:F(N,L,j,V,W,$,nt,tt,et);break;default:rt&1?k(N,L,j,V,W,$,nt,tt,et):rt&6?l(N,L,j,V,W,$,nt,tt,et):(rt&64||rt&128)&&X.process(N,L,j,V,W,$,nt,tt,et,Z)}st!=null&&W&&xn(st,N&&N.ref,$,L||N,!L)},R=(N,L,j,V)=>{if(N==null)s(L.el=a(L.children),j,V);else{const W=L.el=N.el;L.children!==N.children&&m(W,L.children)}},S=(N,L,j,V)=>{N==null?s(L.el=h(L.children||""),j,V):L.el=N.el},v=(N,L,j,V)=>{[N.el,N.anchor]=u(N.children,L,j,V,N.el,N.anchor)},_=({el:N,anchor:L},j,V)=>{let W;for(;N&&N!==L;)W=w(N),s(N,j,V),N=W;s(L,j,V)},T=({el:N,anchor:L})=>{let j;for(;N&&N!==L;)j=w(N),i(N),N=j;i(L)},k=(N,L,j,V,W,$,nt,tt,et)=>{L.type==="svg"?nt="svg":L.type==="math"&&(nt="mathml"),N==null?E(L,j,V,W,$,nt,tt,et):d(N,L,W,$,nt,tt,et)},E=(N,L,j,V,W,$,nt,tt)=>{let et,X;const{props:st,shapeFlag:rt,transition:ot,dirs:at}=N;if(et=N.el=o(N.type,$,st&&st.is,st),rt&8?p(et,N.children):rt&16&&f(N.children,et,null,V,W,zn(N,$),nt,tt),at&&Re(N,null,V,"created"),G(et,N,N.scopeId,nt,V),st){for(const ft in st)ft!=="value"&&!Wi(ft)&&r(et,ft,null,st[ft],$,V);"value"in st&&r(et,"value",null,st.value,$),(X=st.onVnodeBeforeMount)&&he(X,V,N)}at&&Re(N,null,V,"beforeMount");const lt=mh(W,ot);lt&&ot.beforeEnter(et),s(et,L,j),((X=st&&st.onVnodeMounted)||lt||at)&&Xt(()=>{X&&he(X,V,N),lt&&ot.enter(et),at&&Re(N,null,V,"mounted")},W)},G=(N,L,j,V,W)=>{if(j&&b(N,j),V)for(let $=0;$<V.length;$++)b(N,V[$]);if(W){let $=W.subTree;if(L===$||Ta($.type)&&($.ssContent===L||$.ssFallback===L)){const nt=W.vnode;G(N,nt,nt.scopeId,nt.slotScopeIds,W.parent)}}},f=(N,L,j,V,W,$,nt,tt,et=0)=>{for(let X=et;X<N.length;X++){const st=N[X]=tt?Te(N[X]):ue(N[X]);A(null,st,L,j,V,W,$,nt,tt)}},d=(N,L,j,V,W,$,nt)=>{const tt=L.el=N.el;let{patchFlag:et,dynamicChildren:X,dirs:st}=L;et|=N.patchFlag&16;const rt=N.props||xt,ot=L.props||xt;let at;if(j&&Ee(j,!1),(at=ot.onVnodeBeforeUpdate)&&he(at,j,L,N),st&&Re(L,N,j,"beforeUpdate"),j&&Ee(j,!0),(rt.innerHTML&&ot.innerHTML==null||rt.textContent&&ot.textContent==null)&&p(tt,""),X?g(N.dynamicChildren,X,tt,j,V,zn(L,W),$):nt||O(N,L,tt,null,j,V,zn(L,W),$,!1),et>0){if(et&16)C(tt,rt,ot,j,W);else if(et&2&&rt.class!==ot.class&&r(tt,"class",null,ot.class,W),et&4&&r(tt,"style",rt.style,ot.style,W),et&8){const lt=L.dynamicProps;for(let ft=0;ft<lt.length;ft++){const ut=lt[ft],Pt=rt[ut],kt=ot[ut];(kt!==Pt||ut==="value")&&r(tt,ut,Pt,kt,W,j)}}et&1&&N.children!==L.children&&p(tt,L.children)}else!nt&&X==null&&C(tt,rt,ot,j,W);((at=ot.onVnodeUpdated)||st)&&Xt(()=>{at&&he(at,j,L,N),st&&Re(L,N,j,"updated")},V)},g=(N,L,j,V,W,$,nt)=>{for(let tt=0;tt<L.length;tt++){const et=N[tt],X=L[tt],st=et.el&&(et.type===se||!ti(et,X)||et.shapeFlag&70)?y(et.el):j;A(et,X,st,null,V,W,$,nt,!0)}},C=(N,L,j,V,W)=>{if(L!==j){if(L!==xt)for(const $ in L)!Wi($)&&!($ in j)&&r(N,$,L[$],null,W,V);for(const $ in j){if(Wi($))continue;const nt=j[$],tt=L[$];nt!==tt&&$!=="value"&&r(N,$,tt,nt,W,V)}"value"in j&&r(N,"value",L.value,j.value,W)}},F=(N,L,j,V,W,$,nt,tt,et)=>{const X=L.el=N?N.el:a(""),st=L.anchor=N?N.anchor:a("");let{patchFlag:rt,dynamicChildren:ot,slotScopeIds:at}=L;at&&(tt=tt?tt.concat(at):at),N==null?(s(X,j,V),s(st,j,V),f(L.children||[],j,st,W,$,nt,tt,et)):rt>0&&rt&64&&ot&&N.dynamicChildren?(g(N.dynamicChildren,ot,j,W,$,nt,tt),(L.key!=null||W&&L===W.subTree)&&xa(N,L,!0)):O(N,L,j,st,W,$,nt,tt,et)},l=(N,L,j,V,W,$,nt,tt,et)=>{L.slotScopeIds=tt,N==null?L.shapeFlag&512?W.ctx.activate(L,j,V,nt,et):x(L,j,V,W,$,nt,et):c(N,L,et)},x=(N,L,j,V,W,$,nt)=>{const tt=N.component=Dh(N,V,W);if(oa(N)&&(tt.ctx.renderer=Z),Gh(tt,!1,nt),tt.asyncDep){if(W&&W.registerDep(tt,P,nt),!N.el){const et=tt.subTree=yt(Ue);S(null,et,L,j)}}else P(tt,N,L,j,W,$,nt)},c=(N,L,j)=>{const V=L.component=N.component;if(Ph(N,L,j))if(V.asyncDep&&!V.asyncResolved){M(V,L,j);return}else V.next=L,V.update();else L.el=N.el,V.vnode=L},P=(N,L,j,V,W,$,nt)=>{const tt=()=>{if(N.isMounted){let{next:rt,bu:ot,u:at,parent:lt,vnode:ft}=N;{const Mt=wa(N);if(Mt){rt&&(rt.el=ft.el,M(N,rt,nt)),Mt.asyncDep.then(()=>{N.isUnmounted||tt()});return}}let ut=rt,Pt;Ee(N,!1),rt?(rt.el=ft.el,M(N,rt,nt)):rt=ft,ot&&Hn(ot),(Pt=rt.props&&rt.props.onVnodeBeforeUpdate)&&he(Pt,lt,rt,ft),Ee(N,!0);const kt=Jr(N),St=N.subTree;N.subTree=kt,A(St,kt,y(St.el),I(St),N,W,$),rt.el=kt.el,ut===null&&Th(N,kt.el),at&&Xt(at,W),(Pt=rt.props&&rt.props.onVnodeUpdated)&&Xt(()=>he(Pt,lt,rt,ft),W)}else{let rt;const{el:ot,props:at}=L,{bm:lt,m:ft,parent:ut,root:Pt,type:kt}=N,St=$i(L);Ee(N,!1),lt&&Hn(lt),!St&&(rt=at&&at.onVnodeBeforeMount)&&he(rt,ut,L),Ee(N,!0);{Pt.ce&&Pt.ce._injectChildStyle(kt);const Mt=N.subTree=Jr(N);A(null,Mt,j,V,N,W,$),L.el=Mt.el}if(ft&&Xt(ft,W),!St&&(rt=at&&at.onVnodeMounted)){const Mt=L;Xt(()=>he(rt,ut,Mt),W)}(L.shapeFlag&256||ut&&$i(ut.vnode)&&ut.vnode.shapeFlag&256)&&N.a&&Xt(N.a,W),N.isMounted=!0,L=j=V=null}};N.scope.on();const et=N.effect=new Lo(tt);N.scope.off();const X=N.update=et.run.bind(et),st=N.job=et.runIfDirty.bind(et);st.i=N,st.id=N.uid,et.scheduler=()=>Ar(st),Ee(N,!0),X()},M=(N,L,j)=>{L.component=N;const V=N.vnode.props;N.vnode=L,N.next=null,hh(N,L.props,V,j),fh(N,L.children,j),Fe(),Vr(N),ke()},O=(N,L,j,V,W,$,nt,tt,et=!1)=>{const X=N&&N.children,st=N?N.shapeFlag:0,rt=L.children,{patchFlag:ot,shapeFlag:at}=L;if(ot>0){if(ot&128){U(X,rt,j,V,W,$,nt,tt,et);return}else if(ot&256){D(X,rt,j,V,W,$,nt,tt,et);return}}at&8?(st&16&&J(X,W,$),rt!==X&&p(j,rt)):st&16?at&16?U(X,rt,j,V,W,$,nt,tt,et):J(X,W,$,!0):(st&8&&p(j,""),at&16&&f(rt,j,V,W,$,nt,tt,et))},D=(N,L,j,V,W,$,nt,tt,et)=>{N=N||ze,L=L||ze;const X=N.length,st=L.length,rt=Math.min(X,st);let ot;for(ot=0;ot<rt;ot++){const at=L[ot]=et?Te(L[ot]):ue(L[ot]);A(N[ot],at,j,null,W,$,nt,tt,et)}X>st?J(N,W,$,!0,!1,rt):f(L,j,V,W,$,nt,tt,et,rt)},U=(N,L,j,V,W,$,nt,tt,et)=>{let X=0;const st=L.length;let rt=N.length-1,ot=st-1;for(;X<=rt&&X<=ot;){const at=N[X],lt=L[X]=et?Te(L[X]):ue(L[X]);if(ti(at,lt))A(at,lt,j,null,W,$,nt,tt,et);else break;X++}for(;X<=rt&&X<=ot;){const at=N[rt],lt=L[ot]=et?Te(L[ot]):ue(L[ot]);if(ti(at,lt))A(at,lt,j,null,W,$,nt,tt,et);else break;rt--,ot--}if(X>rt){if(X<=ot){const at=ot+1,lt=at<st?L[at].el:V;for(;X<=ot;)A(null,L[X]=et?Te(L[X]):ue(L[X]),j,lt,W,$,nt,tt,et),X++}}else if(X>ot)for(;X<=rt;)B(N[X],W,$,!0),X++;else{const at=X,lt=X,ft=new Map;for(X=lt;X<=ot;X++){const $t=L[X]=et?Te(L[X]):ue(L[X]);$t.key!=null&&ft.set($t.key,X)}let ut,Pt=0;const kt=ot-lt+1;let St=!1,Mt=0;const Vt=new Array(kt);for(X=0;X<kt;X++)Vt[X]=0;for(X=at;X<=rt;X++){const $t=N[X];if(Pt>=kt){B($t,W,$,!0);continue}let le;if($t.key!=null)le=ft.get($t.key);else for(ut=lt;ut<=ot;ut++)if(Vt[ut-lt]===0&&ti($t,L[ut])){le=ut;break}le===void 0?B($t,W,$,!0):(Vt[le-lt]=X+1,le>=Mt?Mt=le:St=!0,A($t,L[le],j,null,W,$,nt,tt,et),Pt++)}const ln=St?vh(Vt):ze;for(ut=ln.length-1,X=kt-1;X>=0;X--){const $t=lt+X,le=L[$t],Ur=$t+1<st?L[$t+1].el:V;Vt[X]===0?A(null,le,j,Ur,W,$,nt,tt,et):St&&(ut<0||X!==ln[ut]?H(le,j,Ur,2):ut--)}}},H=(N,L,j,V,W=null)=>{const{el:$,type:nt,transition:tt,children:et,shapeFlag:X}=N;if(X&6){H(N.component.subTree,L,j,V);return}if(X&128){N.suspense.move(L,j,V);return}if(X&64){nt.move(N,L,j,Z);return}if(nt===se){s($,L,j);for(let rt=0;rt<et.length;rt++)H(et[rt],L,j,V);s(N.anchor,L,j);return}if(nt===$n){_(N,L,j);return}if(V!==2&&X&1&&tt)if(V===0)tt.beforeEnter($),s($,L,j),Xt(()=>tt.enter($),W);else{const{leave:rt,delayLeave:ot,afterLeave:at}=tt,lt=()=>s($,L,j),ft=()=>{rt($,()=>{lt(),at&&at()})};ot?ot($,lt,ft):ft()}else s($,L,j)},B=(N,L,j,V=!1,W=!1)=>{const{type:$,props:nt,ref:tt,children:et,dynamicChildren:X,shapeFlag:st,patchFlag:rt,dirs:ot,cacheIndex:at}=N;if(rt===-2&&(W=!1),tt!=null&&xn(tt,null,j,N,!0),at!=null&&(L.renderCache[at]=void 0),st&256){L.ctx.deactivate(N);return}const lt=st&1&&ot,ft=!$i(N);let ut;if(ft&&(ut=nt&&nt.onVnodeBeforeUnmount)&&he(ut,L,N),st&6)q(N.component,j,V);else{if(st&128){N.suspense.unmount(j,V);return}lt&&Re(N,null,L,"beforeUnmount"),st&64?N.type.remove(N,L,j,Z,V):X&&!X.hasOnce&&($!==se||rt>0&&rt&64)?J(X,L,j,!1,!0):($===se&&rt&384||!W&&st&16)&&J(et,L,j),V&&z(N)}(ft&&(ut=nt&&nt.onVnodeUnmounted)||lt)&&Xt(()=>{ut&&he(ut,L,N),lt&&Re(N,null,L,"unmounted")},j)},z=N=>{const{type:L,el:j,anchor:V,transition:W}=N;if(L===se){Y(j,V);return}if(L===$n){T(N);return}const $=()=>{i(j),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(N.shapeFlag&1&&W&&!W.persisted){const{leave:nt,delayLeave:tt}=W,et=()=>nt(j,$);tt?tt(N.el,$,et):et()}else $()},Y=(N,L)=>{let j;for(;N!==L;)j=w(N),i(N),N=j;i(L)},q=(N,L,j)=>{const{bum:V,scope:W,job:$,subTree:nt,um:tt,m:et,a:X}=N;Qr(et),Qr(X),V&&Hn(V),W.stop(),$&&($.flags|=8,B(nt,N,L,j)),tt&&Xt(tt,L),Xt(()=>{N.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},J=(N,L,j,V=!1,W=!1,$=0)=>{for(let nt=$;nt<N.length;nt++)B(N[nt],L,j,V,W)},I=N=>{if(N.shapeFlag&6)return I(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const L=w(N.anchor||N.el),j=L&&L[Ul];return j?w(j):L};let K=!1;const Q=(N,L,j)=>{N==null?L._vnode&&B(L._vnode,null,null,!0):A(L._vnode||null,N,L,null,null,null,j),L._vnode=N,K||(K=!0,Vr(),ia(),K=!1)},Z={p:A,um:B,m:H,r:z,mt:x,mc:f,pc:O,pbc:g,n:I,o:t};return{render:Q,hydrate:void 0,createApp:oh(Q)}}function zn({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ee({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xa(t,e,n=!1){const s=t.children,i=e.children;if(ct(s)&&ct(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Te(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&xa(o,a)),a.type===In&&(a.el=o.el)}}function vh(t){const e=t.slice(),n=[0];let s,i,r,o,a;const h=t.length;for(s=0;s<h;s++){const m=t[s];if(m!==0){if(i=n[n.length-1],t[i]<m){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<m?r=a+1:o=a;m<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function wa(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:wa(e)}function Qr(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _h=Symbol.for("v-scx"),yh=()=>gn(_h);function Yi(t,e,n){return Sa(t,e,n)}function Sa(t,e,n=xt){const{immediate:s,deep:i,flush:r,once:o}=n,a=Lt({},n),h=e&&s||!e&&r!=="post";let m;if(rn){if(r==="sync"){const b=yh();m=b.__watcherHandles||(b.__watcherHandles=[])}else if(!h){const b=()=>{};return b.stop=de,b.resume=de,b.pause=de,b}}const p=Nt;a.call=(b,u,A)=>fe(b,p,u,A);let y=!1;r==="post"?a.scheduler=b=>{Xt(b,p&&p.suspense)}:r!=="sync"&&(y=!0,a.scheduler=(b,u)=>{u?b():Ar(b)}),a.augmentJob=b=>{e&&(b.flags|=4),y&&(b.flags|=2,p&&(b.id=p.uid,b.i=p))};const w=Nl(t,e,a);return rn&&(m?m.push(w):h&&w()),w}function bh(t,e,n){const s=this.proxy,i=Rt(t)?t.includes(".")?Ca(s,t):()=>s[t]:t.bind(s,s);let r;dt(e)?r=e:(r=e.handler,n=e);const o=an(this),a=Sa(i,r.bind(s),n);return o(),a}function Ca(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const xh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ie(e)}Modifiers`]||t[`${Be(e)}Modifiers`];function wh(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||xt;let i=n;const r=e.startsWith("update:"),o=r&&xh(s,e.slice(7));o&&(o.trim&&(i=n.map(p=>Rt(p)?p.trim():p)),o.number&&(i=n.map(Za)));let a,h=s[a=Bn(e)]||s[a=Bn(ie(e))];!h&&r&&(h=s[a=Bn(Be(e))]),h&&fe(h,t,6,i);const m=s[a+"Once"];if(m){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,fe(m,t,6,i)}}function Pa(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!dt(t)){const h=m=>{const p=Pa(m,e,!0);p&&(a=!0,Lt(o,p))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!r&&!a?(Tt(t)&&s.set(t,null),null):(ct(r)?r.forEach(h=>o[h]=null):Lt(o,r),Tt(t)&&s.set(t,o),o)}function Gn(t,e){return!t||!Tn(e)?!1:(e=e.slice(2).replace(/Once$/,""),_t(t,e[0].toLowerCase()+e.slice(1))||_t(t,Be(e))||_t(t,e))}function Jr(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:h,render:m,renderCache:p,props:y,data:w,setupState:b,ctx:u,inheritAttrs:A}=t,R=bn(t);let S,v;try{if(n.shapeFlag&4){const T=i||s,k=T;S=ue(m.call(k,T,p,y,b,w,u)),v=a}else{const T=e;S=ue(T.length>1?T(y,{attrs:a,slots:o,emit:h}):T(y,null)),v=e.props?a:Sh(a)}}catch(T){qi.length=0,On(T,t,1),S=yt(Ue)}let _=S;if(v&&A!==!1){const T=Object.keys(v),{shapeFlag:k}=_;T.length&&k&7&&(r&&T.some(gr)&&(v=Ch(v,r)),_=Qe(_,v,!1,!0))}return n.dirs&&(_=Qe(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Mr(_,n.transition),S=_,bn(R),S}const Sh=t=>{let e;for(const n in t)(n==="class"||n==="style"||Tn(n))&&((e||(e={}))[n]=t[n]);return e},Ch=(t,e)=>{const n={};for(const s in t)(!gr(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Ph(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:h}=e,m=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return s?Zr(s,o,m):!!o;if(h&8){const p=e.dynamicProps;for(let y=0;y<p.length;y++){const w=p[y];if(o[w]!==s[w]&&!Gn(m,w))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Zr(s,o,m):!0:!!o;return!1}function Zr(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!Gn(n,r))return!0}return!1}function Th({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ta=t=>t.__isSuspense;function Ah(t,e){e&&e.pendingBranch?ct(t)?e.effects.push(...t):e.effects.push(t):Ll(t)}const se=Symbol.for("v-fgt"),In=Symbol.for("v-txt"),Ue=Symbol.for("v-cmt"),$n=Symbol.for("v-stc"),qi=[];let qt=null;function oe(t=!1){qi.push(qt=t?null:[])}function Mh(){qi.pop(),qt=qi[qi.length-1]||null}let nn=1;function ts(t,e=!1){nn+=t,t<0&&qt&&e&&(qt.hasOnce=!0)}function Aa(t){return t.dynamicChildren=nn>0?qt||ze:null,Mh(),nn>0&&qt&&qt.push(t),t}function qe(t,e,n,s,i,r){return Aa(Ji(t,e,n,s,i,r,!0))}function Qi(t,e,n,s,i){return Aa(yt(t,e,n,s,i,!0))}function Sn(t){return t?t.__v_isVNode===!0:!1}function ti(t,e){return t.type===e.type&&t.key===e.key}const Ma=({key:t})=>t??null,pn=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Rt(t)||It(t)||dt(t)?{i:te,r:t,k:e,f:!!n}:t:null);function Ji(t,e=null,n=null,s=0,i=null,r=t===se?0:1,o=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ma(e),ref:e&&pn(e),scopeId:ra,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:te};return a?(Or(h,n),r&128&&t.normalize(h)):n&&(h.shapeFlag|=Rt(n)?8:16),nn>0&&!o&&qt&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&qt.push(h),h}const yt=Fh;function Fh(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===Ql)&&(t=Ue),Sn(t)){const a=Qe(t,e,!0);return n&&Or(a,n),nn>0&&!r&&qt&&(a.shapeFlag&6?qt[qt.indexOf(t)]=a:qt.push(a)),a.patchFlag=-2,a}if(Hh(t)&&(t=t.__vccOpts),e){e=kh(e);let{class:a,style:h}=e;a&&!Rt(a)&&(e.class=_r(a)),Tt(h)&&(Pr(h)&&!ct(h)&&(h=Lt({},h)),e.style=vr(h))}const o=Rt(t)?1:Ta(t)?128:Bl(t)?64:Tt(t)?4:dt(t)?2:0;return Ji(t,e,n,s,i,o,r,!0)}function kh(t){return t?Pr(t)||ga(t)?Lt({},t):t:null}function Qe(t,e,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:h}=t,m=e?Oh(i||{},e):i,p={__v_isVNode:!0,__v_skip:!0,type:t.type,props:m,key:m&&Ma(m),ref:e&&e.ref?n&&r?ct(r)?r.concat(pn(e)):[r,pn(e)]:pn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==se?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qe(t.ssContent),ssFallback:t.ssFallback&&Qe(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&s&&Mr(p,h.clone(p)),p}function Rh(t=" ",e=0){return yt(In,null,t,e)}function Fa(t="",e=!1){return e?(oe(),Qi(Ue,null,t)):yt(Ue,null,t)}function ue(t){return t==null||typeof t=="boolean"?yt(Ue):ct(t)?yt(se,null,t.slice()):Sn(t)?Te(t):yt(In,null,String(t))}function Te(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qe(t)}function Or(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ct(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Or(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!ga(e)?e._ctx=te:i===3&&te&&(te.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else dt(e)?(e={default:e,_ctx:te},n=32):(e=String(e),s&64?(n=16,e=[Rh(e)]):n=8);t.children=e,t.shapeFlag|=n}function Oh(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=_r([e.class,s.class]));else if(i==="style")e.style=vr([e.style,s.style]);else if(Tn(i)){const r=e[i],o=s[i];o&&r!==o&&!(ct(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function he(t,e,n,s=null){fe(t,e,7,[n,s])}const Eh=ua();let Nh=0;function Dh(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||Eh,r={uid:Nh++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ol(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ma(s,i),emitsOptions:Pa(s,i),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:s.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=wh.bind(null,r),t.ce&&t.ce(r),r}let Nt=null;const Er=()=>Nt||te;let Cn,cr;{const t=kn(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Cn=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),cr=e("__VUE_SSR_SETTERS__",n=>rn=n)}const an=t=>{const e=Nt;return Cn(t),t.scope.on(),()=>{t.scope.off(),Cn(e)}},es=()=>{Nt&&Nt.scope.off(),Cn(null)};function ka(t){return t.vnode.shapeFlag&4}let rn=!1;function Gh(t,e=!1,n=!1){e&&cr(e);const{props:s,children:i}=t.vnode,r=ka(t);lh(t,s,r,e),dh(t,i,n);const o=r?Ih(t,e):void 0;return e&&cr(!1),o}function Ih(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Zl);const{setup:s}=n;if(s){Fe();const i=t.setupContext=s.length>1?Uh(t):null,r=an(t),o=on(s,t,0,[t.props,i]),a=Do(o);if(ke(),r(),(a||t.sp)&&!$i(t)&&sa(t),a){if(o.then(es,es),e)return o.then(h=>{is(t,h)}).catch(h=>{On(h,t,0)});t.asyncDep=o}else is(t,o)}else Ra(t)}function is(t,e,n){dt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Tt(e)&&(t.setupState=Zo(e)),Ra(t)}function Ra(t,e,n){const s=t.type;t.render||(t.render=s.render||de);{const i=an(t);Fe();try{th(t)}finally{ke(),i()}}}const Lh={get(t,e){return Dt(t,"get",""),t[e]}};function Uh(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Lh),slots:t.slots,emit:t.emit,expose:e}}function Nr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Zo(Al(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Xi)return Xi[n](t)},has(e,n){return n in e||n in Xi}})):t.proxy}function Bh(t,e=!0){return dt(t)?t.displayName||t.name:t.name||e&&t.__name}function Hh(t){return dt(t)&&"__vccOpts"in t}const re=(t,e)=>Ol(t,e,rn);function Oa(t,e,n){const s=arguments.length;return s===2?Tt(e)&&!ct(e)?Sn(e)?yt(t,null,[e]):yt(t,e):yt(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Sn(n)&&(n=[n]),yt(t,e,n))}const jh="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ur;const ns=typeof window<"u"&&window.trustedTypes;if(ns)try{ur=ns.createPolicy("vue",{createHTML:t=>t})}catch{}const Ea=ur?t=>ur.createHTML(t):t=>t,Vh="http://www.w3.org/2000/svg",Wh="http://www.w3.org/1998/Math/MathML",_e=typeof document<"u"?document:null,rs=_e&&_e.createElement("template"),Kh={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?_e.createElementNS(Vh,t):e==="mathml"?_e.createElementNS(Wh,t):n?_e.createElement(t,{is:n}):_e.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>_e.createTextNode(t),createComment:t=>_e.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_e.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{rs.innerHTML=Ea(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=rs.content;if(s==="svg"||s==="mathml"){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},zh=Symbol("_vtc");function $h(t,e,n){const s=t[zh];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ss=Symbol("_vod"),Xh=Symbol("_vsh"),Yh=Symbol(""),qh=/(^|;)\s*display\s*:/;function Qh(t,e,n){const s=t.style,i=Rt(n);let r=!1;if(n&&!i){if(e)if(Rt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&mn(s,a,"")}else for(const o in e)n[o]==null&&mn(s,o,"");for(const o in n)o==="display"&&(r=!0),mn(s,o,n[o])}else if(i){if(e!==n){const o=s[Yh];o&&(n+=";"+o),s.cssText=n,r=qh.test(n)}}else e&&t.removeAttribute("style");ss in t&&(t[ss]=r?s.display:"",t[Xh]&&(s.display="none"))}const os=/\s*!important$/;function mn(t,e,n){if(ct(n))n.forEach(s=>mn(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Jh(t,e);os.test(n)?t.setProperty(Be(s),n.replace(os,""),"important"):t[s]=n}}const as=["Webkit","Moz","ms"],Xn={};function Jh(t,e){const n=Xn[e];if(n)return n;let s=ie(e);if(s!=="filter"&&s in t)return Xn[e]=s;s=Fn(s);for(let i=0;i<as.length;i++){const r=as[i]+s;if(r in t)return Xn[e]=r}return e}const ls="http://www.w3.org/1999/xlink";function hs(t,e,n,s,i,r=sl(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ls,e.slice(6,e.length)):t.setAttributeNS(ls,e,n):n==null||r&&!Io(n)?t.removeAttribute(e):t.setAttribute(e,r?"":Je(n)?String(n):n)}function cs(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ea(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,h=n==null?t.type==="checkbox"?"on":"":String(n);(a!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Io(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Zh(t,e,n,s){t.addEventListener(e,n,s)}function tc(t,e,n,s){t.removeEventListener(e,n,s)}const us=Symbol("_vei");function ec(t,e,n,s,i=null){const r=t[us]||(t[us]={}),o=r[e];if(s&&o)o.value=s;else{const[a,h]=ic(e);if(s){const m=r[e]=sc(s,i);Zh(t,a,m,h)}else o&&(tc(t,a,o,h),r[e]=void 0)}}const ds=/(?:Once|Passive|Capture)$/;function ic(t){let e;if(ds.test(t)){e={};let s;for(;s=t.match(ds);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Be(t.slice(2)),e]}let Yn=0;const nc=Promise.resolve(),rc=()=>Yn||(nc.then(()=>Yn=0),Yn=Date.now());function sc(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;fe(oc(s,n.value),e,5,[s])};return n.value=t,n.attached=rc(),n}function oc(t,e){if(ct(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const fs=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ac=(t,e,n,s,i,r)=>{const o=i==="svg";e==="class"?$h(t,s,o):e==="style"?Qh(t,n,s):Tn(e)?gr(e)||ec(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):lc(t,e,s,o))?(cs(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hs(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Rt(s))?cs(t,ie(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),hs(t,e,s,o))};function lc(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&fs(e)&&dt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return fs(e)&&Rt(n)?!1:e in t}const hc=Lt({patchProp:ac},Kh);let gs;function cc(){return gs||(gs=gh(hc))}const uc=(...t)=>{const e=cc().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=fc(s);if(!i)return;const r=e._component;!dt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,dc(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function dc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function fc(t){return Rt(t)?document.querySelector(t):t}const gc="modulepreload",pc=function(t){return"/"+t},ps={},mc=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=pc(h),h in ps)return;ps[h]=!0;const m=h.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":gc,m||(y.as="script"),y.crossOrigin="",y.href=h,a&&y.setAttribute("nonce",a),document.head.appendChild(y),m)return new Promise((w,b)=>{y.addEventListener("load",w),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vn={exports:{}},ei={},vs={},_s={},ys;function gt(){return ys||(ys=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof ms<"u"?ms:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.18",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return t.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var i;return(i=t.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(i){t.glob.Konva=i}};const s=i=>{t.Konva[i.prototype.getClassName()]=i};t._registerNode=s,t.Konva._injectGlobal(t.Konva)}(_s)),_s}var bs={},xs;function At(){return xs||(xs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=gt();class n{constructor(T=[1,0,0,1,0,0]){this.dirty=!1,this.m=T&&T.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(T){T.m[0]=this.m[0],T.m[1]=this.m[1],T.m[2]=this.m[2],T.m[3]=this.m[3],T.m[4]=this.m[4],T.m[5]=this.m[5]}point(T){const k=this.m;return{x:k[0]*T.x+k[2]*T.y+k[4],y:k[1]*T.x+k[3]*T.y+k[5]}}translate(T,k){return this.m[4]+=this.m[0]*T+this.m[2]*k,this.m[5]+=this.m[1]*T+this.m[3]*k,this}scale(T,k){return this.m[0]*=T,this.m[1]*=T,this.m[2]*=k,this.m[3]*=k,this}rotate(T){const k=Math.cos(T),E=Math.sin(T),G=this.m[0]*k+this.m[2]*E,f=this.m[1]*k+this.m[3]*E,d=this.m[0]*-E+this.m[2]*k,g=this.m[1]*-E+this.m[3]*k;return this.m[0]=G,this.m[1]=f,this.m[2]=d,this.m[3]=g,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(T,k){const E=this.m[0]+this.m[2]*k,G=this.m[1]+this.m[3]*k,f=this.m[2]+this.m[0]*T,d=this.m[3]+this.m[1]*T;return this.m[0]=E,this.m[1]=G,this.m[2]=f,this.m[3]=d,this}multiply(T){const k=this.m[0]*T.m[0]+this.m[2]*T.m[1],E=this.m[1]*T.m[0]+this.m[3]*T.m[1],G=this.m[0]*T.m[2]+this.m[2]*T.m[3],f=this.m[1]*T.m[2]+this.m[3]*T.m[3],d=this.m[0]*T.m[4]+this.m[2]*T.m[5]+this.m[4],g=this.m[1]*T.m[4]+this.m[3]*T.m[5]+this.m[5];return this.m[0]=k,this.m[1]=E,this.m[2]=G,this.m[3]=f,this.m[4]=d,this.m[5]=g,this}invert(){const T=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),k=this.m[3]*T,E=-this.m[1]*T,G=-this.m[2]*T,f=this.m[0]*T,d=T*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=T*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=k,this.m[1]=E,this.m[2]=G,this.m[3]=f,this.m[4]=d,this.m[5]=g,this}getMatrix(){return this.m}decompose(){const T=this.m[0],k=this.m[1],E=this.m[2],G=this.m[3],f=this.m[4],d=this.m[5],g=T*G-k*E,C={x:f,y:d,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(T!=0||k!=0){const F=Math.sqrt(T*T+k*k);C.rotation=k>0?Math.acos(T/F):-Math.acos(T/F),C.scaleX=F,C.scaleY=g/F,C.skewX=(T*E+k*G)/g,C.skewY=0}else if(E!=0||G!=0){const F=Math.sqrt(E*E+G*G);C.rotation=Math.PI/2-(G>0?Math.acos(-E/F):-Math.acos(E/F)),C.scaleX=g/F,C.scaleY=F,C.skewX=0,C.skewY=(T*E+k*G)/g}return C.rotation=t.Util._getRotation(C.rotation),C}}t.Transform=n;const s="[object Array]",i="[object Number]",r="[object String]",o="[object Boolean]",a=Math.PI/180,h=180/Math.PI,m="#",p="",y="0",w="Konva warning: ",b="Konva error: ",u="rgb(",A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},R=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let S=[];const v=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(_){setTimeout(_,60)};t.Util={_isElement(_){return!!(_&&_.nodeType==1)},_isFunction(_){return!!(_&&_.constructor&&_.call&&_.apply)},_isPlainObject(_){return!!_&&_.constructor===Object},_isArray(_){return Object.prototype.toString.call(_)===s},_isNumber(_){return Object.prototype.toString.call(_)===i&&!isNaN(_)&&isFinite(_)},_isString(_){return Object.prototype.toString.call(_)===r},_isBoolean(_){return Object.prototype.toString.call(_)===o},isObject(_){return _ instanceof Object},isValidSelector(_){if(typeof _!="string")return!1;const T=_[0];return T==="#"||T==="."||T===T.toUpperCase()},_sign(_){return _===0||_>0?1:-1},requestAnimFrame(_){S.push(_),S.length===1&&v(function(){const T=S;S=[],T.forEach(function(k){k()})})},createCanvasElement(){const _=document.createElement("canvas");try{_.style=_.style||{}}catch{}return _},createImageElement(){return document.createElement("img")},_isInDocument(_){for(;_=_.parentNode;)if(_==document)return!0;return!1},_urlToImage(_,T){const k=t.Util.createImageElement();k.onload=function(){T(k)},k.src=_},_rgbToHex(_,T,k){return((1<<24)+(_<<16)+(T<<8)+k).toString(16).slice(1)},_hexToRgb(_){_=_.replace(m,p);const T=parseInt(_,16);return{r:T>>16&255,g:T>>8&255,b:T&255}},getRandomColor(){let _=(Math.random()*16777215<<0).toString(16);for(;_.length<6;)_=y+_;return m+_},getRGB(_){let T;return _ in A?(T=A[_],{r:T[0],g:T[1],b:T[2]}):_[0]===m?this._hexToRgb(_.substring(1)):_.substr(0,4)===u?(T=R.exec(_.replace(/ /g,"")),{r:parseInt(T[1],10),g:parseInt(T[2],10),b:parseInt(T[3],10)}):{r:0,g:0,b:0}},colorToRGBA(_){return _=_||"black",t.Util._namedColorToRBA(_)||t.Util._hex3ColorToRGBA(_)||t.Util._hex4ColorToRGBA(_)||t.Util._hex6ColorToRGBA(_)||t.Util._hex8ColorToRGBA(_)||t.Util._rgbColorToRGBA(_)||t.Util._rgbaColorToRGBA(_)||t.Util._hslColorToRGBA(_)},_namedColorToRBA(_){const T=A[_.toLowerCase()];return T?{r:T[0],g:T[1],b:T[2],a:1}:null},_rgbColorToRGBA(_){if(_.indexOf("rgb(")===0){_=_.match(/rgb\(([^)]+)\)/)[1];const T=_.split(/ *, */).map(Number);return{r:T[0],g:T[1],b:T[2],a:1}}},_rgbaColorToRGBA(_){if(_.indexOf("rgba(")===0){_=_.match(/rgba\(([^)]+)\)/)[1];const T=_.split(/ *, */).map((k,E)=>k.slice(-1)==="%"?E===3?parseInt(k)/100:parseInt(k)/100*255:Number(k));return{r:T[0],g:T[1],b:T[2],a:T[3]}}},_hex8ColorToRGBA(_){if(_[0]==="#"&&_.length===9)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:parseInt(_.slice(7,9),16)/255}},_hex6ColorToRGBA(_){if(_[0]==="#"&&_.length===7)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:1}},_hex4ColorToRGBA(_){if(_[0]==="#"&&_.length===5)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:parseInt(_[4]+_[4],16)/255}},_hex3ColorToRGBA(_){if(_[0]==="#"&&_.length===4)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:1}},_hslColorToRGBA(_){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(_)){const[T,...k]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_),E=Number(k[0])/360,G=Number(k[1])/100,f=Number(k[2])/100;let d,g,C;if(G===0)return C=f*255,{r:Math.round(C),g:Math.round(C),b:Math.round(C),a:1};f<.5?d=f*(1+G):d=f+G-f*G;const F=2*f-d,l=[0,0,0];for(let x=0;x<3;x++)g=E+1/3*-(x-1),g<0&&g++,g>1&&g--,6*g<1?C=F+(d-F)*6*g:2*g<1?C=d:3*g<2?C=F+(d-F)*(2/3-g)*6:C=F,l[x]=C*255;return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection(_,T){return!(T.x>_.x+_.width||T.x+T.width<_.x||T.y>_.y+_.height||T.y+T.height<_.y)},cloneObject(_){const T={};for(const k in _)this._isPlainObject(_[k])?T[k]=this.cloneObject(_[k]):this._isArray(_[k])?T[k]=this.cloneArray(_[k]):T[k]=_[k];return T},cloneArray(_){return _.slice(0)},degToRad(_){return _*a},radToDeg(_){return _*h},_degToRad(_){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(_)},_radToDeg(_){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(_)},_getRotation(_){return e.Konva.angleDeg?t.Util.radToDeg(_):_},_capitalize(_){return _.charAt(0).toUpperCase()+_.slice(1)},throw(_){throw new Error(b+_)},error(_){console.error(b+_)},warn(_){e.Konva.showWarnings&&console.warn(w+_)},each(_,T){for(const k in _)T(k,_[k])},_inRange(_,T,k){return T<=_&&_<k},_getProjectionToSegment(_,T,k,E,G,f){let d,g,C;const F=(_-k)*(_-k)+(T-E)*(T-E);if(F==0)d=_,g=T,C=(G-k)*(G-k)+(f-E)*(f-E);else{const l=((G-_)*(k-_)+(f-T)*(E-T))/F;l<0?(d=_,g=T,C=(_-G)*(_-G)+(T-f)*(T-f)):l>1?(d=k,g=E,C=(k-G)*(k-G)+(E-f)*(E-f)):(d=_+l*(k-_),g=T+l*(E-T),C=(d-G)*(d-G)+(g-f)*(g-f))}return[d,g,C]},_getProjectionToLine(_,T,k){const E=t.Util.cloneObject(_);let G=Number.MAX_VALUE;return T.forEach(function(f,d){if(!k&&d===T.length-1)return;const g=T[(d+1)%T.length],C=t.Util._getProjectionToSegment(f.x,f.y,g.x,g.y,_.x,_.y),F=C[0],l=C[1],x=C[2];x<G&&(E.x=F,E.y=l,G=x)}),E},_prepareArrayForTween(_,T,k){const E=[],G=[];if(_.length>T.length){const d=T;T=_,_=d}for(let d=0;d<_.length;d+=2)E.push({x:_[d],y:_[d+1]});for(let d=0;d<T.length;d+=2)G.push({x:T[d],y:T[d+1]});const f=[];return G.forEach(function(d){const g=t.Util._getProjectionToLine(d,E,k);f.push(g.x),f.push(g.y)}),f},_prepareToStringify(_){let T;_.visitedByCircularReferenceRemoval=!0;for(const k in _)if(_.hasOwnProperty(k)&&_[k]&&typeof _[k]=="object"){if(T=Object.getOwnPropertyDescriptor(_,k),_[k].visitedByCircularReferenceRemoval||t.Util._isElement(_[k]))if(T.configurable)delete _[k];else return null;else if(t.Util._prepareToStringify(_[k])===null)if(T.configurable)delete _[k];else return null}return delete _.visitedByCircularReferenceRemoval,_},_assign(_,T){for(const k in T)_[k]=T[k];return _},_getFirstPointerId(_){return _.touches?_.changedTouches[0].identifier:_.pointerId||999},releaseCanvas(..._){e.Konva.releaseCanvasOnDestroy&&_.forEach(T=>{T.width=0,T.height=0})},drawRoundedRectPath(_,T,k,E){let G=0,f=0,d=0,g=0;typeof E=="number"?G=f=d=g=Math.min(E,T/2,k/2):(G=Math.min(E[0]||0,T/2,k/2),f=Math.min(E[1]||0,T/2,k/2),g=Math.min(E[2]||0,T/2,k/2),d=Math.min(E[3]||0,T/2,k/2)),_.moveTo(G,0),_.lineTo(T-f,0),_.arc(T-f,f,f,Math.PI*3/2,0,!1),_.lineTo(T,k-g),_.arc(T-g,k-g,g,0,Math.PI/2,!1),_.lineTo(d,k),_.arc(d,k-d,d,Math.PI/2,Math.PI,!1),_.lineTo(0,G),_.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}}(bs)),bs}var ii={},ws={},Wt={},Ss;function mt(){if(Ss)return Wt;Ss=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.RGBComponent=s,Wt.alphaComponent=i,Wt.getNumberValidator=r,Wt.getNumberOrArrayOfNumbersValidator=o,Wt.getNumberOrAutoValidator=a,Wt.getStringValidator=h,Wt.getStringOrGradientValidator=m,Wt.getFunctionValidator=p,Wt.getNumberArrayValidator=y,Wt.getBooleanValidator=w,Wt.getComponentValidator=b;const t=gt(),e=At();function n(u){return e.Util._isString(u)?'"'+u+'"':Object.prototype.toString.call(u)==="[object Number]"||e.Util._isBoolean(u)?u:Object.prototype.toString.call(u)}function s(u){return u>255?255:u<0?0:Math.round(u)}function i(u){return u>1?1:u<1e-4?1e-4:u}function r(){if(t.Konva.isUnminified)return function(u,A){return e.Util._isNumber(u)||e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a number.'),u}}function o(u){if(t.Konva.isUnminified)return function(A,R){let S=e.Util._isNumber(A),v=e.Util._isArray(A)&&A.length==u;return!S&&!v&&e.Util.warn(n(A)+' is a not valid value for "'+R+'" attribute. The value should be a number or Array<number>('+u+")"),A}}function a(){if(t.Konva.isUnminified)return function(u,A){var R=e.Util._isNumber(u),S=u==="auto";return R||S||e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a number or "auto".'),u}}function h(){if(t.Konva.isUnminified)return function(u,A){return e.Util._isString(u)||e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a string.'),u}}function m(){if(t.Konva.isUnminified)return function(u,A){const R=e.Util._isString(u),S=Object.prototype.toString.call(u)==="[object CanvasGradient]"||u&&u.addColorStop;return R||S||e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a string or a native gradient.'),u}}function p(){if(t.Konva.isUnminified)return function(u,A){return e.Util._isFunction(u)||e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a function.'),u}}function y(){if(t.Konva.isUnminified)return function(u,A){const R=Int8Array?Object.getPrototypeOf(Int8Array):null;return R&&u instanceof R||(e.Util._isArray(u)?u.forEach(function(S){e.Util._isNumber(S)||e.Util.warn('"'+A+'" attribute has non numeric element '+S+". Make sure that all elements are numbers.")}):e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a array of numbers.')),u}}function w(){if(t.Konva.isUnminified)return function(u,A){var R=u===!0||u===!1;return R||e.Util.warn(n(u)+' is a not valid value for "'+A+'" attribute. The value should be a boolean.'),u}}function b(u){if(t.Konva.isUnminified)return function(A,R){return A==null||e.Util.isObject(A)||e.Util.warn(n(A)+' is a not valid value for "'+R+'" attribute. The value should be an object with properties '+u),A}}return Wt}var Cs;function pt(){return Cs||(Cs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=At(),n=mt(),s="get",i="set";t.Factory={addGetterSetter(r,o,a,h,m){t.Factory.addGetter(r,o,a),t.Factory.addSetter(r,o,h,m),t.Factory.addOverloadedGetterSetter(r,o)},addGetter(r,o,a){var h=s+e.Util._capitalize(o);r.prototype[h]=r.prototype[h]||function(){const m=this.attrs[o];return m===void 0?a:m}},addSetter(r,o,a,h){var m=i+e.Util._capitalize(o);r.prototype[m]||t.Factory.overWriteSetter(r,o,a,h)},overWriteSetter(r,o,a,h){var m=i+e.Util._capitalize(o);r.prototype[m]=function(p){return a&&p!==void 0&&p!==null&&(p=a.call(this,p,o)),this._setAttr(o,p),h&&h.call(this),this}},addComponentsGetterSetter(r,o,a,h,m){const p=a.length,y=e.Util._capitalize,w=s+y(o),b=i+y(o);r.prototype[w]=function(){const A={};for(let R=0;R<p;R++){const S=a[R];A[S]=this.getAttr(o+y(S))}return A};const u=(0,n.getComponentValidator)(a);r.prototype[b]=function(A){const R=this.attrs[o];h&&(A=h.call(this,A,o)),u&&u.call(this,A,o);for(const S in A)A.hasOwnProperty(S)&&this._setAttr(o+y(S),A[S]);return A||a.forEach(S=>{this._setAttr(o+y(S),void 0)}),this._fireChangeEvent(o,R,A),m&&m.call(this),this},t.Factory.addOverloadedGetterSetter(r,o)},addOverloadedGetterSetter(r,o){var a=e.Util._capitalize(o),h=i+a,m=s+a;r.prototype[o]=function(){return arguments.length?(this[h](arguments[0]),this):this[m]()}},addDeprecatedGetterSetter(r,o,a,h){e.Util.error("Adding deprecated "+o);const m=s+e.Util._capitalize(o),p=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[m]=function(){e.Util.error(p);const y=this.attrs[o];return y===void 0?a:y},t.Factory.addSetter(r,o,h,function(){e.Util.error(p)}),t.Factory.addOverloadedGetterSetter(r,o)},backCompat(r,o){e.Util.each(o,function(a,h){const m=r.prototype[h],p=s+e.Util._capitalize(a),y=i+e.Util._capitalize(a);function w(){m.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}r.prototype[a]=w,r.prototype[p]=w,r.prototype[y]=w})},afterSetFilter(){this._filterUpToDate=!1}}}(ws)),ws}var pe={},me={},Ps;function Na(){if(Ps)return me;Ps=1,Object.defineProperty(me,"__esModule",{value:!0}),me.HitContext=me.SceneContext=me.Context=void 0;const t=At(),e=gt();function n(S){const v=[],_=S.length,T=t.Util;for(let k=0;k<_;k++){let E=S[k];T._isNumber(E)?E=Math.round(E*1e3)/1e3:T._isString(E)||(E=E+""),v.push(E)}return v}const s=",",i="(",r=")",o="([",a="])",h=";",m="()",p="=",y=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],w=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],b=100;let u=class{constructor(S){this.canvas=S,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(S){S.fillEnabled()&&this._fill(S)}_fill(S){}strokeShape(S){S.hasStroke()&&this._stroke(S)}_stroke(S){}fillStrokeShape(S){S.attrs.fillAfterStrokeEnabled?(this.strokeShape(S),this.fillShape(S)):(this.fillShape(S),this.strokeShape(S))}getTrace(S,v){let _=this.traceArr,T=_.length,k="",E,G,f,d;for(E=0;E<T;E++)G=_[E],f=G.method,f?(d=G.args,k+=f,S?k+=m:t.Util._isArray(d[0])?k+=o+d.join(s)+a:(v&&(d=d.map(g=>typeof g=="number"?Math.floor(g):g)),k+=i+d.join(s)+r)):(k+=G.property,S||(k+=p+G.val)),k+=h;return k}clearTrace(){this.traceArr=[]}_trace(S){let v=this.traceArr,_;v.push(S),_=v.length,_>=b&&v.shift()}reset(){const S=this.getCanvas().getPixelRatio();this.setTransform(1*S,0,0,1*S,0,0)}getCanvas(){return this.canvas}clear(S){const v=this.getCanvas();S?this.clearRect(S.x||0,S.y||0,S.width||0,S.height||0):this.clearRect(0,0,v.getWidth()/v.pixelRatio,v.getHeight()/v.pixelRatio)}_applyLineCap(S){const v=S.attrs.lineCap;v&&this.setAttr("lineCap",v)}_applyOpacity(S){const v=S.getAbsoluteOpacity();v!==1&&this.setAttr("globalAlpha",v)}_applyLineJoin(S){const v=S.attrs.lineJoin;v&&this.setAttr("lineJoin",v)}setAttr(S,v){this._context[S]=v}arc(S,v,_,T,k,E){this._context.arc(S,v,_,T,k,E)}arcTo(S,v,_,T,k){this._context.arcTo(S,v,_,T,k)}beginPath(){this._context.beginPath()}bezierCurveTo(S,v,_,T,k,E){this._context.bezierCurveTo(S,v,_,T,k,E)}clearRect(S,v,_,T){this._context.clearRect(S,v,_,T)}clip(...S){this._context.clip.apply(this._context,S)}closePath(){this._context.closePath()}createImageData(S,v){const _=arguments;if(_.length===2)return this._context.createImageData(S,v);if(_.length===1)return this._context.createImageData(S)}createLinearGradient(S,v,_,T){return this._context.createLinearGradient(S,v,_,T)}createPattern(S,v){return this._context.createPattern(S,v)}createRadialGradient(S,v,_,T,k,E){return this._context.createRadialGradient(S,v,_,T,k,E)}drawImage(S,v,_,T,k,E,G,f,d){const g=arguments,C=this._context;g.length===3?C.drawImage(S,v,_):g.length===5?C.drawImage(S,v,_,T,k):g.length===9&&C.drawImage(S,v,_,T,k,E,G,f,d)}ellipse(S,v,_,T,k,E,G,f){this._context.ellipse(S,v,_,T,k,E,G,f)}isPointInPath(S,v,_,T){return _?this._context.isPointInPath(_,S,v,T):this._context.isPointInPath(S,v,T)}fill(...S){this._context.fill.apply(this._context,S)}fillRect(S,v,_,T){this._context.fillRect(S,v,_,T)}strokeRect(S,v,_,T){this._context.strokeRect(S,v,_,T)}fillText(S,v,_,T){T?this._context.fillText(S,v,_,T):this._context.fillText(S,v,_)}measureText(S){return this._context.measureText(S)}getImageData(S,v,_,T){return this._context.getImageData(S,v,_,T)}lineTo(S,v){this._context.lineTo(S,v)}moveTo(S,v){this._context.moveTo(S,v)}rect(S,v,_,T){this._context.rect(S,v,_,T)}roundRect(S,v,_,T,k){this._context.roundRect(S,v,_,T,k)}putImageData(S,v,_){this._context.putImageData(S,v,_)}quadraticCurveTo(S,v,_,T){this._context.quadraticCurveTo(S,v,_,T)}restore(){this._context.restore()}rotate(S){this._context.rotate(S)}save(){this._context.save()}scale(S,v){this._context.scale(S,v)}setLineDash(S){this._context.setLineDash?this._context.setLineDash(S):"mozDash"in this._context?this._context.mozDash=S:"webkitLineDash"in this._context&&(this._context.webkitLineDash=S)}getLineDash(){return this._context.getLineDash()}setTransform(S,v,_,T,k,E){this._context.setTransform(S,v,_,T,k,E)}stroke(S){S?this._context.stroke(S):this._context.stroke()}strokeText(S,v,_,T){this._context.strokeText(S,v,_,T)}transform(S,v,_,T,k,E){this._context.transform(S,v,_,T,k,E)}translate(S,v){this._context.translate(S,v)}_enableTrace(){let S=this,v=y.length,_=this.setAttr,T,k;const E=function(G){let f=S[G],d;S[G]=function(){return k=n(Array.prototype.slice.call(arguments,0)),d=f.apply(S,arguments),S._trace({method:G,args:k}),d}};for(T=0;T<v;T++)E(y[T]);S.setAttr=function(){_.apply(S,arguments);const G=arguments[0];let f=arguments[1];(G==="shadowOffsetX"||G==="shadowOffsetY"||G==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),S._trace({property:G,val:f})}}_applyGlobalCompositeOperation(S){const v=S.attrs.globalCompositeOperation;!v||v==="source-over"||this.setAttr("globalCompositeOperation",v)}};me.Context=u,w.forEach(function(S){Object.defineProperty(u.prototype,S,{get(){return this._context[S]},set(v){this._context[S]=v}})});class A extends u{constructor(v,{willReadFrequently:_=!1}={}){super(v),this._context=v._canvas.getContext("2d",{willReadFrequently:_})}_fillColor(v){const _=v.fill();this.setAttr("fillStyle",_),v._fillFunc(this)}_fillPattern(v){this.setAttr("fillStyle",v._getFillPattern()),v._fillFunc(this)}_fillLinearGradient(v){const _=v._getLinearGradient();_&&(this.setAttr("fillStyle",_),v._fillFunc(this))}_fillRadialGradient(v){const _=v._getRadialGradient();_&&(this.setAttr("fillStyle",_),v._fillFunc(this))}_fill(v){const _=v.fill(),T=v.getFillPriority();if(_&&T==="color"){this._fillColor(v);return}const k=v.getFillPatternImage();if(k&&T==="pattern"){this._fillPattern(v);return}const E=v.getFillLinearGradientColorStops();if(E&&T==="linear-gradient"){this._fillLinearGradient(v);return}const G=v.getFillRadialGradientColorStops();if(G&&T==="radial-gradient"){this._fillRadialGradient(v);return}_?this._fillColor(v):k?this._fillPattern(v):E?this._fillLinearGradient(v):G&&this._fillRadialGradient(v)}_strokeLinearGradient(v){const _=v.getStrokeLinearGradientStartPoint(),T=v.getStrokeLinearGradientEndPoint(),k=v.getStrokeLinearGradientColorStops(),E=this.createLinearGradient(_.x,_.y,T.x,T.y);if(k){for(let G=0;G<k.length;G+=2)E.addColorStop(k[G],k[G+1]);this.setAttr("strokeStyle",E)}}_stroke(v){const _=v.dash(),T=v.getStrokeScaleEnabled();if(v.hasStroke()){if(!T){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(v),_&&v.dashEnabled()&&(this.setLineDash(_),this.setAttr("lineDashOffset",v.dashOffset())),this.setAttr("lineWidth",v.strokeWidth()),v.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),v.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(v):this.setAttr("strokeStyle",v.stroke()),v._strokeFunc(this),T||this.restore()}}_applyShadow(v){var _,T,k;const E=(_=v.getShadowRGBA())!==null&&_!==void 0?_:"black",G=(T=v.getShadowBlur())!==null&&T!==void 0?T:5,f=(k=v.getShadowOffset())!==null&&k!==void 0?k:{x:0,y:0},d=v.getAbsoluteScale(),g=this.canvas.getPixelRatio(),C=d.x*g,F=d.y*g;this.setAttr("shadowColor",E),this.setAttr("shadowBlur",G*Math.min(Math.abs(C),Math.abs(F))),this.setAttr("shadowOffsetX",f.x*C),this.setAttr("shadowOffsetY",f.y*F)}}me.SceneContext=A;class R extends u{constructor(v){super(v),this._context=v._canvas.getContext("2d",{willReadFrequently:!0})}_fill(v){this.save(),this.setAttr("fillStyle",v.colorKey),v._fillFuncHit(this),this.restore()}strokeShape(v){v.hasHitStroke()&&this._stroke(v)}_stroke(v){if(v.hasHitStroke()){const _=v.getStrokeScaleEnabled();if(!_){this.save();const E=this.getCanvas().getPixelRatio();this.setTransform(E,0,0,E,0,0)}this._applyLineCap(v);const T=v.hitStrokeWidth(),k=T==="auto"?v.strokeWidth():T;this.setAttr("lineWidth",k),this.setAttr("strokeStyle",v.colorKey),v._strokeFuncHit(this),_||this.restore()}}}return me.HitContext=R,me}var Ts;function Ln(){if(Ts)return pe;Ts=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.HitCanvas=pe.SceneCanvas=pe.Canvas=void 0;const t=At(),e=Na(),n=gt(),s=pt(),i=mt();let r;function o(){if(r)return r;const p=t.Util.createCanvasElement(),y=p.getContext("2d");return r=function(){const w=n.Konva._global.devicePixelRatio||1,b=y.webkitBackingStorePixelRatio||y.mozBackingStorePixelRatio||y.msBackingStorePixelRatio||y.oBackingStorePixelRatio||y.backingStorePixelRatio||1;return w/b}(),t.Util.releaseCanvas(p),r}let a=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const y=(p||{}).pixelRatio||n.Konva.pixelRatio||o();this.pixelRatio=y,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const y=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/y,this.getHeight()/y)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const y=this.pixelRatio;this.getContext()._context.scale(y,y)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,y){this.setWidth(p||0),this.setHeight(y||0)}toDataURL(p,y){try{return this._canvas.toDataURL(p,y)}catch{try{return this._canvas.toDataURL()}catch(w){return t.Util.error("Unable to get data URL. "+w.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};pe.Canvas=a,s.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,i.getNumberValidator)());class h extends a{constructor(y={width:0,height:0,willReadFrequently:!1}){super(y),this.context=new e.SceneContext(this,{willReadFrequently:y.willReadFrequently}),this.setSize(y.width,y.height)}}pe.SceneCanvas=h;class m extends a{constructor(y={width:0,height:0}){super(y),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(y.width,y.height)}}return pe.HitCanvas=m,pe}var As={},Ms;function Dr(){return Ms||(Ms=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=gt(),n=At();t.DD={get isDragging(){let s=!1;return t.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(s=!0)}),s},justDragged:!1,get node(){let s;return t.DD._dragElements.forEach(i=>{s=i.node}),s},_dragElements:new Map,_drag(s){const i=[];t.DD._dragElements.forEach((r,o)=>{const{node:a}=r,h=a.getStage();h.setPointersPositions(s),r.pointerId===void 0&&(r.pointerId=n.Util._getFirstPointerId(s));const m=h._changedPointerPositions.find(p=>p.id===r.pointerId);if(m){if(r.dragStatus!=="dragging"){const p=a.dragDistance();if(Math.max(Math.abs(m.x-r.startPointerPos.x),Math.abs(m.y-r.startPointerPos.y))<p||(a.startDrag({evt:s}),!a.isDragging()))return}a._setDragPosition(s,r),i.push(a)}}),i.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:s},!0)})},_endDragBefore(s){const i=[];t.DD._dragElements.forEach(r=>{const{node:o}=r,a=o.getStage();if(s&&a.setPointersPositions(s),!a._changedPointerPositions.find(m=>m.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof e.Konva.Stage&&r.node;h&&i.indexOf(h)===-1&&i.push(h)}),i.forEach(r=>{r.draw()})},_endDragAfter(s){t.DD._dragElements.forEach((i,r)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:s},!0),i.dragStatus!=="dragging"&&t.DD._dragElements.delete(r)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(As)),As}var Fs;function Ft(){if(Fs)return ii;Fs=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Node=void 0;const t=At(),e=pt(),n=Ln(),s=gt(),i=Dr(),r=mt(),o="absoluteOpacity",a="allEventListeners",h="absoluteTransform",m="absoluteScale",p="canvas",y="Change",w="children",b="konva",u="listening",A="mouseenter",R="mouseleave",S="set",v="Shape",_=" ",T="stage",k="transform",E="Stage",G="visible",f=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(_);let d=1,g=class dr{constructor(l){this._id=d++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(l),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(l){(l===k||l===h)&&this._cache.get(l)?this._cache.get(l).dirty=!0:l?this._cache.delete(l):this._cache.clear()}_getCache(l,x){let c=this._cache.get(l);return(c===void 0||(l===k||l===h)&&c.dirty===!0)&&(c=x.call(this),this._cache.set(l,c)),c}_calculate(l,x,c){if(!this._attachedDepsListeners.get(l)){const P=x.map(M=>M+"Change.konva").join(_);this.on(P,()=>{this._clearCache(l)}),this._attachedDepsListeners.set(l,!0)}return this._getCache(l,c)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(l){this._clearCache(l),l===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:l,filter:x,hit:c}=this._cache.get(p);t.Util.releaseCanvas(l,x,c),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(l){const x=l||{};let c={};(x.x===void 0||x.y===void 0||x.width===void 0||x.height===void 0)&&(c=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let P=Math.ceil(x.width||c.width),M=Math.ceil(x.height||c.height),O=x.pixelRatio,D=x.x===void 0?Math.floor(c.x):x.x,U=x.y===void 0?Math.floor(c.y):x.y,H=x.offset||0,B=x.drawBorder||!1,z=x.hitCanvasPixelRatio||1;if(!P||!M){t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Y=Math.abs(Math.round(c.x)-D)>.5?1:0,q=Math.abs(Math.round(c.y)-U)>.5?1:0;P+=H*2+Y,M+=H*2+q,D-=H,U-=H;const J=new n.SceneCanvas({pixelRatio:O,width:P,height:M}),I=new n.SceneCanvas({pixelRatio:O,width:0,height:0,willReadFrequently:!0}),K=new n.HitCanvas({pixelRatio:z,width:P,height:M}),Q=J.getContext(),Z=K.getContext();return K.isCache=!0,J.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,x.imageSmoothingEnabled===!1&&(J.getContext()._context.imageSmoothingEnabled=!1,I.getContext()._context.imageSmoothingEnabled=!1),Q.save(),Z.save(),Q.translate(-D,-U),Z.translate(-D,-U),this._isUnderCache=!0,this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(m),this.drawScene(J,this),this.drawHit(K,this),this._isUnderCache=!1,Q.restore(),Z.restore(),B&&(Q.save(),Q.beginPath(),Q.rect(0,0,P,M),Q.closePath(),Q.setAttr("strokeStyle","red"),Q.setAttr("lineWidth",5),Q.stroke(),Q.restore()),this._cache.set(p,{scene:J,filter:I,hit:K,x:D,y:U}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(l){throw new Error('abstract "getClientRect" method call')}_transformedRect(l,x){const c=[{x:l.x,y:l.y},{x:l.x+l.width,y:l.y},{x:l.x+l.width,y:l.y+l.height},{x:l.x,y:l.y+l.height}];let P=1/0,M=1/0,O=-1/0,D=-1/0;const U=this.getAbsoluteTransform(x);return c.forEach(function(H){const B=U.point(H);P===void 0&&(P=O=B.x,M=D=B.y),P=Math.min(P,B.x),M=Math.min(M,B.y),O=Math.max(O,B.x),D=Math.max(D,B.y)}),{x:P,y:M,width:O-P,height:D-M}}_drawCachedSceneCanvas(l){l.save(),l._applyOpacity(this),l._applyGlobalCompositeOperation(this);const x=this._getCanvasCache();l.translate(x.x,x.y);const c=this._getCachedSceneCanvas(),P=c.pixelRatio;l.drawImage(c._canvas,0,0,c.width/P,c.height/P),l.restore()}_drawCachedHitCanvas(l){const x=this._getCanvasCache(),c=x.hit;l.save(),l.translate(x.x,x.y),l.drawImage(c._canvas,0,0,c.width/c.pixelRatio,c.height/c.pixelRatio),l.restore()}_getCachedSceneCanvas(){let l=this.filters(),x=this._getCanvasCache(),c=x.scene,P=x.filter,M=P.getContext(),O,D,U,H;if(l){if(!this._filterUpToDate){const B=c.pixelRatio;P.setSize(c.width/c.pixelRatio,c.height/c.pixelRatio);try{for(O=l.length,M.clear(),M.drawImage(c._canvas,0,0,c.getWidth()/B,c.getHeight()/B),D=M.getImageData(0,0,P.getWidth(),P.getHeight()),U=0;U<O;U++){if(H=l[U],typeof H!="function"){t.Util.error("Filter should be type of function, but got "+typeof H+" instead. Please check correct filters");continue}H.call(this,D),M.putImageData(D,0,0)}}catch(z){t.Util.error("Unable to apply filter. "+z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return P}return c}on(l,x){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let c=l.split(_),P=c.length,M,O,D,U,H;for(M=0;M<P;M++)O=c[M],D=O.split("."),U=D[0],H=D[1]||"",this.eventListeners[U]||(this.eventListeners[U]=[]),this.eventListeners[U].push({name:H,handler:x});return this}off(l,x){let c=(l||"").split(_),P=c.length,M,O,D,U,H,B;if(this._cache&&this._cache.delete(a),!l)for(O in this.eventListeners)this._off(O);for(M=0;M<P;M++)if(D=c[M],U=D.split("."),H=U[0],B=U[1],H)this.eventListeners[H]&&this._off(H,B,x);else for(O in this.eventListeners)this._off(O,B,x);return this}dispatchEvent(l){const x={target:this,type:l.type,evt:l};return this.fire(l.type,x),this}addEventListener(l,x){return this.on(l,function(c){x.call(this,c.evt)}),this}removeEventListener(l){return this.off(l),this}_delegate(l,x,c){const P=this;this.on(l,function(M){const O=M.target.findAncestors(x,!0,P);for(let D=0;D<O.length;D++)M=t.Util.cloneObject(M),M.currentTarget=O[D],c.call(O[D],M)})}remove(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(o),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(T),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(u)}_remove(){this._clearCaches();const l=this.getParent();l&&l.children&&(l.children.splice(this.index,1),l._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(l){const x="get"+t.Util._capitalize(l);return t.Util._isFunction(this[x])?this[x]():this.attrs[l]}getAncestors(){let l=this.getParent(),x=[];for(;l;)x.push(l),l=l.getParent();return x}getAttrs(){return this.attrs||{}}setAttrs(l){return this._batchTransformChanges(()=>{let x,c;if(!l)return this;for(x in l)x!==w&&(c=S+t.Util._capitalize(x),t.Util._isFunction(this[c])?this[c](l[x]):this._setAttr(x,l[x]))}),this}isListening(){return this._getCache(u,this._isListening)}_isListening(l){if(!this.listening())return!1;const x=this.getParent();return x&&x!==l&&this!==l?x._isListening(l):!0}isVisible(){return this._getCache(G,this._isVisible)}_isVisible(l){if(!this.visible())return!1;const x=this.getParent();return x&&x!==l&&this!==l?x._isVisible(l):!0}shouldDrawHit(l,x=!1){if(l)return this._isVisible(l)&&this._isListening(l);const c=this.getLayer();let P=!1;i.DD._dragElements.forEach(O=>{O.dragStatus==="dragging"&&(O.node.nodeType==="Stage"||O.node.getLayer()===c)&&(P=!0)});const M=!x&&!s.Konva.hitOnDragEnabled&&(P||s.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!M}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let l=this.getDepth(),x=this,c=0,P,M,O,D;function U(B){for(P=[],M=B.length,O=0;O<M;O++)D=B[O],c++,D.nodeType!==v&&(P=P.concat(D.getChildren().slice())),D._id===x._id&&(O=M);P.length>0&&P[0].getDepth()<=l&&U(P)}const H=this.getStage();return x.nodeType!==E&&H&&U(H.getChildren()),c}getDepth(){let l=0,x=this.parent;for(;x;)l++,x=x.parent;return l}_batchTransformChanges(l){this._batchingTransformChange=!0,l(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(k),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(l){return this._batchTransformChanges(()=>{this.x(l.x),this.y(l.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const l=this.getStage();if(!l)return null;const x=l.getPointerPosition();if(!x)return null;const c=this.getAbsoluteTransform().copy();return c.invert(),c.point(x)}getAbsolutePosition(l){let x=!1,c=this.parent;for(;c;){if(c.isCached()){x=!0;break}c=c.parent}x&&!l&&(l=!0);const P=this.getAbsoluteTransform(l).getMatrix(),M=new t.Transform,O=this.offset();return M.m=P.slice(),M.translate(O.x,O.y),M.getTranslation()}setAbsolutePosition(l){const{x,y:c,...P}=this._clearTransform();this.attrs.x=x,this.attrs.y=c,this._clearCache(k);const M=this._getAbsoluteTransform().copy();return M.invert(),M.translate(l.x,l.y),l={x:this.attrs.x+M.getTranslation().x,y:this.attrs.y+M.getTranslation().y},this._setTransform(P),this.setPosition({x:l.x,y:l.y}),this._clearCache(k),this._clearSelfAndDescendantCache(h),this}_setTransform(l){let x;for(x in l)this.attrs[x]=l[x]}_clearTransform(){const l={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,l}move(l){let x=l.x,c=l.y,P=this.x(),M=this.y();return x!==void 0&&(P+=x),c!==void 0&&(M+=c),this.setPosition({x:P,y:M}),this}_eachAncestorReverse(l,x){let c=[],P=this.getParent(),M,O;if(!(x&&x._id===this._id)){for(c.unshift(this);P&&(!x||P._id!==x._id);)c.unshift(P),P=P.parent;for(M=c.length,O=0;O<M;O++)l(c[O])}}rotate(l){return this.rotation(this.rotation()+l),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const l=this.index,x=this.parent.getChildren().length;return l<x-1?(this.parent.children.splice(l,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;const l=this.index,x=this.parent.getChildren().length;return l<x-1?(this.parent.children.splice(l,1),this.parent.children.splice(l+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.splice(l-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(l){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(l<0||l>=this.parent.children.length)&&t.Util.warn("Unexpected value "+l+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const x=this.index;return this.parent.children.splice(x,1),this.parent.children.splice(l,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(o,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let l=this.opacity();const x=this.getParent();return x&&!x._isUnderCache&&(l*=x.getAbsoluteOpacity()),l}moveTo(l){return this.getParent()!==l&&(this._remove(),l.add(this)),this}toObject(){let l=this.getAttrs(),x,c,P,M,O;const D={attrs:{},className:this.getClassName()};for(x in l)c=l[x],O=t.Util.isObject(c)&&!t.Util._isPlainObject(c)&&!t.Util._isArray(c),!O&&(P=typeof this[x]=="function"&&this[x],delete l[x],M=P?P.call(this):null,l[x]=c,M!==c&&(D.attrs[x]=c));return t.Util._prepareToStringify(D)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(l,x,c){const P=[];x&&this._isMatch(l)&&P.push(this);let M=this.parent;for(;M;){if(M===c)return P;M._isMatch(l)&&P.push(M),M=M.parent}return P}isAncestorOf(l){return!1}findAncestor(l,x,c){return this.findAncestors(l,x,c)[0]}_isMatch(l){if(!l)return!1;if(typeof l=="function")return l(this);let x=l.replace(/ /g,"").split(","),c=x.length,P,M;for(P=0;P<c;P++)if(M=x[P],t.Util.isValidSelector(M)||(t.Util.warn('Selector "'+M+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),M.charAt(0)==="#"){if(this.id()===M.slice(1))return!0}else if(M.charAt(0)==="."){if(this.hasName(M.slice(1)))return!0}else if(this.className===M||this.nodeType===M)return!0;return!1}getLayer(){const l=this.getParent();return l?l.getLayer():null}getStage(){return this._getCache(T,this._getStage)}_getStage(){const l=this.getParent();return l?l.getStage():null}fire(l,x={},c){return x.target=x.target||this,c?this._fireAndBubble(l,x):this._fire(l,x),this}getAbsoluteTransform(l){return l?this._getAbsoluteTransform(l):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(l){let x;if(l)return x=new t.Transform,this._eachAncestorReverse(function(c){const P=c.transformsEnabled();P==="all"?x.multiply(c.getTransform()):P==="position"&&x.translate(c.x()-c.offsetX(),c.y()-c.offsetY())},l),x;{x=this._cache.get(h)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(x):x.reset();const c=this.transformsEnabled();if(c==="all")x.multiply(this.getTransform());else if(c==="position"){const P=this.attrs.x||0,M=this.attrs.y||0,O=this.attrs.offsetX||0,D=this.attrs.offsetY||0;x.translate(P-O,M-D)}return x.dirty=!1,x}}getAbsoluteScale(l){let x=this;for(;x;)x._isUnderCache&&(l=x),x=x.getParent();const c=this.getAbsoluteTransform(l).decompose();return{x:c.scaleX,y:c.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(k,this._getTransform)}_getTransform(){var l,x;const c=this._cache.get(k)||new t.Transform;c.reset();const P=this.x(),M=this.y(),O=s.Konva.getAngle(this.rotation()),D=(l=this.attrs.scaleX)!==null&&l!==void 0?l:1,U=(x=this.attrs.scaleY)!==null&&x!==void 0?x:1,H=this.attrs.skewX||0,B=this.attrs.skewY||0,z=this.attrs.offsetX||0,Y=this.attrs.offsetY||0;return(P!==0||M!==0)&&c.translate(P,M),O!==0&&c.rotate(O),(H!==0||B!==0)&&c.skew(H,B),(D!==1||U!==1)&&c.scale(D,U),(z!==0||Y!==0)&&c.translate(-1*z,-1*Y),c.dirty=!1,c}clone(l){let x=t.Util.cloneObject(this.attrs),c,P,M,O,D;for(c in l)x[c]=l[c];const U=new this.constructor(x);for(c in this.eventListeners)for(P=this.eventListeners[c],M=P.length,O=0;O<M;O++)D=P[O],D.name.indexOf(b)<0&&(U.eventListeners[c]||(U.eventListeners[c]=[]),U.eventListeners[c].push(D));return U}_toKonvaCanvas(l){l=l||{};const x=this.getClientRect(),c=this.getStage(),P=l.x!==void 0?l.x:Math.floor(x.x),M=l.y!==void 0?l.y:Math.floor(x.y),O=l.pixelRatio||1,D=new n.SceneCanvas({width:l.width||Math.ceil(x.width)||(c?c.width():0),height:l.height||Math.ceil(x.height)||(c?c.height():0),pixelRatio:O}),U=D.getContext(),H=new n.SceneCanvas({width:D.width/D.pixelRatio+Math.abs(P),height:D.height/D.pixelRatio+Math.abs(M),pixelRatio:D.pixelRatio});return l.imageSmoothingEnabled===!1&&(U._context.imageSmoothingEnabled=!1),U.save(),(P||M)&&U.translate(-1*P,-1*M),this.drawScene(D,void 0,H),U.restore(),D}toCanvas(l){return this._toKonvaCanvas(l)._canvas}toDataURL(l){l=l||{};const x=l.mimeType||null,c=l.quality||null,P=this._toKonvaCanvas(l).toDataURL(x,c);return l.callback&&l.callback(P),P}toImage(l){return new Promise((x,c)=>{try{const P=l==null?void 0:l.callback;P&&delete l.callback,t.Util._urlToImage(this.toDataURL(l),function(M){x(M),P==null||P(M)})}catch(P){c(P)}})}toBlob(l){return new Promise((x,c)=>{try{const P=l==null?void 0:l.callback;P&&delete l.callback,this.toCanvas(l).toBlob(M=>{x(M),P==null||P(M)},l==null?void 0:l.mimeType,l==null?void 0:l.quality)}catch(P){c(P)}})}setSize(l){return this.width(l.width),this.height(l.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.Konva.dragDistance}_off(l,x,c){let P=this.eventListeners[l],M,O,D;for(M=0;M<P.length;M++)if(O=P[M].name,D=P[M].handler,(O!=="konva"||x==="konva")&&(!x||O===x)&&(!c||c===D)){if(P.splice(M,1),P.length===0){delete this.eventListeners[l];break}M--}}_fireChangeEvent(l,x,c){this._fire(l+y,{oldVal:x,newVal:c})}addName(l){if(!this.hasName(l)){const x=this.name(),c=x?x+" "+l:l;this.name(c)}return this}hasName(l){if(!l)return!1;const x=this.name();return x?(x||"").split(/\s/g).indexOf(l)!==-1:!1}removeName(l){const x=(this.name()||"").split(/\s/g),c=x.indexOf(l);return c!==-1&&(x.splice(c,1),this.name(x.join(" "))),this}setAttr(l,x){const c=this[S+t.Util._capitalize(l)];return t.Util._isFunction(c)?c.call(this,x):this._setAttr(l,x),this}_requestDraw(){if(s.Konva.autoDrawEnabled){const l=this.getLayer()||this.getStage();l==null||l.batchDraw()}}_setAttr(l,x){const c=this.attrs[l];c===x&&!t.Util.isObject(x)||(x==null?delete this.attrs[l]:this.attrs[l]=x,this._shouldFireChangeEvents&&this._fireChangeEvent(l,c,x),this._requestDraw())}_setComponentAttr(l,x,c){let P;c!==void 0&&(P=this.attrs[l],P||(this.attrs[l]=this.getAttr(l)),this.attrs[l][x]=c,this._fireChangeEvent(l,P,c))}_fireAndBubble(l,x,c){if(x&&this.nodeType===v&&(x.target=this),!((l===A||l===R)&&(c&&(this===c||this.isAncestorOf&&this.isAncestorOf(c))||this.nodeType==="Stage"&&!c))){this._fire(l,x);const P=(l===A||l===R)&&c&&c.isAncestorOf&&c.isAncestorOf(this)&&!c.isAncestorOf(this.parent);(x&&!x.cancelBubble||!x)&&this.parent&&this.parent.isListening()&&!P&&(c&&c.parent?this._fireAndBubble.call(this.parent,l,x,c):this._fireAndBubble.call(this.parent,l,x))}}_getProtoListeners(l){var x,c,P;const M=(x=this._cache.get(a))!==null&&x!==void 0?x:{};let O=M==null?void 0:M[l];if(O===void 0){O=[];let D=Object.getPrototypeOf(this);for(;D;){const U=(P=(c=D.eventListeners)===null||c===void 0?void 0:c[l])!==null&&P!==void 0?P:[];O.push(...U),D=Object.getPrototypeOf(D)}M[l]=O,this._cache.set(a,M)}return O}_fire(l,x){x=x||{},x.currentTarget=this,x.type=l;const c=this._getProtoListeners(l);if(c)for(var P=0;P<c.length;P++)c[P].handler.call(this,x);const M=this.eventListeners[l];if(M)for(var P=0;P<M.length;P++)M[P].handler.call(this,x)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(l){const x=l?l.pointerId:void 0,c=this.getStage(),P=this.getAbsolutePosition();if(!c)return;const M=c._getPointerById(x)||c._changedPointerPositions[0]||P;i.DD._dragElements.set(this._id,{node:this,startPointerPos:M,offset:{x:M.x-P.x,y:M.y-P.y},dragStatus:"ready",pointerId:x})}startDrag(l,x=!0){i.DD._dragElements.has(this._id)||this._createDragElement(l);const c=i.DD._dragElements.get(this._id);c.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:l&&l.evt},x)}_setDragPosition(l,x){const c=this.getStage()._getPointerById(x.pointerId);if(!c)return;let P={x:c.x-x.offset.x,y:c.y-x.offset.y};const M=this.dragBoundFunc();if(M!==void 0){const O=M.call(this,P,l);O?P=O:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==P.x||this._lastPos.y!==P.y)&&(this.setAbsolutePosition(P),this._requestDraw()),this._lastPos=P}stopDrag(l){const x=i.DD._dragElements.get(this._id);x&&(x.dragStatus="stopped"),i.DD._endDragBefore(l),i.DD._endDragAfter(l)}setDraggable(l){this._setAttr("draggable",l),this._dragChange()}isDragging(){const l=i.DD._dragElements.get(this._id);return l?l.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(l){if(!(l.evt.button===void 0||s.Konva.dragButtons.indexOf(l.evt.button)>=0)||this.isDragging())return;let x=!1;i.DD._dragElements.forEach(c=>{this.isAncestorOf(c.node)&&(x=!0)}),x||this._createDragElement(l)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const l=i.DD._dragElements.get(this._id),x=l&&l.dragStatus==="dragging",c=l&&l.dragStatus==="ready";x?this.stopDrag():c&&i.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(l={x:0,y:0}){const x=this.getStage();if(!x)return!1;const c={x:-l.x,y:-l.y,width:x.width()+2*l.x,height:x.height()+2*l.y};return t.Util.haveIntersection(c,this.getClientRect())}static create(l,x){return t.Util._isString(l)&&(l=JSON.parse(l)),this._createNode(l,x)}static _createNode(l,x){let c=dr.prototype.getClassName.call(l),P=l.children,M,O,D;x&&(l.attrs.container=x),s.Konva[c]||(t.Util.warn('Can not find a node with class name "'+c+'". Fallback to "Shape".'),c="Shape");const U=s.Konva[c];if(M=new U(l.attrs),P)for(O=P.length,D=0;D<O;D++)M.add(dr._createNode(P[D]));return M}};ii.Node=g,g.prototype.nodeType="Node",g.prototype._attrsAffectingSize=[],g.prototype.eventListeners={},g.prototype.on.call(g.prototype,f,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(k),this._clearSelfAndDescendantCache(h)}),g.prototype.on.call(g.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(G)}),g.prototype.on.call(g.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(u)}),g.prototype.on.call(g.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(o)});const C=e.Factory.addGetterSetter;return C(g,"zIndex"),C(g,"absolutePosition"),C(g,"position"),C(g,"x",0,(0,r.getNumberValidator)()),C(g,"y",0,(0,r.getNumberValidator)()),C(g,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),C(g,"opacity",1,(0,r.getNumberValidator)()),C(g,"name","",(0,r.getStringValidator)()),C(g,"id","",(0,r.getStringValidator)()),C(g,"rotation",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(g,"scale",["x","y"]),C(g,"scaleX",1,(0,r.getNumberValidator)()),C(g,"scaleY",1,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(g,"skew",["x","y"]),C(g,"skewX",0,(0,r.getNumberValidator)()),C(g,"skewY",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(g,"offset",["x","y"]),C(g,"offsetX",0,(0,r.getNumberValidator)()),C(g,"offsetY",0,(0,r.getNumberValidator)()),C(g,"dragDistance",void 0,(0,r.getNumberValidator)()),C(g,"width",0,(0,r.getNumberValidator)()),C(g,"height",0,(0,r.getNumberValidator)()),C(g,"listening",!0,(0,r.getBooleanValidator)()),C(g,"preventDefault",!0,(0,r.getBooleanValidator)()),C(g,"filters",void 0,function(F){return this._filterUpToDate=!1,F}),C(g,"visible",!0,(0,r.getBooleanValidator)()),C(g,"transformsEnabled","all",(0,r.getStringValidator)()),C(g,"size"),C(g,"dragBoundFunc"),C(g,"draggable",!1,(0,r.getBooleanValidator)()),e.Factory.backCompat(g,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ii}var ni={},ks;function Un(){if(ks)return ni;ks=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Container=void 0;const t=pt(),e=Ft(),n=mt();let s=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(i){if(!i)return this.children||[];const r=this.children||[],o=[];return r.forEach(function(a){i(a)&&o.push(a)}),o}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(i=>{i.parent=null,i.index=0,i.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(i=>{i.parent=null,i.index=0,i.destroy()}),this.children=[],this._requestDraw(),this}add(...i){if(i.length===0)return this;if(i.length>1){for(let o=0;o<i.length;o++)this.add(i[o]);return this}const r=i[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(i){return this._generalFind(i,!1)}findOne(i){const r=this._generalFind(i,!0);return r.length>0?r[0]:void 0}_generalFind(i,r){const o=[];return this._descendants(a=>{const h=a._isMatch(i);return h&&o.push(a),!!(h&&r)}),o}_descendants(i){let r=!1;const o=this.getChildren();for(const a of o)if(r=i(a),r||a.hasChildren()&&(r=a._descendants(i),r))return!0;return!1}toObject(){const i=e.Node.prototype.toObject.call(this);return i.children=[],this.getChildren().forEach(r=>{i.children.push(r.toObject())}),i}isAncestorOf(i){let r=i.getParent();for(;r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(i){const r=e.Node.prototype.clone.call(this,i);return this.getChildren().forEach(function(o){r.add(o.clone())}),r}getAllIntersections(i){const r=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(i)&&r.push(o)}),r}_clearSelfAndDescendantCache(i){var r;super._clearSelfAndDescendantCache(i),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(o){o._clearSelfAndDescendantCache(i)}))}_setChildrenIndices(){var i;(i=this.children)===null||i===void 0||i.forEach(function(r,o){r.index=o}),this._requestDraw()}drawScene(i,r,o){const a=this.getLayer(),h=i||a&&a.getCanvas(),m=h&&h.getContext(),p=this._getCanvasCache(),y=p&&p.scene,w=h&&h.isCache;if(!this.isVisible()&&!w)return this;if(y){m.save();const b=this.getAbsoluteTransform(r).getMatrix();m.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedSceneCanvas(m),m.restore()}else this._drawChildren("drawScene",h,r,o);return this}drawHit(i,r){if(!this.shouldDrawHit(r))return this;const o=this.getLayer(),a=i||o&&o.hitCanvas,h=a&&a.getContext(),m=this._getCanvasCache();if(m&&m.hit){h.save();const p=this.getAbsoluteTransform(r).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",a,r);return this}_drawChildren(i,r,o,a){var h;const m=r&&r.getContext(),p=this.clipWidth(),y=this.clipHeight(),w=this.clipFunc(),b=typeof p=="number"&&typeof y=="number"||w,u=o===this;if(b){m.save();const R=this.getAbsoluteTransform(o);let S=R.getMatrix();m.transform(S[0],S[1],S[2],S[3],S[4],S[5]),m.beginPath();let v;if(w)v=w.call(this,m,this);else{const _=this.clipX(),T=this.clipY();m.rect(_||0,T||0,p,y)}m.clip.apply(m,v),S=R.copy().invert().getMatrix(),m.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const A=!u&&this.globalCompositeOperation()!=="source-over"&&i==="drawScene";A&&(m.save(),m._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(R){R[i](r,o,a)}),A&&m.restore(),b&&m.restore()}getClientRect(i={}){var r;const o=i.skipTransform,a=i.relativeTo;let h,m,p,y,w={x:1/0,y:1/0,width:0,height:0};const b=this;(r=this.children)===null||r===void 0||r.forEach(function(R){if(!R.visible())return;const S=R.getClientRect({relativeTo:b,skipShadow:i.skipShadow,skipStroke:i.skipStroke});S.width===0&&S.height===0||(h===void 0?(h=S.x,m=S.y,p=S.x+S.width,y=S.y+S.height):(h=Math.min(h,S.x),m=Math.min(m,S.y),p=Math.max(p,S.x+S.width),y=Math.max(y,S.y+S.height)))});const u=this.find("Shape");let A=!1;for(let R=0;R<u.length;R++)if(u[R]._isVisible(this)){A=!0;break}return A&&h!==void 0?w={x:h,y:m,width:p-h,height:y-m}:w={x:0,y:0,width:0,height:0},o?w:this._transformedRect(w,a)}};return ni.Container=s,t.Factory.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(s,"clipX",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipY",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipWidth",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipHeight",void 0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(s,"clipFunc"),ni}var Rs={},Se={},Os;function Da(){if(Os)return Se;Os=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.getCapturedShape=s,Se.createEvent=i,Se.hasPointerCapture=r,Se.setPointerCapture=o,Se.releaseCapture=a;const t=gt(),e=new Map,n=t.Konva._global.PointerEvent!==void 0;function s(h){return e.get(h)}function i(h){return{evt:h,pointerId:h.pointerId}}function r(h,m){return e.get(h)===m}function o(h,m){a(h),m.getStage()&&(e.set(h,m),n&&m._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))}function a(h,m){const p=e.get(h);if(!p)return;const y=p.getStage();y&&y.content,e.delete(h),n&&p._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}return Se}var Es;function _c(){return Es||(Es=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=At(),n=pt(),s=Un(),i=gt(),r=Ln(),o=Dr(),a=gt(),h=Da(),m="Stage",p="string",y="px",w="mouseout",b="mouseleave",u="mouseover",A="mouseenter",R="mousemove",S="mousedown",v="mouseup",_="pointermove",T="pointerdown",k="pointerup",E="pointercancel",G="lostpointercapture",f="pointerout",d="pointerleave",g="pointerover",C="pointerenter",F="contextmenu",l="touchstart",x="touchend",c="touchmove",P="touchcancel",M="wheel",O=5,D=[[A,"_pointerenter"],[S,"_pointerdown"],[R,"_pointermove"],[v,"_pointerup"],[b,"_pointerleave"],[l,"_pointerdown"],[c,"_pointermove"],[x,"_pointerup"],[P,"_pointercancel"],[u,"_pointerover"],[M,"_wheel"],[F,"_contextmenu"],[T,"_pointerdown"],[_,"_pointermove"],[k,"_pointerup"],[E,"_pointercancel"],[G,"_lostpointercapture"]],U={mouse:{[f]:w,[d]:b,[g]:u,[C]:A,[_]:R,[T]:S,[k]:v,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[f]:"touchout",[d]:"touchleave",[g]:"touchover",[C]:"touchenter",[_]:c,[T]:l,[k]:x,[E]:P,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[f]:f,[d]:d,[g]:g,[C]:C,[_]:_,[T]:T,[k]:k,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},H=J=>J.indexOf("pointer")>=0?"pointer":J.indexOf("touch")>=0?"touch":"mouse",B=J=>{const I=H(J);if(I==="pointer")return i.Konva.pointerEventsEnabled&&U.pointer;if(I==="touch")return U.touch;if(I==="mouse")return U.mouse};function z(J={}){return(J.clipFunc||J.clipWidth||J.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),J}const Y="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class q extends s.Container{constructor(I){super(z(I)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(I){const K=I.getType()==="Layer",Q=I.getType()==="FastLayer";K||Q||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const I=this.visible()?"":"none";this.content.style.display=I}setContainer(I){if(typeof I===p){if(I.charAt(0)==="."){const Q=I.slice(1);I=document.getElementsByClassName(Q)[0]}else{var K;I.charAt(0)!=="#"?K=I:K=I.slice(1),I=document.getElementById(K)}if(!I)throw"Can not find container in document with id "+K}return this._setAttr("container",I),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),I.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const I=this.children,K=I.length;for(let Q=0;Q<K;Q++)I[Q].clear();return this}clone(I){return I||(I={}),I.container=typeof document<"u"&&document.createElement("div"),s.Container.prototype.clone.call(this,I)}destroy(){super.destroy();const I=this.content;I&&e.Util._isInDocument(I)&&this.container().removeChild(I);const K=t.stages.indexOf(this);return K>-1&&t.stages.splice(K,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const I=this._pointerPositions[0]||this._changedPointerPositions[0];return I?{x:I.x,y:I.y}:(e.Util.warn(Y),null)}_getPointerById(I){return this._pointerPositions.find(K=>K.id===I)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(I){I=I||{},I.x=I.x||0,I.y=I.y||0,I.width=I.width||this.width(),I.height=I.height||this.height();const K=new r.SceneCanvas({width:I.width,height:I.height,pixelRatio:I.pixelRatio||1}),Q=K.getContext()._context,Z=this.children;return(I.x||I.y)&&Q.translate(-1*I.x,-1*I.y),Z.forEach(function(it){if(!it.isVisible())return;const N=it._toKonvaCanvas(I);Q.drawImage(N._canvas,I.x,I.y,N.getWidth()/N.getPixelRatio(),N.getHeight()/N.getPixelRatio())}),K}getIntersection(I){if(!I)return null;const K=this.children,Q=K.length,Z=Q-1;for(let it=Z;it>=0;it--){const N=K[it].getIntersection(I);if(N)return N}return null}_resizeDOM(){const I=this.width(),K=this.height();this.content&&(this.content.style.width=I+y,this.content.style.height=K+y),this.bufferCanvas.setSize(I,K),this.bufferHitCanvas.setSize(I,K),this.children.forEach(Q=>{Q.setSize({width:I,height:K}),Q.draw()})}add(I,...K){if(arguments.length>1){for(let Z=0;Z<arguments.length;Z++)this.add(arguments[Z]);return this}super.add(I);const Q=this.children.length;return Q>O&&e.Util.warn("The stage has "+Q+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),I.setSize({width:this.width(),height:this.height()}),I.draw(),i.Konva.isBrowser&&this.content.appendChild(I.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(I){return h.hasPointerCapture(I,this)}setPointerCapture(I){h.setPointerCapture(I,this)}releaseCapture(I){h.releaseCapture(I,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&D.forEach(([I,K])=>{this.content.addEventListener(I,Q=>{this[K](Q)},{passive:!1})})}_pointerenter(I){this.setPointersPositions(I);const K=B(I.type);K&&this._fire(K.pointerenter,{evt:I,target:this,currentTarget:this})}_pointerover(I){this.setPointersPositions(I);const K=B(I.type);K&&this._fire(K.pointerover,{evt:I,target:this,currentTarget:this})}_getTargetShape(I){let K=this[I+"targetShape"];return K&&!K.getStage()&&(K=null),K}_pointerleave(I){const K=B(I.type),Q=H(I.type);if(!K)return;this.setPointersPositions(I);const Z=this._getTargetShape(Q),it=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;Z&&it?(Z._fireAndBubble(K.pointerout,{evt:I}),Z._fireAndBubble(K.pointerleave,{evt:I}),this._fire(K.pointerleave,{evt:I,target:this,currentTarget:this}),this[Q+"targetShape"]=null):it&&(this._fire(K.pointerleave,{evt:I,target:this,currentTarget:this}),this._fire(K.pointerout,{evt:I,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(I){const K=B(I.type),Q=H(I.type);if(!K)return;this.setPointersPositions(I);let Z=!1;this._changedPointerPositions.forEach(it=>{const N=this.getIntersection(it);if(o.DD.justDragged=!1,i.Konva["_"+Q+"ListenClick"]=!0,!N||!N.isListening()){this[Q+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&N.setPointerCapture(it.id),this[Q+"ClickStartShape"]=N,N._fireAndBubble(K.pointerdown,{evt:I,pointerId:it.id}),Z=!0;const L=I.type.indexOf("touch")>=0;N.preventDefault()&&I.cancelable&&L&&I.preventDefault()}),Z||this._fire(K.pointerdown,{evt:I,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(I){const K=B(I.type),Q=H(I.type);if(!K||(i.Konva.isDragging()&&o.DD.node.preventDefault()&&I.cancelable&&I.preventDefault(),this.setPointersPositions(I),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const Z={};let it=!1;const N=this._getTargetShape(Q);this._changedPointerPositions.forEach(L=>{const j=h.getCapturedShape(L.id)||this.getIntersection(L),V=L.id,W={evt:I,pointerId:V},$=N!==j;if($&&N&&(N._fireAndBubble(K.pointerout,{...W},j),N._fireAndBubble(K.pointerleave,{...W},j)),j){if(Z[j._id])return;Z[j._id]=!0}j&&j.isListening()?(it=!0,$&&(j._fireAndBubble(K.pointerover,{...W},N),j._fireAndBubble(K.pointerenter,{...W},N),this[Q+"targetShape"]=j),j._fireAndBubble(K.pointermove,{...W})):N&&(this._fire(K.pointerover,{evt:I,target:this,currentTarget:this,pointerId:V}),this[Q+"targetShape"]=null)}),it||this._fire(K.pointermove,{evt:I,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(I){const K=B(I.type),Q=H(I.type);if(!K)return;this.setPointersPositions(I);const Z=this[Q+"ClickStartShape"],it=this[Q+"ClickEndShape"],N={};let L=!1;this._changedPointerPositions.forEach(j=>{const V=h.getCapturedShape(j.id)||this.getIntersection(j);if(V){if(V.releaseCapture(j.id),N[V._id])return;N[V._id]=!0}const W=j.id,$={evt:I,pointerId:W};let nt=!1;i.Konva["_"+Q+"InDblClickWindow"]?(nt=!0,clearTimeout(this[Q+"DblTimeout"])):o.DD.justDragged||(i.Konva["_"+Q+"InDblClickWindow"]=!0,clearTimeout(this[Q+"DblTimeout"])),this[Q+"DblTimeout"]=setTimeout(function(){i.Konva["_"+Q+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),V&&V.isListening()?(L=!0,this[Q+"ClickEndShape"]=V,V._fireAndBubble(K.pointerup,{...$}),i.Konva["_"+Q+"ListenClick"]&&Z&&Z===V&&(V._fireAndBubble(K.pointerclick,{...$}),nt&&it&&it===V&&V._fireAndBubble(K.pointerdblclick,{...$}))):(this[Q+"ClickEndShape"]=null,i.Konva["_"+Q+"ListenClick"]&&this._fire(K.pointerclick,{evt:I,target:this,currentTarget:this,pointerId:W}),nt&&this._fire(K.pointerdblclick,{evt:I,target:this,currentTarget:this,pointerId:W}))}),L||this._fire(K.pointerup,{evt:I,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+Q+"ListenClick"]=!1,I.cancelable&&Q!=="touch"&&Q!=="pointer"&&I.preventDefault()}_contextmenu(I){this.setPointersPositions(I);const K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(F,{evt:I}):this._fire(F,{evt:I,target:this,currentTarget:this})}_wheel(I){this.setPointersPositions(I);const K=this.getIntersection(this.getPointerPosition());K&&K.isListening()?K._fireAndBubble(M,{evt:I}):this._fire(M,{evt:I,target:this,currentTarget:this})}_pointercancel(I){this.setPointersPositions(I);const K=h.getCapturedShape(I.pointerId)||this.getIntersection(this.getPointerPosition());K&&K._fireAndBubble(k,h.createEvent(I)),h.releaseCapture(I.pointerId)}_lostpointercapture(I){h.releaseCapture(I.pointerId)}setPointersPositions(I){const K=this._getContentPosition();let Q=null,Z=null;I=I||window.event,I.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(I.touches,it=>{this._pointerPositions.push({id:it.identifier,x:(it.clientX-K.left)/K.scaleX,y:(it.clientY-K.top)/K.scaleY})}),Array.prototype.forEach.call(I.changedTouches||I.touches,it=>{this._changedPointerPositions.push({id:it.identifier,x:(it.clientX-K.left)/K.scaleX,y:(it.clientY-K.top)/K.scaleY})})):(Q=(I.clientX-K.left)/K.scaleX,Z=(I.clientY-K.top)/K.scaleY,this.pointerPos={x:Q,y:Z},this._pointerPositions=[{x:Q,y:Z,id:e.Util._getFirstPointerId(I)}],this._changedPointerPositions=[{x:Q,y:Z,id:e.Util._getFirstPointerId(I)}])}_setPointerPosition(I){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(I)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const I=this.content.getBoundingClientRect();return{top:I.top,left:I.left,scaleX:I.width/this.content.clientWidth||1,scaleY:I.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const I=this.container();if(!I)throw"Stage has no container. A container is required.";I.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),I.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(I){I.batchDraw()}),this}}t.Stage=q,q.prototype.nodeType=m,(0,a._registerNode)(q),n.Factory.addGetterSetter(q,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(J=>{J.batchDraw()})})}(Rs)),Rs}var ri={},Ns={},Ds;function Et(){return Ds||(Ds=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=gt(),n=At(),s=pt(),i=Ft(),r=mt(),o=gt(),a=Da(),h="hasShadow",m="shadowRGBA",p="patternImage",y="linearGradient",w="radialGradient";let b;function u(){return b||(b=n.Util.createCanvasElement().getContext("2d"),b)}t.shapes={};function A(d){const g=this.attrs.fillRule;g?d.fill(g):d.fill()}function R(d){d.stroke()}function S(d){const g=this.attrs.fillRule;g?d.fill(g):d.fill()}function v(d){d.stroke()}function _(){this._clearCache(h)}function T(){this._clearCache(m)}function k(){this._clearCache(p)}function E(){this._clearCache(y)}function G(){this._clearCache(w)}class f extends i.Node{constructor(g){super(g);let C;for(;C=n.Util.getRandomColor(),!(C&&!(C in t.shapes)););this.colorKey=C,t.shapes[C]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const g=u().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(g&&g.setTransform){const C=new n.Transform;C.translate(this.fillPatternX(),this.fillPatternY()),C.rotate(e.Konva.getAngle(this.fillPatternRotation())),C.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),C.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const F=C.getMatrix(),l=typeof DOMMatrix>"u"?{a:F[0],b:F[1],c:F[2],d:F[3],e:F[4],f:F[5]}:new DOMMatrix(F);g.setTransform(l)}return g}}_getLinearGradient(){return this._getCache(y,this.__getLinearGradient)}__getLinearGradient(){const g=this.fillLinearGradientColorStops();if(g){const C=u(),F=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),x=C.createLinearGradient(F.x,F.y,l.x,l.y);for(let c=0;c<g.length;c+=2)x.addColorStop(g[c],g[c+1]);return x}}_getRadialGradient(){return this._getCache(w,this.__getRadialGradient)}__getRadialGradient(){const g=this.fillRadialGradientColorStops();if(g){const C=u(),F=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),x=C.createRadialGradient(F.x,F.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius());for(let c=0;c<g.length;c+=2)x.addColorStop(g[c],g[c+1]);return x}}getShadowRGBA(){return this._getCache(m,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const g=n.Util.colorToRGBA(this.shadowColor());if(g)return"rgba("+g.r+","+g.g+","+g.b+","+g.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const g=this.hitStrokeWidth();return g==="auto"?this.hasStroke():this.strokeEnabled()&&!!g}intersects(g){const C=this.getStage();if(!C)return!1;const F=C.bufferHitCanvas;return F.getContext().clear(),this.drawHit(F,void 0,!0),F.context.getImageData(Math.round(g.x),Math.round(g.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(g){var C;if(!(!((C=this.attrs.perfectDrawEnabled)!==null&&C!==void 0)||C))return!1;const F=g||this.hasFill(),l=this.hasStroke(),x=this.getAbsoluteOpacity()!==1;if(F&&l&&x)return!0;const c=this.hasShadow(),P=this.shadowForStrokeEnabled();return!!(F&&l&&c&&P)}setStrokeHitEnabled(g){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),g?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const g=this.size();return{x:this._centroid?-g.width/2:0,y:this._centroid?-g.height/2:0,width:g.width,height:g.height}}getClientRect(g={}){let C=!1,F=this.getParent();for(;F;){if(F.isCached()){C=!0;break}F=F.getParent()}const l=g.skipTransform,x=g.relativeTo||C&&this.getStage()||void 0,c=this.getSelfRect(),P=!g.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,M=c.width+P,O=c.height+P,D=!g.skipShadow&&this.hasShadow(),U=D?this.shadowOffsetX():0,H=D?this.shadowOffsetY():0,B=M+Math.abs(U),z=O+Math.abs(H),Y=D&&this.shadowBlur()||0,q=B+Y*2,J=z+Y*2,I={width:q,height:J,x:-(P/2+Y)+Math.min(U,0)+c.x,y:-(P/2+Y)+Math.min(H,0)+c.y};return l?I:this._transformedRect(I,x)}drawScene(g,C,F){const l=this.getLayer();let x=g||l.getCanvas(),c=x.getContext(),P=this._getCanvasCache(),M=this.getSceneFunc(),O=this.hasShadow(),D,U;const H=x.isCache,B=C===this;if(!this.isVisible()&&!B)return this;if(P){c.save();const Y=this.getAbsoluteTransform(C).getMatrix();return c.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!M)return this;if(c.save(),this._useBufferCanvas()&&!H){D=this.getStage();const Y=F||D.bufferCanvas;U=Y.getContext(),U.clear(),U.save(),U._applyLineJoin(this);var z=this.getAbsoluteTransform(C).getMatrix();U.transform(z[0],z[1],z[2],z[3],z[4],z[5]),M.call(this,U,this),U.restore();const q=Y.pixelRatio;O&&c._applyShadow(this),c._applyOpacity(this),c._applyGlobalCompositeOperation(this),c.drawImage(Y._canvas,0,0,Y.width/q,Y.height/q)}else{if(c._applyLineJoin(this),!B){var z=this.getAbsoluteTransform(C).getMatrix();c.transform(z[0],z[1],z[2],z[3],z[4],z[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}O&&c._applyShadow(this),M.call(this,c,this)}return c.restore(),this}drawHit(g,C,F=!1){if(!this.shouldDrawHit(C,F))return this;const l=this.getLayer(),x=g||l.hitCanvas,c=x&&x.getContext(),P=this.hitFunc()||this.sceneFunc(),M=this._getCanvasCache(),O=M&&M.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),O){c.save();const D=this.getAbsoluteTransform(C).getMatrix();return c.transform(D[0],D[1],D[2],D[3],D[4],D[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!P)return this;if(c.save(),c._applyLineJoin(this),this!==C){const D=this.getAbsoluteTransform(C).getMatrix();c.transform(D[0],D[1],D[2],D[3],D[4],D[5])}return P.call(this,c,this),c.restore(),this}drawHitFromCache(g=0){const C=this._getCanvasCache(),F=this._getCachedSceneCanvas(),l=C.hit,x=l.getContext(),c=l.getWidth(),P=l.getHeight();x.clear(),x.drawImage(F._canvas,0,0,c,P);try{const M=x.getImageData(0,0,c,P),O=M.data,D=O.length,U=n.Util._hexToRgb(this.colorKey);for(let H=0;H<D;H+=4)O[H+3]>g?(O[H]=U.r,O[H+1]=U.g,O[H+2]=U.b,O[H+3]=255):O[H+3]=0;x.putImageData(M,0,0)}catch(M){n.Util.error("Unable to draw hit graph from cached scene canvas. "+M.message)}return this}hasPointerCapture(g){return a.hasPointerCapture(g,this)}setPointerCapture(g){a.setPointerCapture(g,this)}releaseCapture(g){a.releaseCapture(g,this)}}t.Shape=f,f.prototype._fillFunc=A,f.prototype._strokeFunc=R,f.prototype._fillFuncHit=S,f.prototype._strokeFuncHit=v,f.prototype._centroid=!1,f.prototype.nodeType="Shape",(0,o._registerNode)(f),f.prototype.eventListeners={},f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),f.prototype.on.call(f.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",T),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",k),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",E),f.prototype.on.call(f.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),s.Factory.addGetterSetter(f,"stroke",void 0,(0,r.getStringOrGradientValidator)()),s.Factory.addGetterSetter(f,"strokeWidth",2,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillAfterStrokeEnabled",!1),s.Factory.addGetterSetter(f,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),s.Factory.addGetterSetter(f,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),s.Factory.addGetterSetter(f,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),s.Factory.addGetterSetter(f,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),s.Factory.addGetterSetter(f,"lineJoin"),s.Factory.addGetterSetter(f,"lineCap"),s.Factory.addGetterSetter(f,"sceneFunc"),s.Factory.addGetterSetter(f,"hitFunc"),s.Factory.addGetterSetter(f,"dash"),s.Factory.addGetterSetter(f,"dashOffset",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"shadowColor",void 0,(0,r.getStringValidator)()),s.Factory.addGetterSetter(f,"shadowBlur",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"shadowOpacity",1,(0,r.getNumberValidator)()),s.Factory.addComponentsGetterSetter(f,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(f,"shadowOffsetX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"shadowOffsetY",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternImage"),s.Factory.addGetterSetter(f,"fill",void 0,(0,r.getStringOrGradientValidator)()),s.Factory.addGetterSetter(f,"fillPatternX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternY",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(f,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(f,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(f,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(f,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(f,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(f,"fillEnabled",!0),s.Factory.addGetterSetter(f,"strokeEnabled",!0),s.Factory.addGetterSetter(f,"shadowEnabled",!0),s.Factory.addGetterSetter(f,"dashEnabled",!0),s.Factory.addGetterSetter(f,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(f,"fillPriority","color"),s.Factory.addComponentsGetterSetter(f,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(f,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),s.Factory.addComponentsGetterSetter(f,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(f,"fillPatternScaleX",1,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(f,"fillPatternScaleY",1,(0,r.getNumberValidator)()),s.Factory.addComponentsGetterSetter(f,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(f,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(f,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(f,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(f,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(f,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(f,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(f,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(f,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(f,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(f,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(f,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(f,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(f,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(f,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(f,"fillPatternRotation",0),s.Factory.addGetterSetter(f,"fillRule",void 0,(0,r.getStringValidator)()),s.Factory.backCompat(f,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Ns)),Ns}var Gs;function Ga(){if(Gs)return ri;Gs=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Layer=void 0;const t=At(),e=Un(),n=Ft(),s=pt(),i=Ln(),r=mt(),o=Et(),a=gt(),h="#",m="beforeDraw",p="draw",y=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],w=y.length;let b=class extends e.Container{constructor(u){super(u),this.canvas=new i.SceneCanvas,this.hitCanvas=new i.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(u){return this.getContext().clear(u),this.getHitCanvas().getContext().clear(u),this}setZIndex(u){super.setZIndex(u);const A=this.getStage();return A&&A.content&&(A.content.removeChild(this.getNativeCanvasElement()),u<A.children.length-1?A.content.insertBefore(this.getNativeCanvasElement(),A.children[u+1].getCanvas()._canvas):A.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){n.Node.prototype.moveToTop.call(this);const u=this.getStage();return u&&u.content&&(u.content.removeChild(this.getNativeCanvasElement()),u.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!n.Node.prototype.moveUp.call(this))return!1;const u=this.getStage();return!u||!u.content?!1:(u.content.removeChild(this.getNativeCanvasElement()),this.index<u.children.length-1?u.content.insertBefore(this.getNativeCanvasElement(),u.children[this.index+1].getCanvas()._canvas):u.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(n.Node.prototype.moveDown.call(this)){const u=this.getStage();if(u){const A=u.children;u.content&&(u.content.removeChild(this.getNativeCanvasElement()),u.content.insertBefore(this.getNativeCanvasElement(),A[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(n.Node.prototype.moveToBottom.call(this)){const u=this.getStage();if(u){const A=u.children;u.content&&(u.content.removeChild(this.getNativeCanvasElement()),u.content.insertBefore(this.getNativeCanvasElement(),A[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const u=this.getNativeCanvasElement();return n.Node.prototype.remove.call(this),u&&u.parentNode&&t.Util._isInDocument(u)&&u.parentNode.removeChild(u),this}getStage(){return this.parent}setSize({width:u,height:A}){return this.canvas.setSize(u,A),this.hitCanvas.setSize(u,A),this._setSmoothEnabled(),this}_validateAdd(u){const A=u.getType();A!=="Group"&&A!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(u){return u=u||{},u.width=u.width||this.getWidth(),u.height=u.height||this.getHeight(),u.x=u.x!==void 0?u.x:this.x(),u.y=u.y!==void 0?u.y:this.y(),n.Node.prototype._toKonvaCanvas.call(this,u)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(u){if(!this.isListening()||!this.isVisible())return null;let A=1,R=!1;for(;;){for(let S=0;S<w;S++){const v=y[S],_=this._getIntersection({x:u.x+v.x*A,y:u.y+v.y*A}),T=_.shape;if(T)return T;if(R=!!_.antialiased,!_.antialiased)break}if(R)A+=1;else return null}}_getIntersection(u){const A=this.hitCanvas.pixelRatio,R=this.hitCanvas.context.getImageData(Math.round(u.x*A),Math.round(u.y*A),1,1).data,S=R[3];if(S===255){const v=t.Util._rgbToHex(R[0],R[1],R[2]),_=o.shapes[h+v];return _?{shape:_}:{antialiased:!0}}else if(S>0)return{antialiased:!0};return{}}drawScene(u,A){const R=this.getLayer(),S=u||R&&R.getCanvas();return this._fire(m,{node:this}),this.clearBeforeDraw()&&S.getContext().clear(),e.Container.prototype.drawScene.call(this,S,A),this._fire(p,{node:this}),this}drawHit(u,A){const R=this.getLayer(),S=u||R&&R.hitCanvas;return R&&R.clearBeforeDraw()&&R.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,S,A),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(u){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(u)}getHitGraphEnabled(u){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const u=this.parent;this.hitCanvas._canvas.parentNode?u.content.removeChild(this.hitCanvas._canvas):u.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return ri.Layer=b,b.prototype.nodeType="Layer",(0,a._registerNode)(b),s.Factory.addGetterSetter(b,"imageSmoothingEnabled",!0),s.Factory.addGetterSetter(b,"clearBeforeDraw",!0),s.Factory.addGetterSetter(b,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),ri}var si={},Is;function yc(){if(Is)return si;Is=1,Object.defineProperty(si,"__esModule",{value:!0}),si.FastLayer=void 0;const t=At(),e=Ga(),n=gt();let s=class extends e.Layer{constructor(i){super(i),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return si.FastLayer=s,s.prototype.nodeType="FastLayer",(0,n._registerNode)(s),si}var oi={},Ls;function Gr(){if(Ls)return oi;Ls=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Group=void 0;const t=At(),e=Un(),n=gt();let s=class extends e.Container{_validateAdd(i){const r=i.getType();r!=="Group"&&r!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return oi.Group=s,s.prototype.nodeType="Group",(0,n._registerNode)(s),oi}var ai={},Us;function Ir(){if(Us)return ai;Us=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Animation=void 0;const t=gt(),e=At(),n=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let s=class Ke{constructor(r,o){this.id=Ke.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n(),frameRate:0},this.func=r,this.setLayers(o)}setLayers(r){let o=[];return r&&(o=Array.isArray(r)?r:[r]),this.layers=o,this}getLayers(){return this.layers}addLayer(r){const o=this.layers,a=o.length;for(let h=0;h<a;h++)if(o[h]._id===r._id)return!1;return this.layers.push(r),!0}isRunning(){const r=Ke.animations,o=r.length;for(let a=0;a<o;a++)if(r[a].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),Ke._addAnimation(this),this}stop(){return Ke._removeAnimation(this),this}_updateFrameObject(r){this.frame.timeDiff=r-this.frame.lastTime,this.frame.lastTime=r,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(r){this.animations.push(r),this._handleAnimation()}static _removeAnimation(r){const o=r.id,a=this.animations,h=a.length;for(let m=0;m<h;m++)if(a[m].id===o){this.animations.splice(m,1);break}}static _runFrames(){const r={},o=this.animations;for(let a=0;a<o.length;a++){const h=o[a],m=h.layers,p=h.func;h._updateFrameObject(n());const y=m.length;let w;if(p?w=p.call(h,h.frame)!==!1:w=!0,!!w)for(let b=0;b<y;b++){const u=m[b];u._id!==void 0&&(r[u._id]=u)}}for(const a in r)r.hasOwnProperty(a)&&r[a].batchDraw()}static _animationLoop(){const r=Ke;r.animations.length?(r._runFrames(),e.Util.requestAnimFrame(r._animationLoop)):r.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return ai.Animation=s,s.animations=[],s.animIdCounter=0,s.animRunning=!1,ai}var Bs={},Hs;function bc(){return Hs||(Hs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=At(),n=Ir(),s=Ft(),i=gt(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,h=3,m=["fill","stroke","shadowColor"];let p=0;class y{constructor(u,A,R,S,v,_,T){this.prop=u,this.propFunc=A,this.begin=S,this._pos=S,this.duration=_,this._change=0,this.prevPos=0,this.yoyo=T,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=R,this._change=v-this.begin,this.pause()}fire(u){const A=this[u];A&&A()}setTime(u){u>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():u<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=u,this.update())}getTime(){return this._time}setPosition(u){this.prevPos=this._pos,this.propFunc(u),this._pos=u}getPosition(u){return u===void 0&&(u=this._time),this.func(u,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(u){this.pause(),this._time=u,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const u=this.getTimer()-this._startTime;this.state===a?this.setTime(u):this.state===h&&this.setTime(this.duration-u)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class w{constructor(u){const A=this,R=u.node,S=R._id,v=u.easing||t.Easings.Linear,_=!!u.yoyo;let T,k;typeof u.duration>"u"?T=.3:u.duration===0?T=.001:T=u.duration,this.node=R,this._id=p++;const E=R.getLayer()||(R instanceof i.Konva.Stage?R.getLayers():null);E||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){A.tween.onEnterFrame()},E),this.tween=new y(k,function(G){A._tweenFunc(G)},v,0,1,T*1e3,_),this._addListeners(),w.attrs[S]||(w.attrs[S]={}),w.attrs[S][this._id]||(w.attrs[S][this._id]={}),w.tweens[S]||(w.tweens[S]={});for(k in u)r[k]===void 0&&this._addAttr(k,u[k]);this.reset(),this.onFinish=u.onFinish,this.onReset=u.onReset,this.onUpdate=u.onUpdate}_addAttr(u,A){const R=this.node,S=R._id;let v,_,T,k,E;const G=w.tweens[S][u];G&&delete w.attrs[S][G][u];let f=R.getAttr(u);if(e.Util._isArray(A))if(v=[],_=Math.max(A.length,f.length),u==="points"&&A.length!==f.length&&(A.length>f.length?(k=f,f=e.Util._prepareArrayForTween(f,A,R.closed())):(T=A,A=e.Util._prepareArrayForTween(A,f,R.closed()))),u.indexOf("fill")===0)for(let d=0;d<_;d++)if(d%2===0)v.push(A[d]-f[d]);else{const g=e.Util.colorToRGBA(f[d]);E=e.Util.colorToRGBA(A[d]),f[d]=g,v.push({r:E.r-g.r,g:E.g-g.g,b:E.b-g.b,a:E.a-g.a})}else for(let d=0;d<_;d++)v.push(A[d]-f[d]);else m.indexOf(u)!==-1?(f=e.Util.colorToRGBA(f),E=e.Util.colorToRGBA(A),v={r:E.r-f.r,g:E.g-f.g,b:E.b-f.b,a:E.a-f.a}):v=A-f;w.attrs[S][this._id][u]={start:f,diff:v,end:A,trueEnd:T,trueStart:k},w.tweens[S][u]=this._id}_tweenFunc(u){const A=this.node,R=w.attrs[A._id][this._id];let S,v,_,T,k,E,G,f;for(S in R){if(v=R[S],_=v.start,T=v.diff,f=v.end,e.Util._isArray(_))if(k=[],G=Math.max(_.length,f.length),S.indexOf("fill")===0)for(E=0;E<G;E++)E%2===0?k.push((_[E]||0)+T[E]*u):k.push("rgba("+Math.round(_[E].r+T[E].r*u)+","+Math.round(_[E].g+T[E].g*u)+","+Math.round(_[E].b+T[E].b*u)+","+(_[E].a+T[E].a*u)+")");else for(E=0;E<G;E++)k.push((_[E]||0)+T[E]*u);else m.indexOf(S)!==-1?k="rgba("+Math.round(_.r+T.r*u)+","+Math.round(_.g+T.g*u)+","+Math.round(_.b+T.b*u)+","+(_.a+T.a*u)+")":k=_+T*u;A.setAttr(S,k)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const u=this.node,A=w.attrs[u._id][this._id];A.points&&A.points.trueEnd&&u.setAttr("points",A.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const u=this.node,A=w.attrs[u._id][this._id];A.points&&A.points.trueStart&&u.points(A.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(u){return this.tween.seek(u*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const u=this.node._id,A=this._id,R=w.tweens[u];this.pause();for(const S in R)delete w.tweens[u][S];delete w.attrs[u][A]}}t.Tween=w,w.attrs={},w.tweens={},s.Node.prototype.to=function(b){const u=b.onFinish;b.node=this,b.onFinish=function(){this.destroy(),u&&u()},new w(b).play()},t.Easings={BackEaseIn(b,u,A,R){return A*(b/=R)*b*((1.70158+1)*b-1.70158)+u},BackEaseOut(b,u,A,R){return A*((b=b/R-1)*b*((1.70158+1)*b+1.70158)+1)+u},BackEaseInOut(b,u,A,R){let S=1.70158;return(b/=R/2)<1?A/2*(b*b*(((S*=1.525)+1)*b-S))+u:A/2*((b-=2)*b*(((S*=1.525)+1)*b+S)+2)+u},ElasticEaseIn(b,u,A,R,S,v){let _=0;return b===0?u:(b/=R)===1?u+A:(v||(v=R*.3),!S||S<Math.abs(A)?(S=A,_=v/4):_=v/(2*Math.PI)*Math.asin(A/S),-(S*Math.pow(2,10*(b-=1))*Math.sin((b*R-_)*(2*Math.PI)/v))+u)},ElasticEaseOut(b,u,A,R,S,v){let _=0;return b===0?u:(b/=R)===1?u+A:(v||(v=R*.3),!S||S<Math.abs(A)?(S=A,_=v/4):_=v/(2*Math.PI)*Math.asin(A/S),S*Math.pow(2,-10*b)*Math.sin((b*R-_)*(2*Math.PI)/v)+A+u)},ElasticEaseInOut(b,u,A,R,S,v){let _=0;return b===0?u:(b/=R/2)===2?u+A:(v||(v=R*(.3*1.5)),!S||S<Math.abs(A)?(S=A,_=v/4):_=v/(2*Math.PI)*Math.asin(A/S),b<1?-.5*(S*Math.pow(2,10*(b-=1))*Math.sin((b*R-_)*(2*Math.PI)/v))+u:S*Math.pow(2,-10*(b-=1))*Math.sin((b*R-_)*(2*Math.PI)/v)*.5+A+u)},BounceEaseOut(b,u,A,R){return(b/=R)<1/2.75?A*(7.5625*b*b)+u:b<2/2.75?A*(7.5625*(b-=1.5/2.75)*b+.75)+u:b<2.5/2.75?A*(7.5625*(b-=2.25/2.75)*b+.9375)+u:A*(7.5625*(b-=2.625/2.75)*b+.984375)+u},BounceEaseIn(b,u,A,R){return A-t.Easings.BounceEaseOut(R-b,0,A,R)+u},BounceEaseInOut(b,u,A,R){return b<R/2?t.Easings.BounceEaseIn(b*2,0,A,R)*.5+u:t.Easings.BounceEaseOut(b*2-R,0,A,R)*.5+A*.5+u},EaseIn(b,u,A,R){return A*(b/=R)*b+u},EaseOut(b,u,A,R){return-A*(b/=R)*(b-2)+u},EaseInOut(b,u,A,R){return(b/=R/2)<1?A/2*b*b+u:-A/2*(--b*(b-2)-1)+u},StrongEaseIn(b,u,A,R){return A*(b/=R)*b*b*b*b+u},StrongEaseOut(b,u,A,R){return A*((b=b/R-1)*b*b*b*b+1)+u},StrongEaseInOut(b,u,A,R){return(b/=R/2)<1?A/2*b*b*b*b*b+u:A/2*((b-=2)*b*b*b*b+2)+u},Linear(b,u,A,R){return A*b/R+u}}}(Bs)),Bs}var js;function xc(){return js||(js=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=gt(),n=At(),s=Ft(),i=Un(),r=_c(),o=Ga(),a=yc(),h=Gr(),m=Dr(),p=Et(),y=Ir(),w=bc(),b=Na(),u=Ln();t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:s.Node,Container:i.Container,Stage:r.Stage,stages:r.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:m.DD,Shape:p.Shape,shapes:p.shapes,Animation:y.Animation,Tween:w.Tween,Easings:w.Easings,Context:b.Context,Canvas:u.Canvas}),t.default=t.Konva}(vs)),vs}var li={},Vs;function wc(){if(Vs)return li;Vs=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Arc=void 0;const t=pt(),e=Et(),n=gt(),s=mt(),i=gt();let r=class extends e.Shape{_sceneFunc(o){const a=n.Konva.getAngle(this.angle()),h=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,a,h),o.arc(0,0,this.innerRadius(),a,0,!h),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),a=this.outerRadius(),h=this.clockwise(),m=n.Konva.getAngle(h?360-this.angle():this.angle()),p=Math.cos(Math.min(m,Math.PI)),y=1,w=Math.sin(Math.min(Math.max(Math.PI,m),3*Math.PI/2)),b=Math.sin(Math.min(m,Math.PI/2)),u=p*(p>0?o:a),A=y*a,R=w*(w>0?o:a),S=b*(b>0?a:o);return{x:u,y:h?-1*S:R,width:A-u,height:S-R}}};return li.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1,(0,s.getBooleanValidator)()),li}var hi={},ci={},Ws;function Ia(){if(Ws)return ci;Ws=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Line=void 0;const t=pt(),e=gt(),n=Et(),s=mt();function i(a,h,m,p,y,w,b){const u=Math.sqrt(Math.pow(m-a,2)+Math.pow(p-h,2)),A=Math.sqrt(Math.pow(y-m,2)+Math.pow(w-p,2)),R=b*u/(u+A),S=b*A/(u+A),v=m-R*(y-a),_=p-R*(w-h),T=m+S*(y-a),k=p+S*(w-h);return[v,_,T,k]}function r(a,h){const m=a.length,p=[];for(let y=2;y<m-2;y+=2){const w=i(a[y-2],a[y-1],a[y],a[y+1],a[y+2],a[y+3],h);isNaN(w[0])||(p.push(w[0]),p.push(w[1]),p.push(a[y]),p.push(a[y+1]),p.push(w[2]),p.push(w[3]))}return p}let o=class extends n.Shape{constructor(a){super(a),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(a){let h=this.points(),m=h.length,p=this.tension(),y=this.closed(),w=this.bezier(),b,u,A;if(m){if(a.beginPath(),a.moveTo(h[0],h[1]),p!==0&&m>4){for(b=this.getTensionPoints(),u=b.length,A=y?0:4,y||a.quadraticCurveTo(b[0],b[1],b[2],b[3]);A<u-2;)a.bezierCurveTo(b[A++],b[A++],b[A++],b[A++],b[A++],b[A++]);y||a.quadraticCurveTo(b[u-2],b[u-1],h[m-2],h[m-1])}else if(w)for(A=2;A<m;)a.bezierCurveTo(h[A++],h[A++],h[A++],h[A++],h[A++],h[A++]);else for(A=2;A<m;A+=2)a.lineTo(h[A],h[A+1]);y?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const a=this.points(),h=a.length,m=this.tension(),p=i(a[h-2],a[h-1],a[0],a[1],a[2],a[3],m),y=i(a[h-4],a[h-3],a[h-2],a[h-1],a[0],a[1],m),w=r(a,m);return[p[2],p[3]].concat(w).concat([y[0],y[1],a[h-2],a[h-1],y[2],y[3],p[0],p[1],a[0],a[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let a=this.points();if(a.length<4)return{x:a[0]||0,y:a[1]||0,width:0,height:0};this.tension()!==0?a=[a[0],a[1],...this._getTensionPoints(),a[a.length-2],a[a.length-1]]:a=this.points();let h=a[0],m=a[0],p=a[1],y=a[1],w,b;for(let u=0;u<a.length/2;u++)w=a[u*2],b=a[u*2+1],h=Math.min(h,w),m=Math.max(m,w),p=Math.min(p,b),y=Math.max(y,b);return{x:h,y:p,width:m-h,height:y-p}}};return ci.Line=o,o.prototype.className="Line",o.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(o),t.Factory.addGetterSetter(o,"closed",!1),t.Factory.addGetterSetter(o,"bezier",!1),t.Factory.addGetterSetter(o,"tension",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(o,"points",[],(0,s.getNumberArrayValidator)()),ci}var ui={},Ks={},zs;function Sc(){return zs||(zs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,h)=>{let m,p;const y=h/2;m=0;for(let w=0;w<20;w++)p=y*t.tValues[20][w]+y,m+=t.cValues[20][w]*s(o,a,p);return y*m};t.getCubicArcLength=e;const n=(o,a,h)=>{h===void 0&&(h=1);const m=o[0]-2*o[1]+o[2],p=a[0]-2*a[1]+a[2],y=2*o[1]-2*o[0],w=2*a[1]-2*a[0],b=4*(m*m+p*p),u=4*(m*y+p*w),A=y*y+w*w;if(b===0)return h*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const R=u/(2*b),S=A/b,v=h+R,_=S-R*R,T=v*v+_>0?Math.sqrt(v*v+_):0,k=R*R+_>0?Math.sqrt(R*R+_):0,E=R+Math.sqrt(R*R+_)!==0?_*Math.log(Math.abs((v+T)/(R+k))):0;return Math.sqrt(b)/2*(v*T-R*k+E)};t.getQuadraticArcLength=n;function s(o,a,h){const m=i(1,h,o),p=i(1,h,a),y=m*m+p*p;return Math.sqrt(y)}const i=(o,a,h)=>{const m=h.length-1;let p,y;if(m===0)return 0;if(o===0){y=0;for(let w=0;w<=m;w++)y+=t.binomialCoefficients[m][w]*Math.pow(1-a,m-w)*Math.pow(a,w)*h[w];return y}else{p=new Array(m);for(let w=0;w<m;w++)p[w]=m*(h[w+1]-h[w]);return i(o-1,a,p)}},r=(o,a,h)=>{let m=1,p=o/a,y=(o-h(p))/a,w=0;for(;m>.001;){const b=h(p+y),u=Math.abs(o-b)/a;if(u<m)m=u,p+=y;else{const A=h(p-y),R=Math.abs(o-A)/a;R<m?(m=R,p-=y):y/=2}if(w++,w>500)break}return p};t.t2length=r}(Ks)),Ks}var $s;function Lr(){if($s)return ui;$s=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Path=void 0;const t=pt(),e=Et(),n=gt(),s=Sc();let i=class Kt extends e.Shape{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Kt.parsePathData(this.data()),this.pathLength=Kt.getPathLength(this.dataArray)}_sceneFunc(o){const a=this.dataArray;o.beginPath();let h=!1;for(let T=0;T<a.length;T++){const k=a[T].command,E=a[T].points;switch(k){case"L":o.lineTo(E[0],E[1]);break;case"M":o.moveTo(E[0],E[1]);break;case"C":o.bezierCurveTo(E[0],E[1],E[2],E[3],E[4],E[5]);break;case"Q":o.quadraticCurveTo(E[0],E[1],E[2],E[3]);break;case"A":var m=E[0],p=E[1],y=E[2],w=E[3],b=E[4],u=E[5],A=E[6],R=E[7],S=y>w?y:w,v=y>w?1:y/w,_=y>w?w/y:1;o.translate(m,p),o.rotate(A),o.scale(v,_),o.arc(0,0,S,b,b+u,1-R),o.scale(1/v,1/_),o.rotate(-A),o.translate(-m,-p);break;case"z":h=!0,o.closePath();break}}!h&&!this.hasFill()?o.strokeShape(this):o.fillStrokeShape(this)}getSelfRect(){let o=[];this.dataArray.forEach(function(b){if(b.command==="A"){const u=b.points[4],A=b.points[5],R=b.points[4]+A;let S=Math.PI/180;if(Math.abs(u-R)<S&&(S=Math.abs(u-R)),A<0)for(let v=u-S;v>R;v-=S){const _=Kt.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],v,0);o.push(_.x,_.y)}else for(let v=u+S;v<R;v+=S){const _=Kt.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],v,0);o.push(_.x,_.y)}}else if(b.command==="C")for(let u=0;u<=1;u+=.01){const A=Kt.getPointOnCubicBezier(u,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);o.push(A.x,A.y)}else o=o.concat(b.points)});let a=o[0],h=o[0],m=o[1],p=o[1],y,w;for(let b=0;b<o.length/2;b++)y=o[b*2],w=o[b*2+1],isNaN(y)||(a=Math.min(a,y),h=Math.max(h,y)),isNaN(w)||(m=Math.min(m,w),p=Math.max(p,w));return{x:a,y:m,width:h-a,height:p-m}}getLength(){return this.pathLength}getPointAtLength(o){return Kt.getPointAtLengthOfDataArray(o,this.dataArray)}static getLineLength(o,a,h,m){return Math.sqrt((h-o)*(h-o)+(m-a)*(m-a))}static getPathLength(o){let a=0;for(let h=0;h<o.length;++h)a+=o[h].pathLength;return a}static getPointAtLengthOfDataArray(o,a){let h,m=0,p=a.length;if(!p)return null;for(;m<p&&o>a[m].pathLength;)o-=a[m].pathLength,++m;if(m===p)return h=a[m-1].points.slice(-2),{x:h[0],y:h[1]};if(o<.01)return h=a[m].points.slice(0,2),{x:h[0],y:h[1]};const y=a[m],w=y.points;switch(y.command){case"L":return Kt.getPointOnLine(o,y.start.x,y.start.y,w[0],w[1]);case"C":return Kt.getPointOnCubicBezier((0,s.t2length)(o,Kt.getPathLength(a),T=>(0,s.getCubicArcLength)([y.start.x,w[0],w[2],w[4]],[y.start.y,w[1],w[3],w[5]],T)),y.start.x,y.start.y,w[0],w[1],w[2],w[3],w[4],w[5]);case"Q":return Kt.getPointOnQuadraticBezier((0,s.t2length)(o,Kt.getPathLength(a),T=>(0,s.getQuadraticArcLength)([y.start.x,w[0],w[2]],[y.start.y,w[1],w[3]],T)),y.start.x,y.start.y,w[0],w[1],w[2],w[3]);case"A":var b=w[0],u=w[1],A=w[2],R=w[3],S=w[4],v=w[5],_=w[6];return S+=v*o/y.pathLength,Kt.getPointOnEllipticalArc(b,u,A,R,S,_)}return null}static getPointOnLine(o,a,h,m,p,y,w){y=y??a,w=w??h;const b=this.getLineLength(a,h,m,p);if(b<1e-10)return{x:a,y:h};if(m===a)return{x:y,y:w+(p>h?o:-o)};const u=(p-h)/(m-a),A=Math.sqrt(o*o/(1+u*u))*(m<a?-1:1),R=u*A;if(Math.abs(w-h-u*(y-a))<1e-10)return{x:y+A,y:w+R};const S=((y-a)*(m-a)+(w-h)*(p-h))/(b*b),v=a+S*(m-a),_=h+S*(p-h),T=this.getLineLength(y,w,v,_),k=Math.sqrt(o*o-T*T),E=Math.sqrt(k*k/(1+u*u))*(m<a?-1:1),G=u*E;return{x:v+E,y:_+G}}static getPointOnCubicBezier(o,a,h,m,p,y,w,b,u){function A(k){return k*k*k}function R(k){return 3*k*k*(1-k)}function S(k){return 3*k*(1-k)*(1-k)}function v(k){return(1-k)*(1-k)*(1-k)}const _=b*A(o)+y*R(o)+m*S(o)+a*v(o),T=u*A(o)+w*R(o)+p*S(o)+h*v(o);return{x:_,y:T}}static getPointOnQuadraticBezier(o,a,h,m,p,y,w){function b(v){return v*v}function u(v){return 2*v*(1-v)}function A(v){return(1-v)*(1-v)}const R=y*b(o)+m*u(o)+a*A(o),S=w*b(o)+p*u(o)+h*A(o);return{x:R,y:S}}static getPointOnEllipticalArc(o,a,h,m,p,y){const w=Math.cos(y),b=Math.sin(y),u={x:h*Math.cos(p),y:m*Math.sin(p)};return{x:o+(u.x*w-u.y*b),y:a+(u.x*b+u.y*w)}}static parsePathData(o){if(!o)return[];let a=o;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var m=0;m<h.length;m++)a=a.replace(new RegExp(h[m],"g"),"|"+h[m]);const p=a.split("|"),y=[],w=[];let b=0,u=0;const A=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let R;for(m=1;m<p.length;m++){let l=p[m],x=l.charAt(0);for(l=l.slice(1),w.length=0;R=A.exec(l);)w.push(R[0]);const c=[];for(let P=0,M=w.length;P<M;P++){if(w[P]==="00"){c.push(0,0);continue}const O=parseFloat(w[P]);isNaN(O)?c.push(0):c.push(O)}for(;c.length>0&&!isNaN(c[0]);){let P="",M=[];const O=b,D=u;var S,v,_,T,k,E,G,f,d,g;switch(x){case"l":b+=c.shift(),u+=c.shift(),P="L",M.push(b,u);break;case"L":b=c.shift(),u=c.shift(),M.push(b,u);break;case"m":var C=c.shift(),F=c.shift();if(b+=C,u+=F,P="M",y.length>2&&y[y.length-1].command==="z"){for(let U=y.length-2;U>=0;U--)if(y[U].command==="M"){b=y[U].points[0]+C,u=y[U].points[1]+F;break}}M.push(b,u),x="l";break;case"M":b=c.shift(),u=c.shift(),P="M",M.push(b,u),x="L";break;case"h":b+=c.shift(),P="L",M.push(b,u);break;case"H":b=c.shift(),P="L",M.push(b,u);break;case"v":u+=c.shift(),P="L",M.push(b,u);break;case"V":u=c.shift(),P="L",M.push(b,u);break;case"C":M.push(c.shift(),c.shift(),c.shift(),c.shift()),b=c.shift(),u=c.shift(),M.push(b,u);break;case"c":M.push(b+c.shift(),u+c.shift(),b+c.shift(),u+c.shift()),b+=c.shift(),u+=c.shift(),P="C",M.push(b,u);break;case"S":v=b,_=u,S=y[y.length-1],S.command==="C"&&(v=b+(b-S.points[2]),_=u+(u-S.points[3])),M.push(v,_,c.shift(),c.shift()),b=c.shift(),u=c.shift(),P="C",M.push(b,u);break;case"s":v=b,_=u,S=y[y.length-1],S.command==="C"&&(v=b+(b-S.points[2]),_=u+(u-S.points[3])),M.push(v,_,b+c.shift(),u+c.shift()),b+=c.shift(),u+=c.shift(),P="C",M.push(b,u);break;case"Q":M.push(c.shift(),c.shift()),b=c.shift(),u=c.shift(),M.push(b,u);break;case"q":M.push(b+c.shift(),u+c.shift()),b+=c.shift(),u+=c.shift(),P="Q",M.push(b,u);break;case"T":v=b,_=u,S=y[y.length-1],S.command==="Q"&&(v=b+(b-S.points[0]),_=u+(u-S.points[1])),b=c.shift(),u=c.shift(),P="Q",M.push(v,_,b,u);break;case"t":v=b,_=u,S=y[y.length-1],S.command==="Q"&&(v=b+(b-S.points[0]),_=u+(u-S.points[1])),b+=c.shift(),u+=c.shift(),P="Q",M.push(v,_,b,u);break;case"A":T=c.shift(),k=c.shift(),E=c.shift(),G=c.shift(),f=c.shift(),d=b,g=u,b=c.shift(),u=c.shift(),P="A",M=this.convertEndpointToCenterParameterization(d,g,b,u,G,f,T,k,E);break;case"a":T=c.shift(),k=c.shift(),E=c.shift(),G=c.shift(),f=c.shift(),d=b,g=u,b+=c.shift(),u+=c.shift(),P="A",M=this.convertEndpointToCenterParameterization(d,g,b,u,G,f,T,k,E);break}y.push({command:P||x,points:M,start:{x:O,y:D},pathLength:this.calcLength(O,D,P||x,M)})}(x==="z"||x==="Z")&&y.push({command:"z",points:[],start:void 0,pathLength:0})}return y}static calcLength(o,a,h,m){let p,y,w,b;const u=Kt;switch(h){case"L":return u.getLineLength(o,a,m[0],m[1]);case"C":return(0,s.getCubicArcLength)([o,m[0],m[2],m[4]],[a,m[1],m[3],m[5]],1);case"Q":return(0,s.getQuadraticArcLength)([o,m[0],m[2]],[a,m[1],m[3]],1);case"A":p=0;var A=m[4],R=m[5],S=m[4]+R,v=Math.PI/180;if(Math.abs(A-S)<v&&(v=Math.abs(A-S)),y=u.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],A,0),R<0)for(b=A-v;b>S;b-=v)w=u.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],b,0),p+=u.getLineLength(y.x,y.y,w.x,w.y),y=w;else for(b=A+v;b<S;b+=v)w=u.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],b,0),p+=u.getLineLength(y.x,y.y,w.x,w.y),y=w;return w=u.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],S,0),p+=u.getLineLength(y.x,y.y,w.x,w.y),p}return 0}static convertEndpointToCenterParameterization(o,a,h,m,p,y,w,b,u){const A=u*(Math.PI/180),R=Math.cos(A)*(o-h)/2+Math.sin(A)*(a-m)/2,S=-1*Math.sin(A)*(o-h)/2+Math.cos(A)*(a-m)/2,v=R*R/(w*w)+S*S/(b*b);v>1&&(w*=Math.sqrt(v),b*=Math.sqrt(v));let _=Math.sqrt((w*w*(b*b)-w*w*(S*S)-b*b*(R*R))/(w*w*(S*S)+b*b*(R*R)));p===y&&(_*=-1),isNaN(_)&&(_=0);const T=_*w*S/b,k=_*-b*R/w,E=(o+h)/2+Math.cos(A)*T-Math.sin(A)*k,G=(a+m)/2+Math.sin(A)*T+Math.cos(A)*k,f=function(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])},d=function(c,P){return(c[0]*P[0]+c[1]*P[1])/(f(c)*f(P))},g=function(c,P){return(c[0]*P[1]<c[1]*P[0]?-1:1)*Math.acos(d(c,P))},C=g([1,0],[(R-T)/w,(S-k)/b]),F=[(R-T)/w,(S-k)/b],l=[(-1*R-T)/w,(-1*S-k)/b];let x=g(F,l);return d(F,l)<=-1&&(x=Math.PI),d(F,l)>=1&&(x=0),y===0&&x>0&&(x=x-2*Math.PI),y===1&&x<0&&(x=x+2*Math.PI),[E,G,w,b,C,x,A,y]}};return ui.Path=i,i.prototype.className="Path",i.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(i),t.Factory.addGetterSetter(i,"data"),ui}var Xs;function Cc(){if(Xs)return hi;Xs=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Arrow=void 0;const t=pt(),e=Ia(),n=mt(),s=gt(),i=Lr();let r=class extends e.Line{_sceneFunc(o){super._sceneFunc(o);const a=Math.PI*2,h=this.points();let m=h;const p=this.tension()!==0&&h.length>4;p&&(m=this.getTensionPoints());const y=this.pointerLength(),w=h.length;let b,u;if(p){const S=[m[m.length-4],m[m.length-3],m[m.length-2],m[m.length-1],h[w-2],h[w-1]],v=i.Path.calcLength(m[m.length-4],m[m.length-3],"C",S),_=i.Path.getPointOnQuadraticBezier(Math.min(1,1-y/v),S[0],S[1],S[2],S[3],S[4],S[5]);b=h[w-2]-_.x,u=h[w-1]-_.y}else b=h[w-2]-h[w-4],u=h[w-1]-h[w-3];const A=(Math.atan2(u,b)+a)%a,R=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(h[w-2],h[w-1]),o.rotate(A),o.moveTo(0,0),o.lineTo(-y,R/2),o.lineTo(-y,-R/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(h[0],h[1]),p?(b=(m[0]+m[2])/2-h[0],u=(m[1]+m[3])/2-h[1]):(b=h[2]-h[0],u=h[3]-h[1]),o.rotate((Math.atan2(-u,-b)+a)%a),o.moveTo(0,0),o.lineTo(-y,R/2),o.lineTo(-y,-R/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const a=this.dashEnabled();a&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),a&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),a=this.pointerWidth()/2;return{x:o.x,y:o.y-a,width:o.width,height:o.height+a*2}}};return hi.Arrow=r,r.prototype.className="Arrow",(0,s._registerNode)(r),t.Factory.addGetterSetter(r,"pointerLength",10,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerWidth",10,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerAtBeginning",!1),t.Factory.addGetterSetter(r,"pointerAtEnding",!0),hi}var di={},Ys;function Pc(){if(Ys)return di;Ys=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Circle=void 0;const t=pt(),e=Et(),n=mt(),s=gt();let i=class extends e.Shape{_sceneFunc(r){r.beginPath(),r.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(r){this.radius()!==r/2&&this.radius(r/2)}setHeight(r){this.radius()!==r/2&&this.radius(r/2)}};return di.Circle=i,i.prototype._centroid=!0,i.prototype.className="Circle",i.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(i),t.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),di}var fi={},qs;function Tc(){if(qs)return fi;qs=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Ellipse=void 0;const t=pt(),e=Et(),n=mt(),s=gt();let i=class extends e.Shape{_sceneFunc(r){const o=this.radiusX(),a=this.radiusY();r.beginPath(),r.save(),o!==a&&r.scale(1,a/o),r.arc(0,0,o,0,Math.PI*2,!1),r.restore(),r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(r){this.radiusX(r/2)}setHeight(r){this.radiusY(r/2)}};return fi.Ellipse=i,i.prototype.className="Ellipse",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,s._registerNode)(i),t.Factory.addComponentsGetterSetter(i,"radius",["x","y"]),t.Factory.addGetterSetter(i,"radiusX",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"radiusY",0,(0,n.getNumberValidator)()),fi}var gi={},Qs;function Ac(){if(Qs)return gi;Qs=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Image=void 0;const t=At(),e=pt(),n=Et(),s=gt(),i=mt();let r=class La extends n.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),h=this.hasShadow();return a&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const h=this.getWidth(),m=this.getHeight(),p=this.cornerRadius(),y=this.attrs.image;let w;if(y){const b=this.attrs.cropWidth,u=this.attrs.cropHeight;b&&u?w=[y,this.cropX(),this.cropY(),b,u,0,0,h,m]:w=[y,0,0,h,m]}(this.hasFill()||this.hasStroke()||p)&&(a.beginPath(),p?t.Util.drawRoundedRectPath(a,h,m,p):a.rect(0,0,h,m),a.closePath(),a.fillStrokeShape(this)),y&&(p&&a.clip(),a.drawImage.apply(a,w))}_hitFunc(a){const h=this.width(),m=this.height(),p=this.cornerRadius();a.beginPath(),p?t.Util.drawRoundedRectPath(a,h,m,p):a.rect(0,0,h,m),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,h;return(a=this.attrs.width)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var a,h;return(a=this.attrs.height)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(a,h,m=null){const p=t.Util.createImageElement();p.onload=function(){const y=new La({image:p});h(y)},p.onerror=m,p.crossOrigin="Anonymous",p.src=a}};return gi.Image=r,r.prototype.className="Image",(0,s._registerNode)(r),e.Factory.addGetterSetter(r,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(r,"image"),e.Factory.addComponentsGetterSetter(r,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(r,"cropX",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropY",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropWidth",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropHeight",0,(0,i.getNumberValidator)()),gi}var Ne={},Js;function Mc(){if(Js)return Ne;Js=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.Tag=Ne.Label=void 0;const t=pt(),e=Et(),n=Gr(),s=mt(),i=gt(),r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],o="Change.konva",a="none",h="up",m="right",p="down",y="left",w=r.length;let b=class extends n.Group{constructor(A){super(A),this.on("add.konva",function(R){this._addListeners(R.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(A){let R=this,S;const v=function(){R._sync()};for(S=0;S<w;S++)A.on(r[S]+o,v)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let A=this.getText(),R=this.getTag(),S,v,_,T,k,E,G;if(A&&R){switch(S=A.width(),v=A.height(),_=R.pointerDirection(),T=R.pointerWidth(),G=R.pointerHeight(),k=0,E=0,_){case h:k=S/2,E=-1*G;break;case m:k=S+T,E=v/2;break;case p:k=S/2,E=v+G;break;case y:k=-1*T,E=v/2;break}R.setAttrs({x:-1*k,y:-1*E,width:S,height:v}),A.setAttrs({x:-1*k,y:-1*E})}}};Ne.Label=b,b.prototype.className="Label",(0,i._registerNode)(b);class u extends e.Shape{_sceneFunc(R){const S=this.width(),v=this.height(),_=this.pointerDirection(),T=this.pointerWidth(),k=this.pointerHeight(),E=this.cornerRadius();let G=0,f=0,d=0,g=0;typeof E=="number"?G=f=d=g=Math.min(E,S/2,v/2):(G=Math.min(E[0]||0,S/2,v/2),f=Math.min(E[1]||0,S/2,v/2),g=Math.min(E[2]||0,S/2,v/2),d=Math.min(E[3]||0,S/2,v/2)),R.beginPath(),R.moveTo(G,0),_===h&&(R.lineTo((S-T)/2,0),R.lineTo(S/2,-1*k),R.lineTo((S+T)/2,0)),R.lineTo(S-f,0),R.arc(S-f,f,f,Math.PI*3/2,0,!1),_===m&&(R.lineTo(S,(v-k)/2),R.lineTo(S+T,v/2),R.lineTo(S,(v+k)/2)),R.lineTo(S,v-g),R.arc(S-g,v-g,g,0,Math.PI/2,!1),_===p&&(R.lineTo((S+T)/2,v),R.lineTo(S/2,v+k),R.lineTo((S-T)/2,v)),R.lineTo(d,v),R.arc(d,v-d,d,Math.PI/2,Math.PI,!1),_===y&&(R.lineTo(0,(v+k)/2),R.lineTo(-1*T,v/2),R.lineTo(0,(v-k)/2)),R.lineTo(0,G),R.arc(G,G,G,Math.PI,Math.PI*3/2,!1),R.closePath(),R.fillStrokeShape(this)}getSelfRect(){let R=0,S=0,v=this.pointerWidth(),_=this.pointerHeight(),T=this.pointerDirection(),k=this.width(),E=this.height();return T===h?(S-=_,E+=_):T===p?E+=_:T===y?(R-=v*1.5,k+=v):T===m&&(k+=v*1.5),{x:R,y:S,width:k,height:E}}}return Ne.Tag=u,u.prototype.className="Tag",(0,i._registerNode)(u),t.Factory.addGetterSetter(u,"pointerDirection",a),t.Factory.addGetterSetter(u,"pointerWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"pointerHeight",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(u,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Ne}var pi={},Zs;function Ua(){if(Zs)return pi;Zs=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Rect=void 0;const t=pt(),e=Et(),n=gt(),s=At(),i=mt();let r=class extends e.Shape{_sceneFunc(o){const a=this.cornerRadius(),h=this.width(),m=this.height();o.beginPath(),a?s.Util.drawRoundedRectPath(o,h,m,a):o.rect(0,0,h,m),o.closePath(),o.fillStrokeShape(this)}};return pi.Rect=r,r.prototype.className="Rect",(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),pi}var mi={},to;function Fc(){if(to)return mi;to=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.RegularPolygon=void 0;const t=pt(),e=Et(),n=mt(),s=gt();let i=class extends e.Shape{_sceneFunc(r){const o=this._getPoints();r.beginPath(),r.moveTo(o[0].x,o[0].y);for(let a=1;a<o.length;a++)r.lineTo(o[a].x,o[a].y);r.closePath(),r.fillStrokeShape(this)}_getPoints(){const r=this.attrs.sides,o=this.attrs.radius||0,a=[];for(let h=0;h<r;h++)a.push({x:o*Math.sin(h*2*Math.PI/r),y:-1*o*Math.cos(h*2*Math.PI/r)});return a}getSelfRect(){const r=this._getPoints();let o=r[0].x,a=r[0].y,h=r[0].x,m=r[0].y;return r.forEach(p=>{o=Math.min(o,p.x),a=Math.max(a,p.x),h=Math.min(h,p.y),m=Math.max(m,p.y)}),{x:o,y:h,width:a-o,height:m-h}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(r){this.radius(r/2)}setHeight(r){this.radius(r/2)}};return mi.RegularPolygon=i,i.prototype.className="RegularPolygon",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(i),t.Factory.addGetterSetter(i,"radius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"sides",0,(0,n.getNumberValidator)()),mi}var vi={},eo;function kc(){if(eo)return vi;eo=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Ring=void 0;const t=pt(),e=Et(),n=mt(),s=gt(),i=Math.PI*2;let r=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,i,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),i,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return vi.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,n.getNumberValidator)()),vi}var _i={},io;function Rc(){if(io)return _i;io=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Sprite=void 0;const t=pt(),e=Et(),n=Ir(),s=mt(),i=gt();let r=class extends e.Shape{constructor(o){super(o),this._updated=!0,this.anim=new n.Animation(()=>{const a=this._updated;return this._updated=!1,a}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const a=this.animation(),h=this.frameIndex(),m=h*4,p=this.animations()[a],y=this.frameOffsets(),w=p[m+0],b=p[m+1],u=p[m+2],A=p[m+3],R=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,u,A),o.closePath(),o.fillStrokeShape(this)),R)if(y){const S=y[a],v=h*2;o.drawImage(R,w,b,u,A,S[v+0],S[v+1],u,A)}else o.drawImage(R,w,b,u,A,0,0,u,A)}_hitFunc(o){const a=this.animation(),h=this.frameIndex(),m=h*4,p=this.animations()[a],y=this.frameOffsets(),w=p[m+2],b=p[m+3];if(o.beginPath(),y){const u=y[a],A=h*2;o.rect(u[A+0],u[A+1],w,b)}else o.rect(0,0,w,b);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),a=this.animation(),h=this.animations(),m=h[a],p=m.length/4;o<p-1?this.frameIndex(o+1):this.frameIndex(0)}};return _i.Sprite=r,r.prototype.className="Sprite",(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"animation"),t.Factory.addGetterSetter(r,"animations"),t.Factory.addGetterSetter(r,"frameOffsets"),t.Factory.addGetterSetter(r,"image"),t.Factory.addGetterSetter(r,"frameIndex",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"frameRate",17,(0,s.getNumberValidator)()),t.Factory.backCompat(r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),_i}var yi={},no;function Oc(){if(no)return yi;no=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Star=void 0;const t=pt(),e=Et(),n=mt(),s=gt();let i=class extends e.Shape{_sceneFunc(r){const o=this.innerRadius(),a=this.outerRadius(),h=this.numPoints();r.beginPath(),r.moveTo(0,0-a);for(let m=1;m<h*2;m++){const p=m%2===0?a:o,y=p*Math.sin(m*Math.PI/h),w=-1*p*Math.cos(m*Math.PI/h);r.lineTo(y,w)}r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(r){this.outerRadius(r/2)}setHeight(r){this.outerRadius(r/2)}};return yi.Star=i,i.prototype.className="Star",i.prototype._centroid=!0,i.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,s._registerNode)(i),t.Factory.addGetterSetter(i,"numPoints",5,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"innerRadius",0,(0,n.getNumberValidator)()),t.Factory.addGetterSetter(i,"outerRadius",0,(0,n.getNumberValidator)()),yi}var je={},ro;function Ba(){if(ro)return je;ro=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Text=void 0,je.stringToArray=o;const t=At(),e=pt(),n=Et(),s=gt(),i=mt(),r=gt();function o(B){return[...B].reduce((z,Y,q,J)=>{if(new RegExp("\\p{Emoji}","u").test(Y)){const I=J[q+1];I&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(I)?(z.push(Y+I),J[q+1]=""):z.push(Y)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(Y+(J[q+1]||""))?z.push(Y+J[q+1]):q>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Y)?z[z.length-1]+=Y:Y&&z.push(Y);return z},[])}const a="auto",h="center",m="inherit",p="justify",y="Change.konva",w="2d",b="-",u="left",A="text",R="Text",S="top",v="bottom",_="middle",T="normal",k="px ",E=" ",G="right",f="rtl",d="word",g="char",C="none",F="",l=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],x=l.length;function c(B){return B.split(",").map(z=>{z=z.trim();const Y=z.indexOf(" ")>=0,q=z.indexOf('"')>=0||z.indexOf("'")>=0;return Y&&!q&&(z=`"${z}"`),z}).join(", ")}let P;function M(){return P||(P=t.Util.createCanvasElement().getContext(w),P)}function O(B){B.fillText(this._partialText,this._partialTextX,this._partialTextY)}function D(B){B.setAttr("miterLimit",2),B.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function U(B){return B=B||{},!B.fillLinearGradientColorStops&&!B.fillRadialGradientColorStops&&!B.fillPatternImage&&(B.fill=B.fill||"black"),B}let H=class extends n.Shape{constructor(B){super(U(B)),this._partialTextX=0,this._partialTextY=0;for(let z=0;z<x;z++)this.on(l[z]+y,this._setTextData);this._setTextData()}_sceneFunc(B){const z=this.textArr,Y=z.length;if(!this.text())return;let q=this.padding(),J=this.fontSize(),I=this.lineHeight()*J,K=this.verticalAlign(),Q=this.direction(),Z=0,it=this.align(),N=this.getWidth(),L=this.letterSpacing(),j=this.fill(),V=this.textDecoration(),W=V.indexOf("underline")!==-1,$=V.indexOf("line-through")!==-1,nt;Q=Q===m?B.direction:Q;let tt=I/2,et=_;if(s.Konva._fixTextRendering){const Pt=this.measureSize("M");et="alphabetic",tt=(Pt.fontBoundingBoxAscent-Pt.fontBoundingBoxDescent)/2+I/2}var X=0,st=0;for(Q===f&&B.setAttr("direction",Q),B.setAttr("font",this._getContextFont()),B.setAttr("textBaseline",et),B.setAttr("textAlign",u),K===_?Z=(this.getHeight()-Y*I-q*2)/2:K===v&&(Z=this.getHeight()-Y*I-q*2),B.translate(q,Z+q),nt=0;nt<Y;nt++){var X=0,st=0,rt=z[nt],ot=rt.text,at=rt.width,lt=rt.lastInParagraph,ft,ut;if(B.save(),it===G?X+=N-at-q*2:it===h&&(X+=(N-at-q*2)/2),W){B.save(),B.beginPath();const St=s.Konva._fixTextRendering?Math.round(J/4):Math.round(J/2),Mt=X,Vt=tt+st+St;B.moveTo(Mt,Vt),ft=ot.split(" ").length-1,ut=it===p&&!lt?N-q*2:at,B.lineTo(Mt+Math.round(ut),Vt),B.lineWidth=J/15;const ln=this._getLinearGradient();B.strokeStyle=ln||j,B.stroke(),B.restore()}if($){B.save(),B.beginPath();const St=s.Konva._fixTextRendering?-Math.round(J/4):0;B.moveTo(X,tt+st+St),ft=ot.split(" ").length-1,ut=it===p&&!lt?N-q*2:at,B.lineTo(X+Math.round(ut),tt+st+St),B.lineWidth=J/15;const Mt=this._getLinearGradient();B.strokeStyle=Mt||j,B.stroke(),B.restore()}if(Q!==f&&(L!==0||it===p)){ft=ot.split(" ").length-1;const St=o(ot);for(let Mt=0;Mt<St.length;Mt++){const Vt=St[Mt];Vt===" "&&!lt&&it===p&&(X+=(N-q*2-at)/ft),this._partialTextX=X,this._partialTextY=tt+st,this._partialText=Vt,B.fillStrokeShape(this),X+=this.measureSize(Vt).width+L}}else L!==0&&B.setAttr("letterSpacing",`${L}px`),this._partialTextX=X,this._partialTextY=tt+st,this._partialText=ot,B.fillStrokeShape(this);B.restore(),Y>1&&(tt+=I)}}_hitFunc(B){const z=this.getWidth(),Y=this.getHeight();B.beginPath(),B.rect(0,0,z,Y),B.closePath(),B.fillStrokeShape(this)}setText(B){const z=t.Util._isString(B)?B:B==null?"":B+"";return this._setAttr(A,z),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(B){var z,Y,q,J,I,K,Q,Z,it,N,L;let j=M(),V=this.fontSize(),W;j.save(),j.font=this._getContextFont(),W=j.measureText(B),j.restore();const $=V/100;return{actualBoundingBoxAscent:(z=W.actualBoundingBoxAscent)!==null&&z!==void 0?z:71.58203125*$,actualBoundingBoxDescent:(Y=W.actualBoundingBoxDescent)!==null&&Y!==void 0?Y:0,actualBoundingBoxLeft:(q=W.actualBoundingBoxLeft)!==null&&q!==void 0?q:-7.421875*$,actualBoundingBoxRight:(J=W.actualBoundingBoxRight)!==null&&J!==void 0?J:75.732421875*$,alphabeticBaseline:(I=W.alphabeticBaseline)!==null&&I!==void 0?I:0,emHeightAscent:(K=W.emHeightAscent)!==null&&K!==void 0?K:100*$,emHeightDescent:(Q=W.emHeightDescent)!==null&&Q!==void 0?Q:-20*$,fontBoundingBoxAscent:(Z=W.fontBoundingBoxAscent)!==null&&Z!==void 0?Z:91*$,fontBoundingBoxDescent:(it=W.fontBoundingBoxDescent)!==null&&it!==void 0?it:21*$,hangingBaseline:(N=W.hangingBaseline)!==null&&N!==void 0?N:72.80000305175781*$,ideographicBaseline:(L=W.ideographicBaseline)!==null&&L!==void 0?L:-21*$,width:W.width,height:V}}_getContextFont(){return this.fontStyle()+E+this.fontVariant()+E+(this.fontSize()+k)+c(this.fontFamily())}_addTextLine(B){this.align()===p&&(B=B.trim());const z=this._getTextWidth(B);return this.textArr.push({text:B,width:z,lastInParagraph:!1})}_getTextWidth(B){const z=this.letterSpacing(),Y=B.length;return M().measureText(B).width+z*Y}_setTextData(){let B=this.text().split(`
`),z=+this.fontSize(),Y=0,q=this.lineHeight()*z,J=this.attrs.width,I=this.attrs.height,K=J!==a&&J!==void 0,Q=I!==a&&I!==void 0,Z=this.padding(),it=J-Z*2,N=I-Z*2,L=0,j=this.wrap(),V=j!==C,W=j!==g&&V,$=this.ellipsis();this.textArr=[],M().font=this._getContextFont();const nt=$?this._getTextWidth(F):0;for(let tt=0,et=B.length;tt<et;++tt){let X=B[tt],st=this._getTextWidth(X);if(K&&st>it)for(;X.length>0;){let rt=0,ot=o(X).length,at="",lt=0;for(;rt<ot;){const ft=rt+ot>>>1,ut=o(X),Pt=ut.slice(0,ft+1).join(""),kt=this._getTextWidth(Pt)+nt;kt<=it?(rt=ft+1,at=Pt,lt=kt):ot=ft}if(at){if(W){const ft=o(X),ut=o(at),Pt=ft[ut.length],kt=Pt===E||Pt===b;let St;if(kt&&lt<=it)St=ut.length;else{const Mt=ut.lastIndexOf(E),Vt=ut.lastIndexOf(b);St=Math.max(Mt,Vt)+1}St>0&&(rt=St,at=ft.slice(0,rt).join(""),lt=this._getTextWidth(at))}if(at=at.trimRight(),this._addTextLine(at),Y=Math.max(Y,lt),L+=q,this._shouldHandleEllipsis(L)){this._tryToAddEllipsisToLastLine();break}if(X=o(X).slice(rt).join("").trimLeft(),X.length>0&&(st=this._getTextWidth(X),st<=it)){this._addTextLine(X),L+=q,Y=Math.max(Y,st);break}}else break}else this._addTextLine(X),L+=q,Y=Math.max(Y,st),this._shouldHandleEllipsis(L)&&tt<et-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Q&&L+q>N)break}this.textHeight=z,this.textWidth=Y}_shouldHandleEllipsis(B){const z=+this.fontSize(),Y=this.lineHeight()*z,q=this.attrs.height,J=q!==a&&q!==void 0,I=this.padding(),K=q-I*2;return this.wrap()===C||J&&B+Y>K}_tryToAddEllipsisToLastLine(){const B=this.attrs.width,z=B!==a&&B!==void 0,Y=this.padding(),q=B-Y*2,J=this.ellipsis(),I=this.textArr[this.textArr.length-1];!I||!J||(z&&(this._getTextWidth(I.text+F)<q||(I.text=I.text.slice(0,I.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(I.text+F))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const B=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,z=this.hasShadow();return B&&z?!0:super._useBufferCanvas()}};return je.Text=H,H.prototype._fillFunc=O,H.prototype._strokeFunc=D,H.prototype.className=R,H.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,r._registerNode)(H),e.Factory.overWriteSetter(H,"width",(0,i.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(H,"height",(0,i.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(H,"direction",m),e.Factory.addGetterSetter(H,"fontFamily","Arial"),e.Factory.addGetterSetter(H,"fontSize",12,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"fontStyle",T),e.Factory.addGetterSetter(H,"fontVariant",T),e.Factory.addGetterSetter(H,"padding",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"align",u),e.Factory.addGetterSetter(H,"verticalAlign",S),e.Factory.addGetterSetter(H,"lineHeight",1,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"wrap",d),e.Factory.addGetterSetter(H,"ellipsis",!1,(0,i.getBooleanValidator)()),e.Factory.addGetterSetter(H,"letterSpacing",0,(0,i.getNumberValidator)()),e.Factory.addGetterSetter(H,"text","",(0,i.getStringValidator)()),e.Factory.addGetterSetter(H,"textDecoration",""),je}var bi={},so;function Ec(){if(so)return bi;so=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.TextPath=void 0;const t=At(),e=pt(),n=Et(),s=Lr(),i=Ba(),r=mt(),o=gt(),a="",h="normal";function m(w){w.fillText(this.partialText,0,0)}function p(w){w.strokeText(this.partialText,0,0)}let y=class extends n.Shape{constructor(w){super(w),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return s.Path.getPathLength(this.dataArray)}_getPointAtLength(w){if(!this.attrs.data)return null;const b=this.pathLength;return w-1>b?null:s.Path.getPointAtLengthOfDataArray(w,this.dataArray)}_readDataAttribute(){this.dataArray=s.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(w){w.setAttr("font",this._getContextFont()),w.setAttr("textBaseline",this.textBaseline()),w.setAttr("textAlign","left"),w.save();const b=this.textDecoration(),u=this.fill(),A=this.fontSize(),R=this.glyphInfo;b==="underline"&&w.beginPath();for(let S=0;S<R.length;S++){w.save();const v=R[S].p0;w.translate(v.x,v.y),w.rotate(R[S].rotation),this.partialText=R[S].text,w.fillStrokeShape(this),b==="underline"&&(S===0&&w.moveTo(0,A/2+1),w.lineTo(A,A/2+1)),w.restore()}b==="underline"&&(w.strokeStyle=u,w.lineWidth=A/20,w.stroke()),w.restore()}_hitFunc(w){w.beginPath();const b=this.glyphInfo;if(b.length>=1){const u=b[0].p0;w.moveTo(u.x,u.y)}for(let u=0;u<b.length;u++){const A=b[u].p1;w.lineTo(A.x,A.y)}w.setAttr("lineWidth",this.fontSize()),w.setAttr("strokeStyle",this.colorKey),w.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(w){return i.Text.prototype.setText.call(this,w)}_getContextFont(){return i.Text.prototype._getContextFont.call(this)}_getTextSize(w){const b=this.dummyCanvas.getContext("2d");b.save(),b.font=this._getContextFont();const u=b.measureText(w);return b.restore(),{width:u.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:w,height:b}=this._getTextSize(this.attrs.text);if(this.textWidth=w,this.textHeight=b,this.glyphInfo=[],!this.attrs.data)return null;const u=this.letterSpacing(),A=this.align(),R=this.kerningFunc(),S=Math.max(this.textWidth+((this.attrs.text||"").length-1)*u,0);let v=0;A==="center"&&(v=Math.max(0,this.pathLength/2-S/2)),A==="right"&&(v=Math.max(0,this.pathLength-S));const _=(0,i.stringToArray)(this.text());let T=v;for(let k=0;k<_.length;k++){const E=this._getPointAtLength(T);if(!E)return;let G=this._getTextSize(_[k]).width+u;if(_[k]===" "&&A==="justify"){const l=this.text().split(" ").length-1;G+=(this.pathLength-S)/l}const f=this._getPointAtLength(T+G);if(!f)return;const d=s.Path.getLineLength(E.x,E.y,f.x,f.y);let g=0;if(R)try{g=R(_[k-1],_[k])*this.fontSize()}catch{g=0}E.x+=g,f.x+=g,this.textWidth+=g;const C=s.Path.getPointOnLine(g+d/2,E.x,E.y,f.x,f.y),F=Math.atan2(f.y-E.y,f.x-E.x);this.glyphInfo.push({transposeX:C.x,transposeY:C.y,text:_[k],rotation:F,p0:E,p1:f}),T+=G}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const w=[];this.glyphInfo.forEach(function(T){w.push(T.p0.x),w.push(T.p0.y),w.push(T.p1.x),w.push(T.p1.y)});let b=w[0]||0,u=w[0]||0,A=w[1]||0,R=w[1]||0,S,v;for(let T=0;T<w.length/2;T++)S=w[T*2],v=w[T*2+1],b=Math.min(b,S),u=Math.max(u,S),A=Math.min(A,v),R=Math.max(R,v);const _=this.fontSize();return{x:b-_/2,y:A-_/2,width:u-b+_,height:R-A+_}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return bi.TextPath=y,y.prototype._fillFunc=m,y.prototype._strokeFunc=p,y.prototype._fillFuncHit=m,y.prototype._strokeFuncHit=p,y.prototype.className="TextPath",y.prototype._attrsAffectingSize=["text","fontSize","data"],(0,o._registerNode)(y),e.Factory.addGetterSetter(y,"data"),e.Factory.addGetterSetter(y,"fontFamily","Arial"),e.Factory.addGetterSetter(y,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(y,"fontStyle",h),e.Factory.addGetterSetter(y,"align","left"),e.Factory.addGetterSetter(y,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(y,"textBaseline","middle"),e.Factory.addGetterSetter(y,"fontVariant",h),e.Factory.addGetterSetter(y,"text",a),e.Factory.addGetterSetter(y,"textDecoration",""),e.Factory.addGetterSetter(y,"kerningFunc",void 0),bi}var xi={},oo;function Nc(){if(oo)return xi;oo=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Transformer=void 0;const t=At(),e=pt(),n=Ft(),s=Et(),i=Ua(),r=Gr(),o=gt(),a=mt(),h=gt(),m="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(d=>d+`.${m}`).join(" "),y="nodesRect",w=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],b={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},u="ontouchstart"in o.Konva._global;function A(d,g,C){if(d==="rotater")return C;g+=t.Util.degToRad(b[d]||0);const F=(t.Util.radToDeg(g)%360+360)%360;return t.Util._inRange(F,315+22.5,360)||t.Util._inRange(F,0,22.5)?"ns-resize":t.Util._inRange(F,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(F,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(F,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(F,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(F,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(F,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(F,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+F),"pointer")}const R=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],S=1e8;function v(d){return{x:d.x+d.width/2*Math.cos(d.rotation)+d.height/2*Math.sin(-d.rotation),y:d.y+d.height/2*Math.cos(d.rotation)+d.width/2*Math.sin(d.rotation)}}function _(d,g,C){const F=C.x+(d.x-C.x)*Math.cos(g)-(d.y-C.y)*Math.sin(g),l=C.y+(d.x-C.x)*Math.sin(g)+(d.y-C.y)*Math.cos(g);return{...d,rotation:d.rotation+g,x:F,y:l}}function T(d,g){const C=v(d);return _(d,g,C)}function k(d,g,C){let F=g;for(let l=0;l<d.length;l++){const x=o.Konva.getAngle(d[l]),c=Math.abs(x-g)%(Math.PI*2);Math.min(c,Math.PI*2-c)<C&&(F=x)}return F}let E=0,G=class extends r.Group{constructor(d){super(d),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}attachTo(d){return this.setNode(d),this}setNode(d){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([d])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return m+this._id}setNodes(d=[]){this._nodes&&this._nodes.length&&this.detach();const g=d.filter(C=>C.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=d=g,d.length===1&&this.useSingleNodeRotation()?this.rotation(d[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(C=>{const F=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=C._attrsAffectingSize.map(x=>x+"Change."+this._getEventNamespace()).join(" ");C.on(l,F),C.on(w.map(x=>x+`.${this._getEventNamespace()}`).join(" "),F),C.on(`absoluteTransformChange.${this._getEventNamespace()}`,F),this._proxyDrag(C)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(d){let g;d.on(`dragstart.${this._getEventNamespace()}`,C=>{g=d.getAbsolutePosition(),!this.isDragging()&&d!==this.findOne(".back")&&this.startDrag(C,!1)}),d.on(`dragmove.${this._getEventNamespace()}`,C=>{if(!g)return;const F=d.getAbsolutePosition(),l=F.x-g.x,x=F.y-g.y;this.nodes().forEach(c=>{if(c===d||c.isDragging())return;const P=c.getAbsolutePosition();c.setAbsolutePosition({x:P.x+l,y:P.y+x}),c.startDrag(C)}),g=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(d=>{d.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(y),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(y,this.__getNodeRect)}__getNodeShape(d,g=this.rotation(),C){const F=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=d.getAbsoluteScale(C),x=d.getAbsolutePosition(C),c=F.x*l.x-d.offsetX()*l.x,P=F.y*l.y-d.offsetY()*l.y,M=(o.Konva.getAngle(d.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),O={x:x.x+c*Math.cos(M)+P*Math.sin(-M),y:x.y+P*Math.cos(M)+c*Math.sin(M),width:F.width*l.x,height:F.height*l.y,rotation:M};return _(O,-o.Konva.getAngle(g),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-S,y:-S,width:0,height:0,rotation:0};const d=[];this.nodes().map(P=>{const M=P.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),O=[{x:M.x,y:M.y},{x:M.x+M.width,y:M.y},{x:M.x+M.width,y:M.y+M.height},{x:M.x,y:M.y+M.height}],D=P.getAbsoluteTransform();O.forEach(function(U){const H=D.point(U);d.push(H)})});const g=new t.Transform;g.rotate(-o.Konva.getAngle(this.rotation()));let C=1/0,F=1/0,l=-1/0,x=-1/0;d.forEach(function(P){const M=g.point(P);C===void 0&&(C=l=M.x,F=x=M.y),C=Math.min(C,M.x),F=Math.min(F,M.y),l=Math.max(l,M.x),x=Math.max(x,M.y)}),g.invert();const c=g.point({x:C,y:F});return{x:c.x,y:c.y,width:l-C,height:x-F,rotation:o.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),R.forEach(d=>{this._createAnchor(d)}),this._createAnchor("rotater")}_createAnchor(d){const g=new i.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:d+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:u?10:"auto"}),C=this;g.on("mousedown touchstart",function(F){C._handleMouseDown(F)}),g.on("dragstart",F=>{g.stopDrag(),F.cancelBubble=!0}),g.on("dragend",F=>{F.cancelBubble=!0}),g.on("mouseenter",()=>{const F=o.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),x=A(d,F,l);g.getStage().content&&(g.getStage().content.style.cursor=x),this._cursorChange=!0}),g.on("mouseout",()=>{g.getStage().content&&(g.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(g)}_createBack(){const d=new s.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(g,C){const F=C.getParent(),l=F.padding();g.beginPath(),g.rect(-l,-l,C.width()+l*2,C.height()+l*2),g.moveTo(C.width()/2,-l),F.rotateEnabled()&&F.rotateLineVisible()&&g.lineTo(C.width()/2,-F.rotateAnchorOffset()*t.Util._sign(C.height())-l),g.fillStrokeShape(C)},hitFunc:(g,C)=>{if(!this.shouldOverdrawWholeArea())return;const F=this.padding();g.beginPath(),g.rect(-F,-F,C.width()+F*2,C.height()+F*2),g.fillStrokeShape(C)}});this.add(d),this._proxyDrag(d),d.on("dragstart",g=>{g.cancelBubble=!0}),d.on("dragmove",g=>{g.cancelBubble=!0}),d.on("dragend",g=>{g.cancelBubble=!0}),this.on("dragmove",g=>{this.update()})}_handleMouseDown(d){if(this._transforming)return;this._movingAnchorName=d.target.name().split(" ")[0];const g=this._getNodeRect(),C=g.width,F=g.height,l=Math.sqrt(Math.pow(C,2)+Math.pow(F,2));this.sin=Math.abs(F/l),this.cos=Math.abs(C/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const x=d.target.getAbsolutePosition(),c=d.target.getStage().getPointerPosition();this._anchorDragOffset={x:c.x-x.x,y:c.y-x.y},E++,this._fire("transformstart",{evt:d.evt,target:this.getNode()}),this._nodes.forEach(P=>{P._fire("transformstart",{evt:d.evt,target:P})})}_handleMouseMove(d){let g,C,F;const l=this.findOne("."+this._movingAnchorName),x=l.getStage();x.setPointersPositions(d);const c=x.getPointerPosition();let P={x:c.x-this._anchorDragOffset.x,y:c.y-this._anchorDragOffset.y};const M=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(P=this.anchorDragBoundFunc()(M,P,d)),l.setAbsolutePosition(P);const O=l.getAbsolutePosition();if(M.x===O.x&&M.y===O.y)return;if(this._movingAnchorName==="rotater"){const Q=this._getNodeRect();g=l.x()-Q.width/2,C=-l.y()+Q.height/2;let Z=Math.atan2(-C,g)+Math.PI/2;Q.height<0&&(Z-=Math.PI);const it=o.Konva.getAngle(this.rotation())+Z,N=o.Konva.getAngle(this.rotationSnapTolerance()),L=k(this.rotationSnaps(),it,N)-Q.rotation,j=T(Q,L);this._fitNodesInto(j,d);return}const D=this.shiftBehavior();let U;D==="inverted"?U=this.keepRatio()&&!d.shiftKey:D==="none"?U=this.keepRatio():U=this.keepRatio()||d.shiftKey;var q=this.centeredScaling()||d.altKey;if(this._movingAnchorName==="top-left"){if(U){var H=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};F=Math.sqrt(Math.pow(H.x-l.x(),2)+Math.pow(H.y-l.y(),2));var B=this.findOne(".top-left").x()>H.x?-1:1,z=this.findOne(".top-left").y()>H.y?-1:1;g=F*this.cos*B,C=F*this.sin*z,this.findOne(".top-left").x(H.x-g),this.findOne(".top-left").y(H.y-C)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(U){var H=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};F=Math.sqrt(Math.pow(l.x()-H.x,2)+Math.pow(H.y-l.y(),2));var B=this.findOne(".top-right").x()<H.x?-1:1,z=this.findOne(".top-right").y()>H.y?-1:1;g=F*this.cos*B,C=F*this.sin*z,this.findOne(".top-right").x(H.x+g),this.findOne(".top-right").y(H.y-C)}var Y=l.position();this.findOne(".top-left").y(Y.y),this.findOne(".bottom-right").x(Y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(U){var H=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};F=Math.sqrt(Math.pow(H.x-l.x(),2)+Math.pow(l.y()-H.y,2));var B=H.x<l.x()?-1:1,z=l.y()<H.y?-1:1;g=F*this.cos*B,C=F*this.sin*z,l.x(H.x-g),l.y(H.y+C)}Y=l.position(),this.findOne(".top-left").x(Y.x),this.findOne(".bottom-right").y(Y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(U){var H=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};F=Math.sqrt(Math.pow(l.x()-H.x,2)+Math.pow(l.y()-H.y,2));var B=this.findOne(".bottom-right").x()<H.x?-1:1,z=this.findOne(".bottom-right").y()<H.y?-1:1;g=F*this.cos*B,C=F*this.sin*z,this.findOne(".bottom-right").x(H.x+g),this.findOne(".bottom-right").y(H.y+C)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var q=this.centeredScaling()||d.altKey;if(q){const Q=this.findOne(".top-left"),Z=this.findOne(".bottom-right"),it=Q.x(),N=Q.y(),L=this.getWidth()-Z.x(),j=this.getHeight()-Z.y();Z.move({x:-it,y:-N}),Q.move({x:L,y:j})}const J=this.findOne(".top-left").getAbsolutePosition();g=J.x,C=J.y;const I=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),K=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:g,y:C,width:I,height:K,rotation:o.Konva.getAngle(this.rotation())},d)}_handleMouseUp(d){this._removeEvents(d)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(d){var g;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const C=this.getNode();E--,this._fire("transformend",{evt:d,target:C}),(g=this.getLayer())===null||g===void 0||g.batchDraw(),C&&this._nodes.forEach(F=>{var l;F._fire("transformend",{evt:d,target:F}),(l=F.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(d,g){const C=this._getNodeRect(),F=1;if(t.Util._inRange(d.width,-this.padding()*2-F,F)){this.update();return}if(t.Util._inRange(d.height,-this.padding()*2-F,F)){this.update();return}const l=new t.Transform;if(l.rotate(o.Konva.getAngle(this.rotation())),this._movingAnchorName&&d.width<0&&this._movingAnchorName.indexOf("left")>=0){const U=l.point({x:-this.padding()*2,y:0});d.x+=U.x,d.y+=U.y,d.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y}else if(this._movingAnchorName&&d.width<0&&this._movingAnchorName.indexOf("right")>=0){const U=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,d.width+=this.padding()*2}if(this._movingAnchorName&&d.height<0&&this._movingAnchorName.indexOf("top")>=0){const U=l.point({x:0,y:-this.padding()*2});d.x+=U.x,d.y+=U.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,d.height+=this.padding()*2}else if(this._movingAnchorName&&d.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const U=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,d.height+=this.padding()*2}if(this.boundBoxFunc()){const U=this.boundBoxFunc()(C,d);U?d=U:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const x=1e7,c=new t.Transform;c.translate(C.x,C.y),c.rotate(C.rotation),c.scale(C.width/x,C.height/x);const P=new t.Transform,M=d.width/x,O=d.height/x;this.flipEnabled()===!1?(P.translate(d.x,d.y),P.rotate(d.rotation),P.translate(d.width<0?d.width:0,d.height<0?d.height:0),P.scale(Math.abs(M),Math.abs(O))):(P.translate(d.x,d.y),P.rotate(d.rotation),P.scale(M,O));const D=P.multiply(c.invert());this._nodes.forEach(U=>{var H;const B=U.getParent().getAbsoluteTransform(),z=U.getTransform().copy();z.translate(U.offsetX(),U.offsetY());const Y=new t.Transform;Y.multiply(B.copy().invert()).multiply(D).multiply(B).multiply(z);const q=Y.decompose();U.setAttrs(q),(H=U.getLayer())===null||H===void 0||H.batchDraw()}),this.rotation(t.Util._getRotation(d.rotation)),this._nodes.forEach(U=>{this._fire("transform",{evt:g,target:U}),U._fire("transform",{evt:g,target:U})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(d,g){this.findOne(d).setAttrs(g)}update(){var d;const g=this._getNodeRect();this.rotation(t.Util._getRotation(g.rotation));const C=g.width,F=g.height,l=this.enabledAnchors(),x=this.resizeEnabled(),c=this.padding(),P=this.anchorSize(),M=this.find("._anchor");M.forEach(D=>{D.setAttrs({width:P,height:P,offsetX:P/2,offsetY:P/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:P/2+c,offsetY:P/2+c,visible:x&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:C/2,y:0,offsetY:P/2+c,visible:x&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:C,y:0,offsetX:P/2-c,offsetY:P/2+c,visible:x&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:F/2,offsetX:P/2+c,visible:x&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:C,y:F/2,offsetX:P/2-c,visible:x&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:F,offsetX:P/2+c,offsetY:P/2-c,visible:x&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:C/2,y:F,offsetY:P/2-c,visible:x&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:C,y:F,offsetX:P/2-c,offsetY:P/2-c,visible:x&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:C/2,y:-this.rotateAnchorOffset()*t.Util._sign(F)-c,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:C,height:F,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const O=this.anchorStyleFunc();O&&M.forEach(D=>{O(D)}),(d=this.getLayer())===null||d===void 0||d.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const d=this.findOne("."+this._movingAnchorName);d&&d.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return n.Node.prototype.toObject.call(this)}clone(d){return n.Node.prototype.clone.call(this,d)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};xi.Transformer=G,G.isTransforming=()=>E>0;function f(d){return d instanceof Array||t.Util.warn("enabledAnchors value should be an array"),d instanceof Array&&d.forEach(function(g){R.indexOf(g)===-1&&t.Util.warn("Unknown anchor name: "+g+". Available names are: "+R.join(", "))}),d||[]}return G.prototype.className="Transformer",(0,h._registerNode)(G),e.Factory.addGetterSetter(G,"enabledAnchors",R,f),e.Factory.addGetterSetter(G,"flipEnabled",!0,(0,a.getBooleanValidator)()),e.Factory.addGetterSetter(G,"resizeEnabled",!0),e.Factory.addGetterSetter(G,"anchorSize",10,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"rotateEnabled",!0),e.Factory.addGetterSetter(G,"rotateLineVisible",!0),e.Factory.addGetterSetter(G,"rotationSnaps",[]),e.Factory.addGetterSetter(G,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(G,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"borderEnabled",!0),e.Factory.addGetterSetter(G,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(G,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"anchorFill","white"),e.Factory.addGetterSetter(G,"anchorCornerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(G,"borderStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"borderDash"),e.Factory.addGetterSetter(G,"keepRatio",!0),e.Factory.addGetterSetter(G,"shiftBehavior","default"),e.Factory.addGetterSetter(G,"centeredScaling",!1),e.Factory.addGetterSetter(G,"ignoreStroke",!1),e.Factory.addGetterSetter(G,"padding",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"nodes"),e.Factory.addGetterSetter(G,"node"),e.Factory.addGetterSetter(G,"boundBoxFunc"),e.Factory.addGetterSetter(G,"anchorDragBoundFunc"),e.Factory.addGetterSetter(G,"anchorStyleFunc"),e.Factory.addGetterSetter(G,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(G,"useSingleNodeRotation",!0),e.Factory.backCompat(G,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),xi}var wi={},ao;function Dc(){if(ao)return wi;ao=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Wedge=void 0;const t=pt(),e=Et(),n=gt(),s=mt(),i=gt();let r=class extends e.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,n.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return wi.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1),t.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),wi}var Si={},lo;function Gc(){if(lo)return Si;lo=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Blur=void 0;const t=pt(),e=Ft(),n=mt();function s(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(h,m){const p=h.data,y=h.width,w=h.height;let b,u,A,R,S,v,_,T,k,E,G,f,d,g,C,F,l,x,c,P,M,O,D,U;const H=m+m+1,B=y-1,z=w-1,Y=m+1,q=Y*(Y+1)/2,J=new s,I=i[m],K=r[m];let Q=null,Z=J,it=null,N=null;for(A=1;A<H;A++)Z=Z.next=new s,A===Y&&(Q=Z);for(Z.next=J,_=v=0,u=0;u<w;u++){for(F=l=x=c=T=k=E=G=0,f=Y*(P=p[v]),d=Y*(M=p[v+1]),g=Y*(O=p[v+2]),C=Y*(D=p[v+3]),T+=q*P,k+=q*M,E+=q*O,G+=q*D,Z=J,A=0;A<Y;A++)Z.r=P,Z.g=M,Z.b=O,Z.a=D,Z=Z.next;for(A=1;A<Y;A++)R=v+((B<A?B:A)<<2),T+=(Z.r=P=p[R])*(U=Y-A),k+=(Z.g=M=p[R+1])*U,E+=(Z.b=O=p[R+2])*U,G+=(Z.a=D=p[R+3])*U,F+=P,l+=M,x+=O,c+=D,Z=Z.next;for(it=J,N=Q,b=0;b<y;b++)p[v+3]=D=G*I>>K,D!==0?(D=255/D,p[v]=(T*I>>K)*D,p[v+1]=(k*I>>K)*D,p[v+2]=(E*I>>K)*D):p[v]=p[v+1]=p[v+2]=0,T-=f,k-=d,E-=g,G-=C,f-=it.r,d-=it.g,g-=it.b,C-=it.a,R=_+((R=b+m+1)<B?R:B)<<2,F+=it.r=p[R],l+=it.g=p[R+1],x+=it.b=p[R+2],c+=it.a=p[R+3],T+=F,k+=l,E+=x,G+=c,it=it.next,f+=P=N.r,d+=M=N.g,g+=O=N.b,C+=D=N.a,F-=P,l-=M,x-=O,c-=D,N=N.next,v+=4;_+=y}for(b=0;b<y;b++){for(l=x=c=F=k=E=G=T=0,v=b<<2,f=Y*(P=p[v]),d=Y*(M=p[v+1]),g=Y*(O=p[v+2]),C=Y*(D=p[v+3]),T+=q*P,k+=q*M,E+=q*O,G+=q*D,Z=J,A=0;A<Y;A++)Z.r=P,Z.g=M,Z.b=O,Z.a=D,Z=Z.next;for(S=y,A=1;A<=m;A++)v=S+b<<2,T+=(Z.r=P=p[v])*(U=Y-A),k+=(Z.g=M=p[v+1])*U,E+=(Z.b=O=p[v+2])*U,G+=(Z.a=D=p[v+3])*U,F+=P,l+=M,x+=O,c+=D,Z=Z.next,A<z&&(S+=y);for(v=b,it=J,N=Q,u=0;u<w;u++)R=v<<2,p[R+3]=D=G*I>>K,D>0?(D=255/D,p[R]=(T*I>>K)*D,p[R+1]=(k*I>>K)*D,p[R+2]=(E*I>>K)*D):p[R]=p[R+1]=p[R+2]=0,T-=f,k-=d,E-=g,G-=C,f-=it.r,d-=it.g,g-=it.b,C-=it.a,R=b+((R=u+Y)<z?R:z)*y<<2,T+=F+=it.r=p[R],k+=l+=it.g=p[R+1],E+=x+=it.b=p[R+2],G+=c+=it.a=p[R+3],it=it.next,f+=P=N.r,d+=M=N.g,g+=O=N.b,C+=D=N.a,F-=P,l-=M,x-=O,c-=D,N=N.next,v+=y}}const a=function(h){const m=Math.round(this.blurRadius());m>0&&o(h,m)};return Si.Blur=a,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Si}var Ci={},ho;function Ic(){if(ho)return Ci;ho=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Brighten=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=this.brightness()*255,o=i.data,a=o.length;for(let h=0;h<a;h+=4)o[h]+=r,o[h+1]+=r,o[h+2]+=r};return Ci.Brighten=s,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Ci}var Pi={},co;function Lc(){if(co)return Pi;co=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Contrast=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=Math.pow((this.contrast()+100)/100,2),o=i.data,a=o.length;let h=150,m=150,p=150;for(let y=0;y<a;y+=4)h=o[y],m=o[y+1],p=o[y+2],h/=255,h-=.5,h*=r,h+=.5,h*=255,m/=255,m-=.5,m*=r,m+=.5,m*=255,p/=255,p-=.5,p*=r,p+=.5,p*=255,h=h<0?0:h>255?255:h,m=m<0?0:m>255?255:m,p=p<0?0:p>255?255:p,o[y]=h,o[y+1]=m,o[y+2]=p};return Pi.Contrast=s,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Pi}var Ti={},uo;function Uc(){if(uo)return Ti;uo=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Emboss=void 0;const t=pt(),e=Ft(),n=At(),s=mt(),i=function(r){const o=this.embossStrength()*10,a=this.embossWhiteLevel()*255,h=this.embossDirection(),m=this.embossBlend(),p=r.data,y=r.width,w=r.height,b=y*4;let u=0,A=0,R=w;switch(h){case"top-left":u=-1,A=-1;break;case"top":u=-1,A=0;break;case"top-right":u=-1,A=1;break;case"right":u=0,A=1;break;case"bottom-right":u=1,A=1;break;case"bottom":u=1,A=0;break;case"bottom-left":u=1,A=-1;break;case"left":u=0,A=-1;break;default:n.Util.error("Unknown emboss direction: "+h)}do{const S=(R-1)*b;let v=u;R+v<1&&(v=0),R+v>w&&(v=0);const _=(R-1+v)*y*4;let T=y;do{const k=S+(T-1)*4;let E=A;T+E<1&&(E=0),T+E>y&&(E=0);const G=_+(T-1+E)*4,f=p[k]-p[G],d=p[k+1]-p[G+1],g=p[k+2]-p[G+2];let C=f;const F=C>0?C:-C,l=d>0?d:-d,x=g>0?g:-g;if(l>F&&(C=d),x>F&&(C=g),C*=o,m){const c=p[k]+C,P=p[k+1]+C,M=p[k+2]+C;p[k]=c>255?255:c<0?0:c,p[k+1]=P>255?255:P<0?0:P,p[k+2]=M>255?255:M<0?0:M}else{let c=a-C;c<0?c=0:c>255&&(c=255),p[k]=p[k+1]=p[k+2]=c}}while(--T)}while(--R)};return Ti.Emboss=i,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Ti}var Ai={},fo;function Bc(){if(fo)return Ai;fo=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Enhance=void 0;const t=pt(),e=Ft(),n=mt();function s(r,o,a,h,m){const p=a-o,y=m-h;if(p===0)return h+y/2;if(y===0)return h;let w=(r-o)/p;return w=y*w+h,w}const i=function(r){const o=r.data,a=o.length;let h=o[0],m=h,p,y=o[1],w=y,b,u=o[2],A=u,R;const S=this.enhance();if(S===0)return;for(let C=0;C<a;C+=4)p=o[C+0],p<h?h=p:p>m&&(m=p),b=o[C+1],b<y?y=b:b>w&&(w=b),R=o[C+2],R<u?u=R:R>A&&(A=R);m===h&&(m=255,h=0),w===y&&(w=255,y=0),A===u&&(A=255,u=0);let v,_,T,k,E,G,f,d,g;S>0?(_=m+S*(255-m),T=h-S*(h-0),E=w+S*(255-w),G=y-S*(y-0),d=A+S*(255-A),g=u-S*(u-0)):(v=(m+h)*.5,_=m+S*(m-v),T=h+S*(h-v),k=(w+y)*.5,E=w+S*(w-k),G=y+S*(y-k),f=(A+u)*.5,d=A+S*(A-f),g=u+S*(u-f));for(let C=0;C<a;C+=4)o[C+0]=s(o[C+0],h,m,T,_),o[C+1]=s(o[C+1],y,w,G,E),o[C+2]=s(o[C+2],u,A,g,d)};return Ai.Enhance=i,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Ai}var Mi={},go;function Hc(){if(go)return Mi;go=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Grayscale=void 0;const t=function(e){const n=e.data,s=n.length;for(let i=0;i<s;i+=4){const r=.34*n[i]+.5*n[i+1]+.16*n[i+2];n[i]=r,n[i+1]=r,n[i+2]=r}};return Mi.Grayscale=t,Mi}var Fi={},po;function jc(){if(po)return Fi;po=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.HSL=void 0;const t=pt(),e=Ft(),n=mt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter);const s=function(i){const r=i.data,o=r.length,a=1,h=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,p=this.luminance()*127,y=a*h*Math.cos(m*Math.PI/180),w=a*h*Math.sin(m*Math.PI/180),b=.299*a+.701*y+.167*w,u=.587*a-.587*y+.33*w,A=.114*a-.114*y-.497*w,R=.299*a-.299*y-.328*w,S=.587*a+.413*y+.035*w,v=.114*a-.114*y+.293*w,_=.299*a-.3*y+1.25*w,T=.587*a-.586*y-1.05*w,k=.114*a+.886*y-.2*w;let E,G,f,d;for(let g=0;g<o;g+=4)E=r[g+0],G=r[g+1],f=r[g+2],d=r[g+3],r[g+0]=b*E+u*G+A*f+p,r[g+1]=R*E+S*G+v*f+p,r[g+2]=_*E+T*G+k*f+p,r[g+3]=d};return Fi.HSL=s,Fi}var ki={},mo;function Vc(){if(mo)return ki;mo=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.HSV=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=i.data,o=r.length,a=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),m=Math.abs(this.hue()+360)%360,p=a*h*Math.cos(m*Math.PI/180),y=a*h*Math.sin(m*Math.PI/180),w=.299*a+.701*p+.167*y,b=.587*a-.587*p+.33*y,u=.114*a-.114*p-.497*y,A=.299*a-.299*p-.328*y,R=.587*a+.413*p+.035*y,S=.114*a-.114*p+.293*y,v=.299*a-.3*p+1.25*y,_=.587*a-.586*p-1.05*y,T=.114*a+.886*p-.2*y;let k,E,G,f;for(let d=0;d<o;d+=4)k=r[d+0],E=r[d+1],G=r[d+2],f=r[d+3],r[d+0]=w*k+b*E+u*G,r[d+1]=A*k+R*E+S*G,r[d+2]=v*k+_*E+T*G,r[d+3]=f};return ki.HSV=s,t.Factory.addGetterSetter(e.Node,"hue",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),ki}var Ri={},vo;function Wc(){if(vo)return Ri;vo=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Invert=void 0;const t=function(e){const n=e.data,s=n.length;for(let i=0;i<s;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2]};return Ri.Invert=t,Ri}var Oi={},_o;function Kc(){if(_o)return Oi;_o=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Kaleidoscope=void 0;const t=pt(),e=Ft(),n=At(),s=mt(),i=function(a,h,m){const p=a.data,y=h.data,w=a.width,b=a.height,u=m.polarCenterX||w/2,A=m.polarCenterY||b/2;let R=Math.sqrt(u*u+A*A),S=w-u,v=b-A;const _=Math.sqrt(S*S+v*v);R=_>R?_:R;const T=b,k=w,E=360/k*Math.PI/180;for(let G=0;G<k;G+=1){const f=Math.sin(G*E),d=Math.cos(G*E);for(let g=0;g<T;g+=1){S=Math.floor(u+R*g/T*d),v=Math.floor(A+R*g/T*f);let C=(v*w+S)*4;const F=p[C+0],l=p[C+1],x=p[C+2],c=p[C+3];C=(G+g*w)*4,y[C+0]=F,y[C+1]=l,y[C+2]=x,y[C+3]=c}}},r=function(a,h,m){const p=a.data,y=h.data,w=a.width,b=a.height,u=m.polarCenterX||w/2,A=m.polarCenterY||b/2;let R=Math.sqrt(u*u+A*A),S=w-u,v=b-A;const _=Math.sqrt(S*S+v*v);R=_>R?_:R;const T=b,k=w,E=0;let G,f;for(S=0;S<w;S+=1)for(v=0;v<b;v+=1){const d=S-u,g=v-A,C=Math.sqrt(d*d+g*g)*T/R;let F=(Math.atan2(g,d)*180/Math.PI+360+E)%360;F=F*k/360,G=Math.floor(F),f=Math.floor(C);let l=(f*w+G)*4;const x=p[l+0],c=p[l+1],P=p[l+2],M=p[l+3];l=(v*w+S)*4,y[l+0]=x,y[l+1]=c,y[l+2]=P,y[l+3]=M}},o=function(a){const h=a.width,m=a.height;let p,y,w,b,u,A,R,S,v,_,T=Math.round(this.kaleidoscopePower());const k=Math.round(this.kaleidoscopeAngle()),E=Math.floor(h*(k%360)/360);if(T<1)return;const G=n.Util.createCanvasElement();G.width=h,G.height=m;const f=G.getContext("2d").getImageData(0,0,h,m);n.Util.releaseCanvas(G),i(a,f,{polarCenterX:h/2,polarCenterY:m/2});let d=h/Math.pow(2,T);for(;d<=8;)d=d*2,T-=1;d=Math.ceil(d);let g=d,C=0,F=g,l=1;for(E+d>h&&(C=g,F=0,l=-1),y=0;y<m;y+=1)for(p=C;p!==F;p+=l)w=Math.round(p+E)%h,v=(h*y+w)*4,u=f.data[v+0],A=f.data[v+1],R=f.data[v+2],S=f.data[v+3],_=(h*y+p)*4,f.data[_+0]=u,f.data[_+1]=A,f.data[_+2]=R,f.data[_+3]=S;for(y=0;y<m;y+=1)for(g=Math.floor(d),b=0;b<T;b+=1){for(p=0;p<g+1;p+=1)v=(h*y+p)*4,u=f.data[v+0],A=f.data[v+1],R=f.data[v+2],S=f.data[v+3],_=(h*y+g*2-p-1)*4,f.data[_+0]=u,f.data[_+1]=A,f.data[_+2]=R,f.data[_+3]=S;g*=2}r(f,a,{polarRotation:0})};return Oi.Kaleidoscope=o,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),Oi}var Ei={},yo;function zc(){if(yo)return Ei;yo=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Mask=void 0;const t=pt(),e=Ft(),n=mt();function s(w,b,u){let A=(u*w.width+b)*4;const R=[];return R.push(w.data[A++],w.data[A++],w.data[A++],w.data[A++]),R}function i(w,b){return Math.sqrt(Math.pow(w[0]-b[0],2)+Math.pow(w[1]-b[1],2)+Math.pow(w[2]-b[2],2))}function r(w){const b=[0,0,0];for(let u=0;u<w.length;u++)b[0]+=w[u][0],b[1]+=w[u][1],b[2]+=w[u][2];return b[0]/=w.length,b[1]/=w.length,b[2]/=w.length,b}function o(w,b){const u=s(w,0,0),A=s(w,w.width-1,0),R=s(w,0,w.height-1),S=s(w,w.width-1,w.height-1),v=b||10;if(i(u,A)<v&&i(A,S)<v&&i(S,R)<v&&i(R,u)<v){const _=r([A,u,S,R]),T=[];for(let k=0;k<w.width*w.height;k++){const E=i(_,[w.data[k*4],w.data[k*4+1],w.data[k*4+2]]);T[k]=E<v?0:255}return T}}function a(w,b){for(let u=0;u<w.width*w.height;u++)w.data[4*u+3]=b[u]}function h(w,b,u){const A=[1,1,1,1,0,1,1,1,1],R=Math.round(Math.sqrt(A.length)),S=Math.floor(R/2),v=[];for(let _=0;_<u;_++)for(let T=0;T<b;T++){const k=_*b+T;let E=0;for(let G=0;G<R;G++)for(let f=0;f<R;f++){const d=_+G-S,g=T+f-S;if(d>=0&&d<u&&g>=0&&g<b){const C=d*b+g,F=A[G*R+f];E+=w[C]*F}}v[k]=E===255*8?255:0}return v}function m(w,b,u){const A=[1,1,1,1,1,1,1,1,1],R=Math.round(Math.sqrt(A.length)),S=Math.floor(R/2),v=[];for(let _=0;_<u;_++)for(let T=0;T<b;T++){const k=_*b+T;let E=0;for(let G=0;G<R;G++)for(let f=0;f<R;f++){const d=_+G-S,g=T+f-S;if(d>=0&&d<u&&g>=0&&g<b){const C=d*b+g,F=A[G*R+f];E+=w[C]*F}}v[k]=E>=255*4?255:0}return v}function p(w,b,u){const A=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],R=Math.round(Math.sqrt(A.length)),S=Math.floor(R/2),v=[];for(let _=0;_<u;_++)for(let T=0;T<b;T++){const k=_*b+T;let E=0;for(let G=0;G<R;G++)for(let f=0;f<R;f++){const d=_+G-S,g=T+f-S;if(d>=0&&d<u&&g>=0&&g<b){const C=d*b+g,F=A[G*R+f];E+=w[C]*F}}v[k]=E}return v}const y=function(w){const b=this.threshold();let u=o(w,b);return u&&(u=h(u,w.width,w.height),u=m(u,w.width,w.height),u=p(u,w.width,w.height),a(w,u)),w};return Ei.Mask=y,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Ei}var Ni={},bo;function $c(){if(bo)return Ni;bo=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Noise=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=this.noise()*255,o=i.data,a=o.length,h=r/2;for(let m=0;m<a;m+=4)o[m+0]+=h-2*h*Math.random(),o[m+1]+=h-2*h*Math.random(),o[m+2]+=h-2*h*Math.random()};return Ni.Noise=s,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Ni}var Di={},xo;function Xc(){if(xo)return Di;xo=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Pixelate=void 0;const t=pt(),e=At(),n=Ft(),s=mt(),i=function(r){let o=Math.ceil(this.pixelSize()),a=r.width,h=r.height,m,p,y,w,b,u,A,R=Math.ceil(a/o),S=Math.ceil(h/o),v,_,T,k,E,G,f,d=r.data;if(o<=0){e.Util.error("pixelSize value can not be <= 0");return}for(E=0;E<R;E+=1)for(G=0;G<S;G+=1){for(w=0,b=0,u=0,A=0,v=E*o,_=v+o,T=G*o,k=T+o,f=0,m=v;m<_;m+=1)if(!(m>=a))for(p=T;p<k;p+=1)p>=h||(y=(a*p+m)*4,w+=d[y+0],b+=d[y+1],u+=d[y+2],A+=d[y+3],f+=1);for(w=w/f,b=b/f,u=u/f,A=A/f,m=v;m<_;m+=1)if(!(m>=a))for(p=T;p<k;p+=1)p>=h||(y=(a*p+m)*4,d[y+0]=w,d[y+1]=b,d[y+2]=u,d[y+3]=A)}};return Di.Pixelate=i,t.Factory.addGetterSetter(n.Node,"pixelSize",8,(0,s.getNumberValidator)(),t.Factory.afterSetFilter),Di}var Gi={},wo;function Yc(){if(wo)return Gi;wo=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.Posterize=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=Math.round(this.levels()*254)+1,o=i.data,a=o.length,h=255/r;for(let m=0;m<a;m+=1)o[m]=Math.floor(o[m]/h)*h};return Gi.Posterize=s,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Gi}var Ii={},So;function qc(){if(So)return Ii;So=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.RGB=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=i.data,o=r.length,a=this.red(),h=this.green(),m=this.blue();for(let p=0;p<o;p+=4){const y=(.34*r[p]+.5*r[p+1]+.16*r[p+2])/255;r[p]=y*a,r[p+1]=y*h,r[p+2]=y*m,r[p+3]=r[p+3]}};return Ii.RGB=s,t.Factory.addGetterSetter(e.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),Ii}var Li={},Co;function Qc(){if(Co)return Li;Co=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.RGBA=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=i.data,o=r.length,a=this.red(),h=this.green(),m=this.blue(),p=this.alpha();for(let y=0;y<o;y+=4){const w=1-p;r[y]=a*p+r[y]*w,r[y+1]=h*p+r[y+1]*w,r[y+2]=m*p+r[y+2]*w}};return Li.RGBA=s,t.Factory.addGetterSetter(e.Node,"red",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"green",0,function(i){return this._filterUpToDate=!1,i>255?255:i<0?0:Math.round(i)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(i){return this._filterUpToDate=!1,i>1?1:i<0?0:i}),Li}var Ui={},Po;function Jc(){if(Po)return Ui;Po=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Sepia=void 0;const t=function(e){const n=e.data,s=n.length;for(let i=0;i<s;i+=4){const r=n[i+0],o=n[i+1],a=n[i+2];n[i+0]=Math.min(255,r*.393+o*.769+a*.189),n[i+1]=Math.min(255,r*.349+o*.686+a*.168),n[i+2]=Math.min(255,r*.272+o*.534+a*.131)}};return Ui.Sepia=t,Ui}var Bi={},To;function Zc(){if(To)return Bi;To=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Solarize=void 0;const t=function(e){const n=e.data,s=e.width,i=e.height,r=s*4;let o=i;do{const a=(o-1)*r;let h=s;do{const m=a+(h-1)*4;let p=n[m],y=n[m+1],w=n[m+2];p>127&&(p=255-p),y>127&&(y=255-y),w>127&&(w=255-w),n[m]=p,n[m+1]=y,n[m+2]=w}while(--h)}while(--o)};return Bi.Solarize=t,Bi}var Hi={},Ao;function tu(){if(Ao)return Hi;Ao=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Threshold=void 0;const t=pt(),e=Ft(),n=mt(),s=function(i){const r=this.threshold()*255,o=i.data,a=o.length;for(let h=0;h<a;h+=1)o[h]=o[h]<r?0:255};return Hi.Threshold=s,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,n.getNumberValidator)(),t.Factory.afterSetFilter),Hi}var Mo;function eu(){if(Mo)return ei;Mo=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Konva=void 0;const t=xc(),e=wc(),n=Cc(),s=Pc(),i=Tc(),r=Ac(),o=Mc(),a=Ia(),h=Lr(),m=Ua(),p=Fc(),y=kc(),w=Rc(),b=Oc(),u=Ba(),A=Ec(),R=Nc(),S=Dc(),v=Gc(),_=Ic(),T=Lc(),k=Uc(),E=Bc(),G=Hc(),f=jc(),d=Vc(),g=Wc(),C=Kc(),F=zc(),l=$c(),x=Xc(),c=Yc(),P=qc(),M=Qc(),O=Jc(),D=Zc(),U=tu();return ei.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:s.Circle,Ellipse:i.Ellipse,Image:r.Image,Label:o.Label,Tag:o.Tag,Line:a.Line,Path:h.Path,Rect:m.Rect,RegularPolygon:p.RegularPolygon,Ring:y.Ring,Sprite:w.Sprite,Star:b.Star,Text:u.Text,TextPath:A.TextPath,Transformer:R.Transformer,Wedge:S.Wedge,Filters:{Blur:v.Blur,Brighten:_.Brighten,Contrast:T.Contrast,Emboss:k.Emboss,Enhance:E.Enhance,Grayscale:G.Grayscale,HSL:f.HSL,HSV:d.HSV,Invert:g.Invert,Kaleidoscope:C.Kaleidoscope,Mask:F.Mask,Noise:l.Noise,Pixelate:x.Pixelate,Posterize:c.Posterize,RGB:P.RGB,RGBA:M.RGBA,Sepia:O.Sepia,Solarize:D.Solarize,Threshold:U.Threshold}}),ei}var iu=vn.exports,Fo;function nu(){if(Fo)return vn.exports;Fo=1,Object.defineProperty(iu,"__esModule",{value:!0});const t=eu();return vn.exports=t.Konva,vn.exports}var ru=nu();const wt=vc(ru);function Pn(t){if(!wt.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const ko={key:!0,style:!0,elm:!0,isRootInsert:!0},qn=".vue-konva-event";function Ha(t,e,n,s){const i=t.__konvaNode,r={};let o=!1;for(let a in n){if(ko.hasOwnProperty(a))continue;const h=a.slice(0,2)==="on",m=n[a]!==e[a];if(h&&m){let p=a.slice(2).toLowerCase();p.slice(0,7)==="content"&&(p="content"+p.slice(7,1).toUpperCase()+p.slice(8)),i==null||i.off(p+qn,n[a])}!e.hasOwnProperty(a)&&(i==null||i.setAttr(a,void 0))}for(let a in e){if(ko.hasOwnProperty(a))continue;let h=a.slice(0,2)==="on";const m=n[a]!==e[a];if(h&&m){let p=a.slice(2).toLowerCase();p.slice(0,7)==="content"&&(p="content"+p.slice(7,1).toUpperCase()+p.slice(8)),e[a]&&(i==null||i.off(p+qn),i==null||i.on(p+qn,e[a]))}!h&&(e[a]!==n[a]||s&&e[a]!==(i==null?void 0:i.getAttr(a)))&&(o=!0,r[a]=e[a])}o&&i&&(i.setAttrs(r),Pn(i))}const su="v";function ou(t){function e(n){return n!=null&&n.__konvaNode?n:n!=null&&n.parent?e(n.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function ja(t){return t.component?t.component.__konvaNode||ja(t.component.subTree):null}function au(t){const{el:e,component:n}=t,s=ja(t);if(e!=null&&e.tagName&&n&&!s){const i=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${i}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return s}function lu(t){const e=i=>!!(i!=null&&i.hasOwnProperty("component")),n=i=>Array.isArray(i),s=i=>e(i)?[i,...s(i.children)]:n(i)?i.flatMap(s):[];return s(t.children)}function Va(t,e){const n=lu(t),s=[];n.forEach(r=>{const o=au(r);o&&s.push(o)});let i=!1;s.forEach((r,o)=>{r.getZIndex()!==o&&(r.setZIndex(o),i=!0)}),i&&Pn(e)}const hu=En({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:n,expose:s}){const i=Er();if(!i)return;const r=sn({}),o=Ht(null),a=new wt.Stage({width:t.config.width,height:t.config.height,container:document.createElement("div")});i.__konvaNode=a,p();function h(){return i==null?void 0:i.__konvaNode}function m(){return i==null?void 0:i.__konvaNode}function p(){if(!i)return;const y=r||{},w={...e,...t.config};Ha(i,w,y,t.__useStrictMode),Object.assign(r,w)}return Dn(()=>{o.value&&(o.value.innerHTML="",a.container(o.value)),p()}),Fr(()=>{p(),Va(i.subTree,a)}),la(()=>{a.destroy()}),Yi(()=>t.config,p,{deep:!0}),s({getStage:m,getNode:h}),console.log(e),()=>{var y;return Oa("div",{ref:o,style:e==null?void 0:e.style},(y=n.default)==null?void 0:y.call(n))}}}),cu=".vue-konva-event",uu={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function du(t,e){return En({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(n,{attrs:s,slots:i,expose:r}){const o=Er();if(!o)return;const a=sn({}),h=new e;o.__konvaNode=h,o.vnode.__konvaNode=h,y();function m(){return o==null?void 0:o.__konvaNode}function p(){return o==null?void 0:o.__konvaNode}function y(){if(!o)return;const b={};for(const R in o==null?void 0:o.vnode.props)R.slice(0,2)==="on"&&(b[R]=o.vnode.props[R]);const u=a||{},A={...s,...n.config,...b};Ha(o,A,u,n.__useStrictMode),Object.assign(a,A)}Dn(()=>{var b;const u=(b=ou(o))==null?void 0:b.__konvaNode;u&&"add"in u&&u.add(h),Pn(h)}),kr(()=>{Pn(h),h.destroy(),h.off(cu)}),Fr(()=>{y(),Va(o.subTree,h)}),Yi(()=>n.config,y,{deep:!0}),r({getStage:p,getNode:m});const w=uu.hasOwnProperty(t);return()=>{var b;return w?Oa("template",{},(b=i.default)==null?void 0:b.call(i)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const fu={install:(t,e)=>{const n=(e==null?void 0:e.prefix)||su,s={Arc:wt.Arc,Arrow:wt.Arrow,Circle:wt.Circle,Ellipse:wt.Ellipse,FastLayer:wt.FastLayer,Group:wt.Group,Image:wt.Image,Label:wt.Label,Layer:wt.Layer,Line:wt.Line,Path:wt.Path,Rect:wt.Rect,RegularPolygon:wt.RegularPolygon,Ring:wt.Ring,Shape:wt.Shape,Sprite:wt.Sprite,Star:wt.Star,Tag:wt.Tag,Text:wt.Text,TextPath:wt.TextPath,Transformer:wt.Transformer,Wedge:wt.Wedge,...e==null?void 0:e.customNodes};[hu,...Object.entries(s).map(([i,r])=>du(i,r))].forEach(i=>{t.component(`${n}${i.name}`,i)})}};var gu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Qn=Math.ceil,Jt=Math.floor,zt="[BigNumber Error] ",Ro=zt+"Number primitive has more than 15 significant digits: ",ne=1e14,ht=14,Jn=9007199254740991,Zn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ce=1e7,Ot=1e9;function Wa(t){var e,n,s,i=v.prototype={constructor:v,toString:null,valueOf:null},r=new v(1),o=20,a=4,h=-7,m=21,p=-1e7,y=1e7,w=!1,b=1,u=0,A={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},R="0123456789abcdefghijklmnopqrstuvwxyz",S=!0;function v(f,d){var g,C,F,l,x,c,P,M,O=this;if(!(O instanceof v))return new v(f,d);if(d==null){if(f&&f._isBigNumber===!0){O.s=f.s,!f.c||f.e>y?O.c=O.e=null:f.e<p?O.c=[O.e=0]:(O.e=f.e,O.c=f.c.slice());return}if((c=typeof f=="number")&&f*0==0){if(O.s=1/f<0?(f=-f,-1):1,f===~~f){for(l=0,x=f;x>=10;x/=10,l++);l>y?O.c=O.e=null:(O.e=l,O.c=[f]);return}M=String(f)}else{if(!gu.test(M=String(f)))return s(O,M,c);O.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(l=M.indexOf("."))>-1&&(M=M.replace(".","")),(x=M.search(/e/i))>0?(l<0&&(l=x),l+=+M.slice(x+1),M=M.substring(0,x)):l<0&&(l=M.length)}else{if(Ct(d,2,R.length,"Base"),d==10&&S)return O=new v(f),E(O,o+O.e+1,a);if(M=String(f),c=typeof f=="number"){if(f*0!=0)return s(O,M,c,d);if(O.s=1/f<0?(M=M.slice(1),-1):1,v.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error(Ro+f)}else O.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(g=R.slice(0,d),l=x=0,P=M.length;x<P;x++)if(g.indexOf(C=M.charAt(x))<0){if(C=="."){if(x>l){l=P;continue}}else if(!F&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){F=!0,x=-1,l=0;continue}return s(O,String(f),c,d)}c=!1,M=n(M,d,10,O.s),(l=M.indexOf("."))>-1?M=M.replace(".",""):l=M.length}for(x=0;M.charCodeAt(x)===48;x++);for(P=M.length;M.charCodeAt(--P)===48;);if(M=M.slice(x,++P)){if(P-=x,c&&v.DEBUG&&P>15&&(f>Jn||f!==Jt(f)))throw Error(Ro+O.s*f);if((l=l-x-1)>y)O.c=O.e=null;else if(l<p)O.c=[O.e=0];else{if(O.e=l,O.c=[],x=(l+1)%ht,l<0&&(x+=ht),x<P){for(x&&O.c.push(+M.slice(0,x)),P-=ht;x<P;)O.c.push(+M.slice(x,x+=ht));x=ht-(M=M.slice(x)).length}else x-=P;for(;x--;M+="0");O.c.push(+M)}}else O.c=[O.e=0]}v.clone=Wa,v.ROUND_UP=0,v.ROUND_DOWN=1,v.ROUND_CEIL=2,v.ROUND_FLOOR=3,v.ROUND_HALF_UP=4,v.ROUND_HALF_DOWN=5,v.ROUND_HALF_EVEN=6,v.ROUND_HALF_CEIL=7,v.ROUND_HALF_FLOOR=8,v.EUCLID=9,v.config=v.set=function(f){var d,g;if(f!=null)if(typeof f=="object"){if(f.hasOwnProperty(d="DECIMAL_PLACES")&&(g=f[d],Ct(g,0,Ot,d),o=g),f.hasOwnProperty(d="ROUNDING_MODE")&&(g=f[d],Ct(g,0,8,d),a=g),f.hasOwnProperty(d="EXPONENTIAL_AT")&&(g=f[d],g&&g.pop?(Ct(g[0],-Ot,0,d),Ct(g[1],0,Ot,d),h=g[0],m=g[1]):(Ct(g,-Ot,Ot,d),h=-(m=g<0?-g:g))),f.hasOwnProperty(d="RANGE"))if(g=f[d],g&&g.pop)Ct(g[0],-Ot,-1,d),Ct(g[1],1,Ot,d),p=g[0],y=g[1];else if(Ct(g,-Ot,Ot,d),g)p=-(y=g<0?-g:g);else throw Error(zt+d+" cannot be zero: "+g);if(f.hasOwnProperty(d="CRYPTO"))if(g=f[d],g===!!g)if(g)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=g;else throw w=!g,Error(zt+"crypto unavailable");else w=g;else throw Error(zt+d+" not true or false: "+g);if(f.hasOwnProperty(d="MODULO_MODE")&&(g=f[d],Ct(g,0,9,d),b=g),f.hasOwnProperty(d="POW_PRECISION")&&(g=f[d],Ct(g,0,Ot,d),u=g),f.hasOwnProperty(d="FORMAT"))if(g=f[d],typeof g=="object")A=g;else throw Error(zt+d+" not an object: "+g);if(f.hasOwnProperty(d="ALPHABET"))if(g=f[d],typeof g=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(g))S=g.slice(0,10)=="0123456789",R=g;else throw Error(zt+d+" invalid: "+g)}else throw Error(zt+"Object expected: "+f);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[h,m],RANGE:[p,y],CRYPTO:w,MODULO_MODE:b,POW_PRECISION:u,FORMAT:A,ALPHABET:R}},v.isBigNumber=function(f){if(!f||f._isBigNumber!==!0)return!1;if(!v.DEBUG)return!0;var d,g,C=f.c,F=f.e,l=f.s;t:if({}.toString.call(C)=="[object Array]"){if((l===1||l===-1)&&F>=-Ot&&F<=Ot&&F===Jt(F)){if(C[0]===0){if(F===0&&C.length===1)return!0;break t}if(d=(F+1)%ht,d<1&&(d+=ht),String(C[0]).length==d){for(d=0;d<C.length;d++)if(g=C[d],g<0||g>=ne||g!==Jt(g))break t;if(g!==0)return!0}}}else if(C===null&&F===null&&(l===null||l===1||l===-1))return!0;throw Error(zt+"Invalid BigNumber: "+f)},v.maximum=v.max=function(){return T(arguments,-1)},v.minimum=v.min=function(){return T(arguments,1)},v.random=function(){var f=9007199254740992,d=Math.random()*f&2097151?function(){return Jt(Math.random()*f)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(g){var C,F,l,x,c,P=0,M=[],O=new v(r);if(g==null?g=o:Ct(g,0,Ot),x=Qn(g/ht),w)if(crypto.getRandomValues){for(C=crypto.getRandomValues(new Uint32Array(x*=2));P<x;)c=C[P]*131072+(C[P+1]>>>11),c>=9e15?(F=crypto.getRandomValues(new Uint32Array(2)),C[P]=F[0],C[P+1]=F[1]):(M.push(c%1e14),P+=2);P=x/2}else if(crypto.randomBytes){for(C=crypto.randomBytes(x*=7);P<x;)c=(C[P]&31)*281474976710656+C[P+1]*1099511627776+C[P+2]*4294967296+C[P+3]*16777216+(C[P+4]<<16)+(C[P+5]<<8)+C[P+6],c>=9e15?crypto.randomBytes(7).copy(C,P):(M.push(c%1e14),P+=7);P=x/7}else throw w=!1,Error(zt+"crypto unavailable");if(!w)for(;P<x;)c=d(),c<9e15&&(M[P++]=c%1e14);for(x=M[--P],g%=ht,x&&g&&(c=Zn[ht-g],M[P]=Jt(x/c)*c);M[P]===0;M.pop(),P--);if(P<0)M=[l=0];else{for(l=-1;M[0]===0;M.splice(0,1),l-=ht);for(P=1,c=M[0];c>=10;c/=10,P++);P<ht&&(l-=ht-P)}return O.e=l,O.c=M,O}}(),v.sum=function(){for(var f=1,d=arguments,g=new v(d[0]);f<d.length;)g=g.plus(d[f++]);return g},n=function(){var f="0123456789";function d(g,C,F,l){for(var x,c=[0],P,M=0,O=g.length;M<O;){for(P=c.length;P--;c[P]*=C);for(c[0]+=l.indexOf(g.charAt(M++)),x=0;x<c.length;x++)c[x]>F-1&&(c[x+1]==null&&(c[x+1]=0),c[x+1]+=c[x]/F|0,c[x]%=F)}return c.reverse()}return function(g,C,F,l,x){var c,P,M,O,D,U,H,B,z=g.indexOf("."),Y=o,q=a;for(z>=0&&(O=u,u=0,g=g.replace(".",""),B=new v(C),U=B.pow(g.length-z),u=O,B.c=d(ve(Qt(U.c),U.e,"0"),10,F,f),B.e=B.c.length),H=d(g,C,F,x?(c=R,f):(c=f,R)),M=O=H.length;H[--O]==0;H.pop());if(!H[0])return c.charAt(0);if(z<0?--M:(U.c=H,U.e=M,U.s=l,U=e(U,B,Y,q,F),H=U.c,D=U.r,M=U.e),P=M+Y+1,z=H[P],O=F/2,D=D||P<0||H[P+1]!=null,D=q<4?(z!=null||D)&&(q==0||q==(U.s<0?3:2)):z>O||z==O&&(q==4||D||q==6&&H[P-1]&1||q==(U.s<0?8:7)),P<1||!H[0])g=D?ve(c.charAt(1),-Y,c.charAt(0)):c.charAt(0);else{if(H.length=P,D)for(--F;++H[--P]>F;)H[P]=0,P||(++M,H=[1].concat(H));for(O=H.length;!H[--O];);for(z=0,g="";z<=O;g+=c.charAt(H[z++]));g=ve(g,M,c.charAt(0))}return g}}(),e=function(){function f(C,F,l){var x,c,P,M,O=0,D=C.length,U=F%Ce,H=F/Ce|0;for(C=C.slice();D--;)P=C[D]%Ce,M=C[D]/Ce|0,x=H*P+M*U,c=U*P+x%Ce*Ce+O,O=(c/l|0)+(x/Ce|0)+H*M,C[D]=c%l;return O&&(C=[O].concat(C)),C}function d(C,F,l,x){var c,P;if(l!=x)P=l>x?1:-1;else for(c=P=0;c<l;c++)if(C[c]!=F[c]){P=C[c]>F[c]?1:-1;break}return P}function g(C,F,l,x){for(var c=0;l--;)C[l]-=c,c=C[l]<F[l]?1:0,C[l]=c*x+C[l]-F[l];for(;!C[0]&&C.length>1;C.splice(0,1));}return function(C,F,l,x,c){var P,M,O,D,U,H,B,z,Y,q,J,I,K,Q,Z,it,N,L=C.s==F.s?1:-1,j=C.c,V=F.c;if(!j||!j[0]||!V||!V[0])return new v(!C.s||!F.s||(j?V&&j[0]==V[0]:!V)?NaN:j&&j[0]==0||!V?L*0:L/0);for(z=new v(L),Y=z.c=[],M=C.e-F.e,L=l+M+1,c||(c=ne,M=Zt(C.e/ht)-Zt(F.e/ht),L=L/ht|0),O=0;V[O]==(j[O]||0);O++);if(V[O]>(j[O]||0)&&M--,L<0)Y.push(1),D=!0;else{for(Q=j.length,it=V.length,O=0,L+=2,U=Jt(c/(V[0]+1)),U>1&&(V=f(V,U,c),j=f(j,U,c),it=V.length,Q=j.length),K=it,q=j.slice(0,it),J=q.length;J<it;q[J++]=0);N=V.slice(),N=[0].concat(N),Z=V[0],V[1]>=c/2&&Z++;do{if(U=0,P=d(V,q,it,J),P<0){if(I=q[0],it!=J&&(I=I*c+(q[1]||0)),U=Jt(I/Z),U>1)for(U>=c&&(U=c-1),H=f(V,U,c),B=H.length,J=q.length;d(H,q,B,J)==1;)U--,g(H,it<B?N:V,B,c),B=H.length,P=1;else U==0&&(P=U=1),H=V.slice(),B=H.length;if(B<J&&(H=[0].concat(H)),g(q,H,J,c),J=q.length,P==-1)for(;d(V,q,it,J)<1;)U++,g(q,it<J?N:V,J,c),J=q.length}else P===0&&(U++,q=[0]);Y[O++]=U,q[0]?q[J++]=j[K]||0:(q=[j[K]],J=1)}while((K++<Q||q[0]!=null)&&L--);D=q[0]!=null,Y[0]||Y.splice(0,1)}if(c==ne){for(O=1,L=Y[0];L>=10;L/=10,O++);E(z,l+(z.e=O+M*ht-1)+1,x,D)}else z.e=M,z.r=+D;return z}}();function _(f,d,g,C){var F,l,x,c,P;if(g==null?g=a:Ct(g,0,8),!f.c)return f.toString();if(F=f.c[0],x=f.e,d==null)P=Qt(f.c),P=C==1||C==2&&(x<=h||x>=m)?fn(P,x):ve(P,x,"0");else if(f=E(new v(f),d,g),l=f.e,P=Qt(f.c),c=P.length,C==1||C==2&&(d<=l||l<=h)){for(;c<d;P+="0",c++);P=fn(P,l)}else if(d-=x,P=ve(P,l,"0"),l+1>c){if(--d>0)for(P+=".";d--;P+="0");}else if(d+=l-c,d>0)for(l+1==c&&(P+=".");d--;P+="0");return f.s<0&&F?"-"+P:P}function T(f,d){for(var g,C,F=1,l=new v(f[0]);F<f.length;F++)C=new v(f[F]),(!C.s||(g=De(l,C))===d||g===0&&l.s===d)&&(l=C);return l}function k(f,d,g){for(var C=1,F=d.length;!d[--F];d.pop());for(F=d[0];F>=10;F/=10,C++);return(g=C+g*ht-1)>y?f.c=f.e=null:g<p?f.c=[f.e=0]:(f.e=g,f.c=d),f}s=function(){var f=/^(-?)0([xbo])(?=\w[\w.]*$)/i,d=/^([^.]+)\.$/,g=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,F=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,x,c,P){var M,O=c?x:x.replace(F,"");if(C.test(O))l.s=isNaN(O)?null:O<0?-1:1;else{if(!c&&(O=O.replace(f,function(D,U,H){return M=(H=H.toLowerCase())=="x"?16:H=="b"?2:8,!P||P==M?U:D}),P&&(M=P,O=O.replace(d,"$1").replace(g,"0.$1")),x!=O))return new v(O,M);if(v.DEBUG)throw Error(zt+"Not a"+(P?" base "+P:"")+" number: "+x);l.s=null}l.c=l.e=null}}();function E(f,d,g,C){var F,l,x,c,P,M,O,D=f.c,U=Zn;if(D){t:{for(F=1,c=D[0];c>=10;c/=10,F++);if(l=d-F,l<0)l+=ht,x=d,P=D[M=0],O=Jt(P/U[F-x-1]%10);else if(M=Qn((l+1)/ht),M>=D.length)if(C){for(;D.length<=M;D.push(0));P=O=0,F=1,l%=ht,x=l-ht+1}else break t;else{for(P=c=D[M],F=1;c>=10;c/=10,F++);l%=ht,x=l-ht+F,O=x<0?0:Jt(P/U[F-x-1]%10)}if(C=C||d<0||D[M+1]!=null||(x<0?P:P%U[F-x-1]),C=g<4?(O||C)&&(g==0||g==(f.s<0?3:2)):O>5||O==5&&(g==4||C||g==6&&(l>0?x>0?P/U[F-x]:0:D[M-1])%10&1||g==(f.s<0?8:7)),d<1||!D[0])return D.length=0,C?(d-=f.e+1,D[0]=U[(ht-d%ht)%ht],f.e=-d||0):D[0]=f.e=0,f;if(l==0?(D.length=M,c=1,M--):(D.length=M+1,c=U[ht-l],D[M]=x>0?Jt(P/U[F-x]%U[x])*c:0),C)for(;;)if(M==0){for(l=1,x=D[0];x>=10;x/=10,l++);for(x=D[0]+=c,c=1;x>=10;x/=10,c++);l!=c&&(f.e++,D[0]==ne&&(D[0]=1));break}else{if(D[M]+=c,D[M]!=ne)break;D[M--]=0,c=1}for(l=D.length;D[--l]===0;D.pop());}f.e>y?f.c=f.e=null:f.e<p&&(f.c=[f.e=0])}return f}function G(f){var d,g=f.e;return g===null?f.toString():(d=Qt(f.c),d=g<=h||g>=m?fn(d,g):ve(d,g,"0"),f.s<0?"-"+d:d)}return i.absoluteValue=i.abs=function(){var f=new v(this);return f.s<0&&(f.s=1),f},i.comparedTo=function(f,d){return De(this,new v(f,d))},i.decimalPlaces=i.dp=function(f,d){var g,C,F,l=this;if(f!=null)return Ct(f,0,Ot),d==null?d=a:Ct(d,0,8),E(new v(l),f+l.e+1,d);if(!(g=l.c))return null;if(C=((F=g.length-1)-Zt(this.e/ht))*ht,F=g[F])for(;F%10==0;F/=10,C--);return C<0&&(C=0),C},i.dividedBy=i.div=function(f,d){return e(this,new v(f,d),o,a)},i.dividedToIntegerBy=i.idiv=function(f,d){return e(this,new v(f,d),0,1)},i.exponentiatedBy=i.pow=function(f,d){var g,C,F,l,x,c,P,M,O,D=this;if(f=new v(f),f.c&&!f.isInteger())throw Error(zt+"Exponent not an integer: "+G(f));if(d!=null&&(d=new v(d)),c=f.e>14,!D.c||!D.c[0]||D.c[0]==1&&!D.e&&D.c.length==1||!f.c||!f.c[0])return O=new v(Math.pow(+G(D),c?f.s*(2-dn(f)):+G(f))),d?O.mod(d):O;if(P=f.s<0,d){if(d.c?!d.c[0]:!d.s)return new v(NaN);C=!P&&D.isInteger()&&d.isInteger(),C&&(D=D.mod(d))}else{if(f.e>9&&(D.e>0||D.e<-1||(D.e==0?D.c[0]>1||c&&D.c[1]>=24e7:D.c[0]<8e13||c&&D.c[0]<=9999975e7)))return l=D.s<0&&dn(f)?-0:0,D.e>-1&&(l=1/l),new v(P?1/l:l);u&&(l=Qn(u/ht+2))}for(c?(g=new v(.5),P&&(f.s=1),M=dn(f)):(F=Math.abs(+G(f)),M=F%2),O=new v(r);;){if(M){if(O=O.times(D),!O.c)break;l?O.c.length>l&&(O.c.length=l):C&&(O=O.mod(d))}if(F){if(F=Jt(F/2),F===0)break;M=F%2}else if(f=f.times(g),E(f,f.e+1,1),f.e>14)M=dn(f);else{if(F=+G(f),F===0)break;M=F%2}D=D.times(D),l?D.c&&D.c.length>l&&(D.c.length=l):C&&(D=D.mod(d))}return C?O:(P&&(O=r.div(O)),d?O.mod(d):l?E(O,u,a,x):O)},i.integerValue=function(f){var d=new v(this);return f==null?f=a:Ct(f,0,8),E(d,d.e+1,f)},i.isEqualTo=i.eq=function(f,d){return De(this,new v(f,d))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(f,d){return De(this,new v(f,d))>0},i.isGreaterThanOrEqualTo=i.gte=function(f,d){return(d=De(this,new v(f,d)))===1||d===0},i.isInteger=function(){return!!this.c&&Zt(this.e/ht)>this.c.length-2},i.isLessThan=i.lt=function(f,d){return De(this,new v(f,d))<0},i.isLessThanOrEqualTo=i.lte=function(f,d){return(d=De(this,new v(f,d)))===-1||d===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(f,d){var g,C,F,l,x=this,c=x.s;if(f=new v(f,d),d=f.s,!c||!d)return new v(NaN);if(c!=d)return f.s=-d,x.plus(f);var P=x.e/ht,M=f.e/ht,O=x.c,D=f.c;if(!P||!M){if(!O||!D)return O?(f.s=-d,f):new v(D?x:NaN);if(!O[0]||!D[0])return D[0]?(f.s=-d,f):new v(O[0]?x:a==3?-0:0)}if(P=Zt(P),M=Zt(M),O=O.slice(),c=P-M){for((l=c<0)?(c=-c,F=O):(M=P,F=D),F.reverse(),d=c;d--;F.push(0));F.reverse()}else for(C=(l=(c=O.length)<(d=D.length))?c:d,c=d=0;d<C;d++)if(O[d]!=D[d]){l=O[d]<D[d];break}if(l&&(F=O,O=D,D=F,f.s=-f.s),d=(C=D.length)-(g=O.length),d>0)for(;d--;O[g++]=0);for(d=ne-1;C>c;){if(O[--C]<D[C]){for(g=C;g&&!O[--g];O[g]=d);--O[g],O[C]+=ne}O[C]-=D[C]}for(;O[0]==0;O.splice(0,1),--M);return O[0]?k(f,O,M):(f.s=a==3?-1:1,f.c=[f.e=0],f)},i.modulo=i.mod=function(f,d){var g,C,F=this;return f=new v(f,d),!F.c||!f.s||f.c&&!f.c[0]?new v(NaN):!f.c||F.c&&!F.c[0]?new v(F):(b==9?(C=f.s,f.s=1,g=e(F,f,0,3),f.s=C,g.s*=C):g=e(F,f,0,b),f=F.minus(g.times(f)),!f.c[0]&&b==1&&(f.s=F.s),f)},i.multipliedBy=i.times=function(f,d){var g,C,F,l,x,c,P,M,O,D,U,H,B,z,Y,q=this,J=q.c,I=(f=new v(f,d)).c;if(!J||!I||!J[0]||!I[0])return!q.s||!f.s||J&&!J[0]&&!I||I&&!I[0]&&!J?f.c=f.e=f.s=null:(f.s*=q.s,!J||!I?f.c=f.e=null:(f.c=[0],f.e=0)),f;for(C=Zt(q.e/ht)+Zt(f.e/ht),f.s*=q.s,P=J.length,D=I.length,P<D&&(B=J,J=I,I=B,F=P,P=D,D=F),F=P+D,B=[];F--;B.push(0));for(z=ne,Y=Ce,F=D;--F>=0;){for(g=0,U=I[F]%Y,H=I[F]/Y|0,x=P,l=F+x;l>F;)M=J[--x]%Y,O=J[x]/Y|0,c=H*M+O*U,M=U*M+c%Y*Y+B[l]+g,g=(M/z|0)+(c/Y|0)+H*O,B[l--]=M%z;B[l]=g}return g?++C:B.splice(0,1),k(f,B,C)},i.negated=function(){var f=new v(this);return f.s=-f.s||null,f},i.plus=function(f,d){var g,C=this,F=C.s;if(f=new v(f,d),d=f.s,!F||!d)return new v(NaN);if(F!=d)return f.s=-d,C.minus(f);var l=C.e/ht,x=f.e/ht,c=C.c,P=f.c;if(!l||!x){if(!c||!P)return new v(F/0);if(!c[0]||!P[0])return P[0]?f:new v(c[0]?C:F*0)}if(l=Zt(l),x=Zt(x),c=c.slice(),F=l-x){for(F>0?(x=l,g=P):(F=-F,g=c),g.reverse();F--;g.push(0));g.reverse()}for(F=c.length,d=P.length,F-d<0&&(g=P,P=c,c=g,d=F),F=0;d;)F=(c[--d]=c[d]+P[d]+F)/ne|0,c[d]=ne===c[d]?0:c[d]%ne;return F&&(c=[F].concat(c),++x),k(f,c,x)},i.precision=i.sd=function(f,d){var g,C,F,l=this;if(f!=null&&f!==!!f)return Ct(f,1,Ot),d==null?d=a:Ct(d,0,8),E(new v(l),f,d);if(!(g=l.c))return null;if(F=g.length-1,C=F*ht+1,F=g[F]){for(;F%10==0;F/=10,C--);for(F=g[0];F>=10;F/=10,C++);}return f&&l.e+1>C&&(C=l.e+1),C},i.shiftedBy=function(f){return Ct(f,-Jn,Jn),this.times("1e"+f)},i.squareRoot=i.sqrt=function(){var f,d,g,C,F,l=this,x=l.c,c=l.s,P=l.e,M=o+4,O=new v("0.5");if(c!==1||!x||!x[0])return new v(!c||c<0&&(!x||x[0])?NaN:x?l:1/0);if(c=Math.sqrt(+G(l)),c==0||c==1/0?(d=Qt(x),(d.length+P)%2==0&&(d+="0"),c=Math.sqrt(+d),P=Zt((P+1)/2)-(P<0||P%2),c==1/0?d="5e"+P:(d=c.toExponential(),d=d.slice(0,d.indexOf("e")+1)+P),g=new v(d)):g=new v(c+""),g.c[0]){for(P=g.e,c=P+M,c<3&&(c=0);;)if(F=g,g=O.times(F.plus(e(l,F,M,1))),Qt(F.c).slice(0,c)===(d=Qt(g.c)).slice(0,c))if(g.e<P&&--c,d=d.slice(c-3,c+1),d=="9999"||!C&&d=="4999"){if(!C&&(E(F,F.e+o+2,0),F.times(F).eq(l))){g=F;break}M+=4,c+=4,C=1}else{(!+d||!+d.slice(1)&&d.charAt(0)=="5")&&(E(g,g.e+o+2,1),f=!g.times(g).eq(l));break}}return E(g,g.e+o+1,a,f)},i.toExponential=function(f,d){return f!=null&&(Ct(f,0,Ot),f++),_(this,f,d,1)},i.toFixed=function(f,d){return f!=null&&(Ct(f,0,Ot),f=f+this.e+1),_(this,f,d)},i.toFormat=function(f,d,g){var C,F=this;if(g==null)f!=null&&d&&typeof d=="object"?(g=d,d=null):f&&typeof f=="object"?(g=f,f=d=null):g=A;else if(typeof g!="object")throw Error(zt+"Argument not an object: "+g);if(C=F.toFixed(f,d),F.c){var l,x=C.split("."),c=+g.groupSize,P=+g.secondaryGroupSize,M=g.groupSeparator||"",O=x[0],D=x[1],U=F.s<0,H=U?O.slice(1):O,B=H.length;if(P&&(l=c,c=P,P=l,B-=l),c>0&&B>0){for(l=B%c||c,O=H.substr(0,l);l<B;l+=c)O+=M+H.substr(l,c);P>0&&(O+=M+H.slice(l)),U&&(O="-"+O)}C=D?O+(g.decimalSeparator||"")+((P=+g.fractionGroupSize)?D.replace(new RegExp("\\d{"+P+"}\\B","g"),"$&"+(g.fractionGroupSeparator||"")):D):O}return(g.prefix||"")+C+(g.suffix||"")},i.toFraction=function(f){var d,g,C,F,l,x,c,P,M,O,D,U,H=this,B=H.c;if(f!=null&&(c=new v(f),!c.isInteger()&&(c.c||c.s!==1)||c.lt(r)))throw Error(zt+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+G(c));if(!B)return new v(H);for(d=new v(r),M=g=new v(r),C=P=new v(r),U=Qt(B),l=d.e=U.length-H.e-1,d.c[0]=Zn[(x=l%ht)<0?ht+x:x],f=!f||c.comparedTo(d)>0?l>0?d:M:c,x=y,y=1/0,c=new v(U),P.c[0]=0;O=e(c,d,0,1),F=g.plus(O.times(C)),F.comparedTo(f)!=1;)g=C,C=F,M=P.plus(O.times(F=M)),P=F,d=c.minus(O.times(F=d)),c=F;return F=e(f.minus(g),C,0,1),P=P.plus(F.times(M)),g=g.plus(F.times(C)),P.s=M.s=H.s,l=l*2,D=e(M,C,l,a).minus(H).abs().comparedTo(e(P,g,l,a).minus(H).abs())<1?[M,C]:[P,g],y=x,D},i.toNumber=function(){return+G(this)},i.toPrecision=function(f,d){return f!=null&&Ct(f,1,Ot),_(this,f,d,2)},i.toString=function(f){var d,g=this,C=g.s,F=g.e;return F===null?C?(d="Infinity",C<0&&(d="-"+d)):d="NaN":(f==null?d=F<=h||F>=m?fn(Qt(g.c),F):ve(Qt(g.c),F,"0"):f===10&&S?(g=E(new v(g),o+F+1,a),d=ve(Qt(g.c),g.e,"0")):(Ct(f,2,R.length,"Base"),d=n(ve(Qt(g.c),F,"0"),10,f,C,!0)),C<0&&g.c[0]&&(d="-"+d)),d},i.valueOf=i.toJSON=function(){return G(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&v.set(t),v}function Zt(t){var e=t|0;return t>0||t===e?e:e-1}function Qt(t){for(var e,n,s=1,i=t.length,r=t[0]+"";s<i;){for(e=t[s++]+"",n=ht-e.length;n--;e="0"+e);r+=e}for(i=r.length;r.charCodeAt(--i)===48;);return r.slice(0,i+1||1)}function De(t,e){var n,s,i=t.c,r=e.c,o=t.s,a=e.s,h=t.e,m=e.e;if(!o||!a)return null;if(n=i&&!i[0],s=r&&!r[0],n||s)return n?s?0:-a:o;if(o!=a)return o;if(n=o<0,s=h==m,!i||!r)return s?0:!i^n?1:-1;if(!s)return h>m^n?1:-1;for(a=(h=i.length)<(m=r.length)?h:m,o=0;o<a;o++)if(i[o]!=r[o])return i[o]>r[o]^n?1:-1;return h==m?0:h>m^n?1:-1}function Ct(t,e,n,s){if(t<e||t>n||t!==Jt(t))throw Error(zt+(s||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function dn(t){var e=t.c.length-1;return Zt(t.e/ht)==e&&t.c[e]%2!=0}function fn(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ve(t,e,n){var s,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(s=t.length,++e>s){for(i=n,e-=s;--e;i+=n);t+=i}else e<s&&(t=t.slice(0,e)+"."+t.slice(e));return t}var be=Wa();be.config({EXPONENTIAL_AT:[-100,100]});const pu=(t,e)=>{let n=0;return function(){let s=+new Date;(s-n>e||!n)&&(t.apply(this,arguments),n=s)}},xe=t=>t==null||typeof t=="string"&&(t=t.replace(/[^0-9.-]/g,"").replace(/(\..*)\./g,""),!t)?0:new be(t).toNumber(),Oo=(t,e)=>(t=xe(t),e=xe(e),new be(t).times(e)),Eo=(t,e)=>(t=xe(t),e=xe(e),new be(t).dividedBy(e)),tr=(t,e)=>(t=xe(t),e=xe(e),new be(t).plus(e)),Ut=(t,e)=>(t=xe(t),e=xe(e),new be(t).minus(e)),mu=(t,e,n,s)=>{if(!t)return"";t instanceof be||(t=xe(t));const i={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,...s};return new be(t).toFormat(e||0,be.ROUND_FLOOR,i)},No={width:500,height:340,marginX:50,marginY:20,fontSize:12,fontColor:"#909198",bidsColor:"#0BC688",asksColor:"#F14B4B",bidsBgColor:"rgba(11,198,136,0.2)",asksBgColor:"rgba(241,75,75,0.2)",dottedBgColor:"rgba(91,89,89,0.02)",axisColor:"#5B5959",axisXBgColor:"#F7F7F7",axisYBgColor:"#F7F7F7",axisXBorderColor:"#F7F7F7",axisYBorderColor:"#F7F7F7",axisLineWidth:4,tipFontSize:14,tipColor:"#FFFFFF",tipPriceText:"",tipTotalText:"",wheel:50,isRedUp:!1},vu={currentPrice:0,priceScale:2,qtyScale:2},_u={bids:[],asks:[]},yu=En({name:"depthChart",__name:"depthChart",props:{options:{type:Object,default:()=>No},symbolData:{type:Object,default:()=>vu},depthData:{type:Object,default:()=>_u}},setup(t){const{appContext:e}=Er(),{globalProperties:n}=e.app.config;n!=null&&n.$isKonvaPluginRegistered||(e.app.use(fu,{prefix:"kv"}),n.$isKonvaPluginRegistered=!0);const s=t,i=re(()=>{const C={...No,...s.options};return C.isRedUp&&([C.bidsColor,C.asksColor]=[C.asksColor,C.bidsColor],[C.bidsBgColor,C.asksBgColor]=[C.asksBgColor,C.bidsBgColor]),C}),r=Ht(i.value.width||500),o=Ht(i.value.height||340),a=Ht(Ut(r.value,i.value.marginX).toNumber()),h=Ht(a.value/2),m=Ht(Ut(o.value,i.value.marginX).toNumber()),p=Ht(i.value.wheel||50),y=re(()=>(s.depthData.bids||[]).map(C=>Array.isArray(C)?{...C,price:C[0],totalAmount:C[1]}:C).filter(C=>C.price<s.symbolData.currentPrice).slice(0,p.value)),w=re(()=>(s.depthData.asks||[]).map(C=>Array.isArray(C)?{...C,price:C[0],totalAmount:C[1]}:C).filter(C=>C.price>s.symbolData.currentPrice).slice(-p.value)),b=10,u=re(()=>{const C=s.depthData.bids.length,F=s.depthData.asks.length;return Math.max(C,F,b)}),A=Ht(0),R=re(()=>{const C=s.symbolData.currentPrice,F=y.value.length?Ut(C,y.value[y.value.length-1].price).dividedBy(3).toNumber():0,l=+F>0?[Ut(C,Oo(F,2)),Ut(C,F)]:[0,0],x=w.value.length?Ut(w.value[0].price,C).dividedBy(3).toNumber():0,c=+x>0?[tr(C,x).toNumber(),tr(C,Oo(x,2)).toNumber()]:[0,0];return[...l,C,...c].map(P=>mu(P,s.symbolData.priceScale))}),S=re(()=>{var C,F;return Math.max(((C=y.value[y.value.length-1])==null?void 0:C.totalAmount)||0,((F=w.value[0])==null?void 0:F.totalAmount)||0)}),v=re(()=>{const C=m.value>800?20:10,F=tr(S.value,S.value%10).toNumber(),l=Eo(F,C);return Array.from(new Array(C)).map((x,c)=>{const P=l.multipliedBy(c).toFormat(s.symbolData.qtyScale),M=Eo(m.value,C).multipliedBy(c),O=Ut(m.value,M).toFixed(2);return{currentScaleTotal:P,y:O}}).filter(x=>+x.currentScaleTotal>0)}),_=re(()=>{if(!y.value.length||!S.value)return null;const C=m.value-i.value.marginY,F=s.symbolData.currentPrice,l=Ut(F,y.value[y.value.length-1].price);let x="";return{data:[...y.value].reverse().map((c,P)=>{const M=+Ut(c.price,F).dividedBy(l).multipliedBy(h.value).plus(h.value).toFixed(s.symbolData.priceScale),O=Math.max(+Ut(S.value,c.totalAmount).dividedBy(S.value).multipliedBy(C).toFixed(s.symbolData.qtyScale+1),i.value.marginY);return P===0?x+=`M-1 ${m.value} V${O} `:P===y.value.length-1?x+=`H${M} V${O} V${m.value}`:x+=`H${M} V${O} `,{...c,x:M,y:O}}),path:x}}),T=re(()=>{if(!w.value.length||!S.value)return null;const C=m.value-i.value.marginY,F=s.symbolData.currentPrice,l=Ut(w.value[0].price,F);let x="";return{data:w.value.map((c,P)=>{const M=+Ut(c.price,F).dividedBy(l).multipliedBy(h.value).plus(h.value).toFixed(s.symbolData.priceScale),O=Math.max(+Ut(S.value,c.totalAmount).dividedBy(S.value).multipliedBy(C).toFixed(s.symbolData.qtyScale+1),i.value.marginY);return P===0?x+=`M${a.value} ${m.value} V${O} `:P===w.value.length-1?x+=`H${M} V${O} V${m.value}`:x+=`H${M} V${O} `,{...c,x:M,y:O}}),path:x}}),k=re(()=>{var C,F,l,x,c,P;const M=A.value;if(!A||M>a.value)return;let O;if(M<h.value){const D=((l=(F=(C=_.value)==null?void 0:C.data)==null?void 0:F.slice())==null?void 0:l.reverse())||[];if(!D.length)return;for(let U=0;U<D.length;U++){const H=D[U];if(M>+H.x){O=H;break}}}else{const D=((P=(c=(x=T.value)==null?void 0:x.data)==null?void 0:c.slice())==null?void 0:P.reverse())||[];if(!D.length)return;for(let U=0;U<D.length;U++){const H=D[U];if(M<+H.x){O=H;break}}}return O}),E=Ht(),G=Ht(0),f=Ht(),d=()=>{f.value&&(r.value=f.value.clientWidth,o.value=f.value.clientHeight||o.value,a.value=Ut(r.value,i.value.marginX).toNumber(),h.value=a.value/2,m.value=Ut(o.value,i.value.marginY).toNumber(),window.addEventListener("resize",d))};Dn(()=>{d()});const g=pu(C=>{C.evt.preventDefault(),A.value=C.evt.offsetX},300);return(C,F)=>{const l=Oe("kv-path"),x=Oe("kv-Rect"),c=Oe("kv-text"),P=Oe("kv-circle"),M=Oe("kv-group"),O=Oe("kv-layer"),D=Oe("kv-stage");return oe(),qe("div",{class:"depth-chart",ref_key:"depthChartEl",ref:f},[yt(D,{config:{width:r.value,height:o.value},onWheel:F[0]||(F[0]=U=>{U.evt.preventDefault(),U.evt.wheelDelta<0?p.value=Math.min(p.value+2,u.value):p.value=Math.max(p.value-2,b)}),onMousemove:Tr(g),onMouseleave:F[1]||(F[1]=()=>A.value=0),onTouchmove:F[2]||(F[2]=U=>{U.evt.preventDefault(),U.evt.targetTouches.length>1?(G.value&&(Math.abs(U.evt.targetTouches[0].pageX-U.evt.targetTouches[1].pageX)<G.value?p.value=Math.min(p.value+2,u.value):p.value=Math.max(p.value-2,b)),G.value=Math.abs(U.evt.targetTouches[0].pageX-U.evt.targetTouches[1].pageX)):!G.value&&(A.value=U.evt.changedTouches[0].pageX)}),onTouchend:F[3]||(F[3]=U=>{U.evt.preventDefault(),A.value=0,G.value=0})},{default:We(()=>[yt(O,null,{default:We(()=>{var U,H;return[yt(l,{fill:i.value.bidsBgColor,stroke:i.value.bidsColor,strokeWidth:1,data:(U=_.value)==null?void 0:U.path},null,8,["fill","stroke","data"]),yt(l,{fill:i.value.asksBgColor,stroke:i.value.asksColor,strokeWidth:1,data:(H=T.value)==null?void 0:H.path},null,8,["fill","stroke","data"]),yt(l,{stroke:i.value.axisColor,strokeWidth:1,data:`M${h.value} 0 L${h.value} ${m.value} Z`},null,8,["stroke","data"]),k.value?(oe(),Qi(M,{key:0},{default:We(()=>{var B,z,Y,q,J,I,K,Q,Z,it,N,L,j,V,W,$;return[yt(l,{data:+k.value.x<h.value?`M0 ${(B=k.value)==null?void 0:B.y} L${h.value} ${(z=k.value)==null?void 0:z.y} Z`:`M${h.value} ${(Y=k.value)==null?void 0:Y.y} L${a.value} ${(q=k.value)==null?void 0:q.y} Z`,stroke:+k.value.x<h.value?i.value.bidsColor:i.value.asksColor,strokeWidth:.5,dash:[2,4]},null,8,["data","stroke"]),yt(l,{data:+k.value.x<h.value?`M-1 -1 L-1 ${o.value} L${(J=k.value)==null?void 0:J.x} ${o.value} L${(I=k.value)==null?void 0:I.x} -1 Z`:`M${a.value+1} -1 L${(K=k.value)==null?void 0:K.x} -1 L${(Q=k.value)==null?void 0:Q.x} ${o.value} L${a.value+1} ${o.value} Z`,stroke:+k.value.x<h.value?i.value.bidsColor:i.value.asksColor,fill:i.value.dottedBgColor,strokeWidth:.5,dash:[2,4]},null,8,["data","stroke","fill"]),yt(x,{width:(((it=(Z=E.value)==null?void 0:Z.getNode())==null?void 0:it.textWidth)||0)+40,height:(((L=(N=E.value)==null?void 0:N.getNode())==null?void 0:L.textHeight)||0)*4.3,x:+k.value.x<h.value?+k.value.x+50:+k.value.x-(((V=(j=E.value)==null?void 0:j.getNode())==null?void 0:V.textWidth)||0)-100,cornerRadius:8,y:Math.max(10,+k.value.y-100),fill:+k.value.x<h.value?i.value.bidsColor:i.value.asksColor},null,8,["width","height","x","y","fill"]),yt(c,{text:`${i.value.tipPriceText}  ${k.value.price}
${i.value.tipTotalText}  ${+k.value.totalAmount>999,k.value.totalAmount}`,padding:10,lineHeight:1.5,fill:i.value.tipColor,fontSize:i.value.tipFontSize,x:+k.value.x<h.value?+k.value.x+50:+k.value.x-((($=(W=E.value)==null?void 0:W.getNode())==null?void 0:$.textWidth)||0)-100,y:Math.max(10,+k.value.y-100),ref_key:"overlayEl",ref:E},null,8,["text","fill","fontSize","x","y"]),yt(P,{fill:+k.value.x<h.value?i.value.bidsColor:i.value.asksColor,width:6,height:6,x:+k.value.x,y:+k.value.y},null,8,["fill","x","y"])]}),_:1})):Fa("",!0),yt(l,{stroke:i.value.axisXBorderColor,fill:i.value.axisXBgColor,strokeWidth:1,data:`M0 ${o.value} L0 ${m.value+1} L${r.value} ${m.value+1} L${r.value} ${o.value} Z`},null,8,["stroke","fill","data"]),(oe(!0),qe(se,null,Kr(R.value,(B,z)=>(oe(),Qi(M,{key:z},{default:We(()=>[yt(l,{stroke:i.value.axisColor,strokeWidth:1,data:`M${a.value/6*(z+1)} ${m.value} L${a.value/6*(z+1)} ${m.value+i.value.axisLineWidth} Z`},null,8,["stroke","data"]),yt(c,{text:B,fill:i.value.fontColor,fontSize:i.value.fontSize,x:a.value/6*(z+1),y:m.value+i.value.axisLineWidth+2,width:a.value/3,align:"center",offsetX:a.value/3/2},null,8,["text","fill","fontSize","x","y","width","offsetX"])]),_:2},1024))),128)),yt(l,{stroke:i.value.axisYBorderColor,fill:i.value.axisYBgColor,data:`M${a.value} 0 L${a.value} ${o.value} L${r.value} ${o.value} L${r.value} 0 Z`},null,8,["stroke","fill","data"]),(oe(!0),qe(se,null,Kr(v.value,(B,z)=>(oe(),Qi(M,{key:z},{default:We(()=>[yt(l,{stroke:i.value.axisColor,strokeWidth:1,data:`M${a.value} ${B.y} L${a.value+i.value.axisLineWidth} ${B.y} Z`},null,8,["stroke","data"]),yt(c,{text:B.currentScaleTotal,fill:i.value.fontColor,fontSize:i.value.fontSize,x:a.value+i.value.axisLineWidth+2,y:+B.y-5,verticalAlign:"middle"},null,8,["text","fill","fontSize","x","y"])]),_:2},1024))),128))]}),_:1})]),_:1},8,["config","onMousemove"])],512)}}}),bu=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},xu=bu(yu,[["__scopeId","data-v-7d9f96e1"]]),wu={class:"btns"},Su={key:0},Cu={key:1},Pu=En({__name:"App",setup(t){const e=Ht({isRedUp:!1}),n=Ht({currentPrice:3606.17,priceScale:2,qtyScale:4}),s=Ht({bids:[],asks:[]}),i=Ht(!0);return(()=>{console.info("Start loading mock data"),mc(()=>import("./index-BD0kgJ1c.js"),[]).then(o=>{s.value={bids:o.bids,asks:o.asks}})})(),(o,a)=>(oe(),qe("main",null,[Ji("div",wu,[Ji("button",{onClick:a[0]||(a[0]=h=>i.value=!i.value)},"show/hide"),Ji("button",{onClick:a[1]||(a[1]=h=>e.value.isRedUp=!e.value.isRedUp)},"Color switch")]),e.value.isRedUp?(oe(),qe("div",Su,"Model: Red Up/Green Down")):(oe(),qe("div",Cu,"Model: Red Down/Green Up")),i.value?(oe(),Qi(Tr(xu),{key:2,options:e.value,symbolData:n.value,depthData:s.value},null,8,["options","symbolData","depthData"])):Fa("",!0)]))}}),Tu=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},Au=Tu(Pu,[["__scopeId","data-v-3f3f8808"]]),Mu=uc(Au);Mu.mount("#app");
