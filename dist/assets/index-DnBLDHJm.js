(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dr(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const xt={},Ke=[],ue=()=>{},za=()=>!1,Pn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fr=t=>t.startsWith("onUpdate:"),Lt=Object.assign,gr=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},Ka=Object.prototype.hasOwnProperty,yt=(t,e)=>Ka.call(t,e),ct=Array.isArray,ji=t=>An(t)==="[object Map]",$a=t=>An(t)==="[object Set]",dt=t=>typeof t=="function",kt=t=>typeof t=="string",Qe=t=>typeof t=="symbol",At=t=>t!==null&&typeof t=="object",Oo=t=>(At(t)||dt(t))&&dt(t.then)&&dt(t.catch),Xa=Object.prototype.toString,An=t=>Xa.call(t),Ya=t=>An(t).slice(8,-1),qa=t=>An(t)==="[object Object]",pr=t=>kt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Vi=dr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tn=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},Qa=/-(\w)/g,ie=Tn(t=>t.replace(Qa,(e,i)=>i?i.toUpperCase():"")),Ja=/\B([A-Z])/g,Be=Tn(t=>t.replace(Ja,"-$1").toLowerCase()),Fn=Tn(t=>t.charAt(0).toUpperCase()+t.slice(1)),Un=Tn(t=>t?`on${Fn(t)}`:""),Me=(t,e)=>!Object.is(t,e),Bn=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},No=(t,e,i,o=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:o,value:i})},Za=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ir;const Mn=()=>Ir||(Ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mr(t){if(ct(t)){const e={};for(let i=0;i<t.length;i++){const o=t[i],n=kt(o)?nl(o):mr(o);if(n)for(const r in n)e[r]=n[r]}return e}else if(kt(t)||At(t))return t}const tl=/;(?![^(]*\))/g,el=/:([^]+)/,il=/\/\*[^]*?\*\//g;function nl(t){const e={};return t.replace(il,"").split(tl).forEach(i=>{if(i){const o=i.split(el);o.length>1&&(e[o[0].trim()]=o[1].trim())}}),e}function vr(t){let e="";if(kt(t))e=t;else if(ct(t))for(let i=0;i<t.length;i++){const o=vr(t[i]);o&&(e+=o+" ")}else if(At(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const rl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sl=dr(rl);function Ro(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yt;class ol{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Yt,!e&&Yt&&(this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=Yt;try{return Yt=this,e()}finally{Yt=i}}}on(){Yt=this}off(){Yt=this.parent}stop(e){if(this._active){this._active=!1;let i,o;for(i=0,o=this.effects.length;i<o;i++)this.effects[i].stop();for(this.effects.length=0,i=0,o=this.cleanups.length;i<o;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,o=this.scopes.length;i<o;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function al(){return Yt}let bt;const Hn=new WeakSet;class Do{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Yt&&Yt.active&&Yt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hn.has(this)&&(Hn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Io(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lr(this),Lo(this);const e=bt,i=oe;bt=this,oe=!0;try{return this.fn()}finally{Uo(this),bt=e,oe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)br(e);this.deps=this.depsTail=void 0,Lr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){tr(this)&&this.run()}get dirty(){return tr(this)}}let Go=0,Wi,zi;function Io(t,e=!1){if(t.flags|=8,e){t.next=zi,zi=t;return}t.next=Wi,Wi=t}function _r(){Go++}function yr(){if(--Go>0)return;if(zi){let e=zi;for(zi=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Wi;){let e=Wi;for(Wi=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(o){t||(t=o)}e=i}}if(t)throw t}function Lo(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Uo(t){let e,i=t.depsTail,o=i;for(;o;){const n=o.prevDep;o.version===-1?(o===i&&(i=n),br(o),ll(o)):e=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=n}t.deps=e,t.depsTail=i}function tr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Bo(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Bo(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===qi))return;t.globalVersion=qi;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!tr(t)){t.flags&=-3;return}const i=bt,o=oe;bt=t,oe=!0;try{Lo(t);const n=t.fn(t._value);(e.version===0||Me(n,t._value))&&(t._value=n,e.version++)}catch(n){throw e.version++,n}finally{bt=i,oe=o,Uo(t),t.flags&=-3}}function br(t,e=!1){const{dep:i,prevSub:o,nextSub:n}=t;if(o&&(o.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=o,t.nextSub=void 0),i.subs===t&&(i.subs=o,!o&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)br(r,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function ll(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}let oe=!0;const Ho=[];function Ee(){Ho.push(oe),oe=!1}function ke(){const t=Ho.pop();oe=t===void 0?!0:t}function Lr(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=bt;bt=void 0;try{e()}finally{bt=i}}}let qi=0;class hl{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!bt||!oe||bt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==bt)i=this.activeLink=new hl(bt,this),bt.deps?(i.prevDep=bt.depsTail,bt.depsTail.nextDep=i,bt.depsTail=i):bt.deps=bt.depsTail=i,jo(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const o=i.nextDep;o.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=o),i.prevDep=bt.depsTail,i.nextDep=void 0,bt.depsTail.nextDep=i,bt.depsTail=i,bt.deps===i&&(bt.deps=o)}return i}trigger(e){this.version++,qi++,this.notify(e)}notify(e){_r();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{yr()}}}function jo(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let o=e.deps;o;o=o.nextDep)jo(o)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const er=new WeakMap,Ie=Symbol(""),ir=Symbol(""),Qi=Symbol("");function Dt(t,e,i){if(oe&&bt){let o=er.get(t);o||er.set(t,o=new Map);let n=o.get(i);n||(o.set(i,n=new xr),n.map=o,n.key=i),n.track()}}function _e(t,e,i,o,n,r){const s=er.get(t);if(!s){qi++;return}const a=h=>{h&&h.trigger()};if(_r(),e==="clear")s.forEach(a);else{const h=ct(t),v=h&&pr(i);if(h&&i==="length"){const p=Number(o);s.forEach((b,S)=>{(S==="length"||S===Qi||!Qe(S)&&S>=p)&&a(b)})}else switch((i!==void 0||s.has(void 0))&&a(s.get(i)),v&&a(s.get(Qi)),e){case"add":h?v&&a(s.get("length")):(a(s.get(Ie)),ji(t)&&a(s.get(ir)));break;case"delete":h||(a(s.get(Ie)),ji(t)&&a(s.get(ir)));break;case"set":ji(t)&&a(s.get(Ie));break}}yr()}function He(t){const e=_t(t);return e===t?e:(Dt(e,"iterate",Qi),ee(t)?e:e.map(Gt))}function En(t){return Dt(t=_t(t),"iterate",Qi),t}const cl={__proto__:null,[Symbol.iterator](){return jn(this,Symbol.iterator,Gt)},concat(...t){return He(this).concat(...t.map(e=>ct(e)?He(e):e))},entries(){return jn(this,"entries",t=>(t[1]=Gt(t[1]),t))},every(t,e){return fe(this,"every",t,e,void 0,arguments)},filter(t,e){return fe(this,"filter",t,e,i=>i.map(Gt),arguments)},find(t,e){return fe(this,"find",t,e,Gt,arguments)},findIndex(t,e){return fe(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return fe(this,"findLast",t,e,Gt,arguments)},findLastIndex(t,e){return fe(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return fe(this,"forEach",t,e,void 0,arguments)},includes(...t){return Vn(this,"includes",t)},indexOf(...t){return Vn(this,"indexOf",t)},join(t){return He(this).join(t)},lastIndexOf(...t){return Vn(this,"lastIndexOf",t)},map(t,e){return fe(this,"map",t,e,void 0,arguments)},pop(){return Je(this,"pop")},push(...t){return Je(this,"push",t)},reduce(t,...e){return Ur(this,"reduce",t,e)},reduceRight(t,...e){return Ur(this,"reduceRight",t,e)},shift(){return Je(this,"shift")},some(t,e){return fe(this,"some",t,e,void 0,arguments)},splice(...t){return Je(this,"splice",t)},toReversed(){return He(this).toReversed()},toSorted(t){return He(this).toSorted(t)},toSpliced(...t){return He(this).toSpliced(...t)},unshift(...t){return Je(this,"unshift",t)},values(){return jn(this,"values",Gt)}};function jn(t,e,i){const o=En(t),n=o[e]();return o!==t&&!ee(t)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=i(r.value)),r}),n}const ul=Array.prototype;function fe(t,e,i,o,n,r){const s=En(t),a=s!==t&&!ee(t),h=s[e];if(h!==ul[e]){const b=h.apply(t,r);return a?Gt(b):b}let v=i;s!==t&&(a?v=function(b,S){return i.call(this,Gt(b),S,t)}:i.length>2&&(v=function(b,S){return i.call(this,b,S,t)}));const p=h.call(s,v,o);return a&&n?n(p):p}function Ur(t,e,i,o){const n=En(t);let r=i;return n!==t&&(ee(t)?i.length>3&&(r=function(s,a,h){return i.call(this,s,a,h,t)}):r=function(s,a,h){return i.call(this,s,Gt(a),h,t)}),n[e](r,...o)}function Vn(t,e,i){const o=_t(t);Dt(o,"iterate",Qi);const n=o[e](...i);return(n===-1||n===!1)&&Cr(i[0])?(i[0]=_t(i[0]),o[e](...i)):n}function Je(t,e,i=[]){Ee(),_r();const o=_t(t)[e].apply(t,i);return yr(),ke(),o}const dl=dr("__proto__,__v_isRef,__isVue"),Vo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Qe));function fl(t){Qe(t)||(t=String(t));const e=_t(this);return Dt(e,"has",t),e.hasOwnProperty(t)}class Wo{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,o){if(i==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return r;if(i==="__v_raw")return o===(n?r?wl:Xo:r?$o:Ko).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(o)?e:void 0;const s=ct(e);if(!n){let h;if(s&&(h=cl[i]))return h;if(i==="hasOwnProperty")return fl}const a=Reflect.get(e,i,It(e)?e:o);return(Qe(i)?Vo.has(i):dl(i))||(n||Dt(e,"get",i),r)?a:It(a)?s&&pr(i)?a:a.value:At(a)?n?Yo(a):en(a):a}}class zo extends Wo{constructor(e=!1){super(!1,e)}set(e,i,o,n){let r=e[i];if(!this._isShallow){const h=Le(r);if(!ee(o)&&!Le(o)&&(r=_t(r),o=_t(o)),!ct(e)&&It(r)&&!It(o))return h?!1:(r.value=o,!0)}const s=ct(e)&&pr(i)?Number(i)<e.length:yt(e,i),a=Reflect.set(e,i,o,It(e)?e:n);return e===_t(n)&&(s?Me(o,r)&&_e(e,"set",i,o):_e(e,"add",i,o)),a}deleteProperty(e,i){const o=yt(e,i);e[i];const n=Reflect.deleteProperty(e,i);return n&&o&&_e(e,"delete",i,void 0),n}has(e,i){const o=Reflect.has(e,i);return(!Qe(i)||!Vo.has(i))&&Dt(e,"has",i),o}ownKeys(e){return Dt(e,"iterate",ct(e)?"length":Ie),Reflect.ownKeys(e)}}class gl extends Wo{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const pl=new zo,ml=new gl,vl=new zo(!0);const nr=t=>t,on=t=>Reflect.getPrototypeOf(t);function _l(t,e,i){return function(...o){const n=this.__v_raw,r=_t(n),s=ji(r),a=t==="entries"||t===Symbol.iterator&&s,h=t==="keys"&&s,v=n[t](...o),p=i?nr:e?rr:Gt;return!e&&Dt(r,"iterate",h?ir:Ie),{next(){const{value:b,done:S}=v.next();return S?{value:b,done:S}:{value:a?[p(b[0]),p(b[1])]:p(b),done:S}},[Symbol.iterator](){return this}}}}function an(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function yl(t,e){const i={get(n){const r=this.__v_raw,s=_t(r),a=_t(n);t||(Me(n,a)&&Dt(s,"get",n),Dt(s,"get",a));const{has:h}=on(s),v=e?nr:t?rr:Gt;if(h.call(s,n))return v(r.get(n));if(h.call(s,a))return v(r.get(a));r!==s&&r.get(n)},get size(){const n=this.__v_raw;return!t&&Dt(_t(n),"iterate",Ie),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,s=_t(r),a=_t(n);return t||(Me(n,a)&&Dt(s,"has",n),Dt(s,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const s=this,a=s.__v_raw,h=_t(a),v=e?nr:t?rr:Gt;return!t&&Dt(h,"iterate",Ie),a.forEach((p,b)=>n.call(r,v(p),v(b),s))}};return Lt(i,t?{add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear")}:{add(n){!e&&!ee(n)&&!Le(n)&&(n=_t(n));const r=_t(this);return on(r).has.call(r,n)||(r.add(n),_e(r,"add",n,n)),this},set(n,r){!e&&!ee(r)&&!Le(r)&&(r=_t(r));const s=_t(this),{has:a,get:h}=on(s);let v=a.call(s,n);v||(n=_t(n),v=a.call(s,n));const p=h.call(s,n);return s.set(n,r),v?Me(r,p)&&_e(s,"set",n,r):_e(s,"add",n,r),this},delete(n){const r=_t(this),{has:s,get:a}=on(r);let h=s.call(r,n);h||(n=_t(n),h=s.call(r,n)),a&&a.call(r,n);const v=r.delete(n);return h&&_e(r,"delete",n,void 0),v},clear(){const n=_t(this),r=n.size!==0,s=n.clear();return r&&_e(n,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=_l(n,t,e)}),i}function Sr(t,e){const i=yl(t,e);return(o,n,r)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?o:Reflect.get(yt(i,n)&&n in o?i:o,n,r)}const bl={get:Sr(!1,!1)},xl={get:Sr(!1,!0)},Sl={get:Sr(!0,!1)};const Ko=new WeakMap,$o=new WeakMap,Xo=new WeakMap,wl=new WeakMap;function Cl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pl(t){return t.__v_skip||!Object.isExtensible(t)?0:Cl(Ya(t))}function en(t){return Le(t)?t:wr(t,!1,pl,bl,Ko)}function Al(t){return wr(t,!1,vl,xl,$o)}function Yo(t){return wr(t,!0,ml,Sl,Xo)}function wr(t,e,i,o,n){if(!At(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=n.get(t);if(r)return r;const s=Pl(t);if(s===0)return t;const a=new Proxy(t,s===2?o:i);return n.set(t,a),a}function $e(t){return Le(t)?$e(t.__v_raw):!!(t&&t.__v_isReactive)}function Le(t){return!!(t&&t.__v_isReadonly)}function ee(t){return!!(t&&t.__v_isShallow)}function Cr(t){return t?!!t.__v_raw:!1}function _t(t){const e=t&&t.__v_raw;return e?_t(e):t}function Tl(t){return!yt(t,"__v_skip")&&Object.isExtensible(t)&&No(t,"__v_skip",!0),t}const Gt=t=>At(t)?en(t):t,rr=t=>At(t)?Yo(t):t;function It(t){return t?t.__v_isRef===!0:!1}function Xt(t){return Fl(t,!1)}function Fl(t,e){return It(t)?t:new Ml(t,e)}class Ml{constructor(e,i){this.dep=new xr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:_t(e),this._value=i?e:Gt(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,o=this.__v_isShallow||ee(e)||Le(e);e=o?e:_t(e),Me(e,i)&&(this._rawValue=e,this._value=o?e:Gt(e),this.dep.trigger())}}function qo(t){return It(t)?t.value:t}const El={get:(t,e,i)=>e==="__v_raw"?t:qo(Reflect.get(t,e,i)),set:(t,e,i,o)=>{const n=t[e];return It(n)&&!It(i)?(n.value=i,!0):Reflect.set(t,e,i,o)}};function Qo(t){return $e(t)?t:new Proxy(t,El)}class kl{constructor(e,i,o){this.fn=e,this.setter=i,this._value=void 0,this.dep=new xr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return Io(this,!0),!0}get value(){const e=this.dep.track();return Bo(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ol(t,e,i=!1){let o,n;return dt(t)?o=t:(o=t.get,n=t.set),new kl(o,n,i)}const ln={},vn=new WeakMap;let Ge;function Nl(t,e=!1,i=Ge){if(i){let o=vn.get(i);o||vn.set(i,o=[]),o.push(t)}}function Rl(t,e,i=xt){const{immediate:o,deep:n,once:r,scheduler:s,augmentJob:a,call:h}=i,v=P=>n?P:ee(P)||n===!1||n===0?Fe(P,1):Fe(P);let p,b,S,y,f=!1,T=!1;if(It(t)?(b=()=>t.value,f=ee(t)):$e(t)?(b=()=>v(t),f=!0):ct(t)?(T=!0,f=t.some(P=>$e(P)||ee(P)),b=()=>t.map(P=>{if(It(P))return P.value;if($e(P))return v(P);if(dt(P))return h?h(P,2):P()})):dt(t)?e?b=h?()=>h(t,2):t:b=()=>{if(S){Ee();try{S()}finally{ke()}}const P=Ge;Ge=p;try{return h?h(t,3,[y]):t(y)}finally{Ge=P}}:b=ue,e&&n){const P=b,k=n===!0?1/0:n;b=()=>Fe(P(),k)}const E=al(),w=()=>{p.stop(),E&&E.active&&gr(E.effects,p)};if(r&&e){const P=e;e=(...k)=>{P(...k),w()}}let _=T?new Array(t.length).fill(ln):ln;const m=P=>{if(!(!(p.flags&1)||!p.dirty&&!P))if(e){const k=p.run();if(n||f||(T?k.some((N,G)=>Me(N,_[G])):Me(k,_))){S&&S();const N=Ge;Ge=p;try{const G=[k,_===ln?void 0:T&&_[0]===ln?[]:_,y];h?h(e,3,G):e(...G),_=k}finally{Ge=N}}}else p.run()};return a&&a(m),p=new Do(b),p.scheduler=s?()=>s(m,!1):m,y=P=>Nl(P,!1,p),S=p.onStop=()=>{const P=vn.get(p);if(P){if(h)h(P,4);else for(const k of P)k();vn.delete(p)}},e?o?m(!0):_=p.run():s?s(m.bind(null,!0),!0):p.run(),w.pause=p.pause.bind(p),w.resume=p.resume.bind(p),w.stop=w,w}function Fe(t,e=1/0,i){if(e<=0||!At(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,It(t))Fe(t.value,e,i);else if(ct(t))for(let o=0;o<t.length;o++)Fe(t[o],e,i);else if($a(t)||ji(t))t.forEach(o=>{Fe(o,e,i)});else if(qa(t)){for(const o in t)Fe(t[o],e,i);for(const o of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,o)&&Fe(t[o],e,i)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nn(t,e,i,o){try{return o?t(...o):t()}catch(n){kn(n,e,i)}}function de(t,e,i,o){if(dt(t)){const n=nn(t,e,i,o);return n&&Oo(n)&&n.catch(r=>{kn(r,e,i)}),n}if(ct(t)){const n=[];for(let r=0;r<t.length;r++)n.push(de(t[r],e,i,o));return n}}function kn(t,e,i,o=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||xt;if(e){let a=e.parent;const h=e.proxy,v=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const p=a.ec;if(p){for(let b=0;b<p.length;b++)if(p[b](t,h,v)===!1)return}a=a.parent}if(r){Ee(),nn(r,null,10,[t,h,v]),ke();return}}Dl(t,i,n,o,s)}function Dl(t,e,i,o=!0,n=!1){if(n)throw t;console.error(t)}const Ht=[];let he=-1;const Xe=[];let Pe=null,Ve=0;const Jo=Promise.resolve();let _n=null;function Gl(t){const e=_n||Jo;return t?e.then(this?t.bind(this):t):e}function Il(t){let e=he+1,i=Ht.length;for(;e<i;){const o=e+i>>>1,n=Ht[o],r=Ji(n);r<t||r===t&&n.flags&2?e=o+1:i=o}return e}function Pr(t){if(!(t.flags&1)){const e=Ji(t),i=Ht[Ht.length-1];!i||!(t.flags&2)&&e>=Ji(i)?Ht.push(t):Ht.splice(Il(e),0,t),t.flags|=1,Zo()}}function Zo(){_n||(_n=Jo.then(ea))}function Ll(t){ct(t)?Xe.push(...t):Pe&&t.id===-1?Pe.splice(Ve+1,0,t):t.flags&1||(Xe.push(t),t.flags|=1),Zo()}function Br(t,e,i=he+1){for(;i<Ht.length;i++){const o=Ht[i];if(o&&o.flags&2){if(t&&o.id!==t.uid)continue;Ht.splice(i,1),i--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function ta(t){if(Xe.length){const e=[...new Set(Xe)].sort((i,o)=>Ji(i)-Ji(o));if(Xe.length=0,Pe){Pe.push(...e);return}for(Pe=e,Ve=0;Ve<Pe.length;Ve++){const i=Pe[Ve];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Pe=null,Ve=0}}const Ji=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ea(t){try{for(he=0;he<Ht.length;he++){const e=Ht[he];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;he<Ht.length;he++){const e=Ht[he];e&&(e.flags&=-2)}he=-1,Ht.length=0,ta(),_n=null,(Ht.length||Xe.length)&&ea()}}let te=null,ia=null;function yn(t){const e=te;return te=t,ia=t&&t.type.__scopeId||null,e}function We(t,e=te,i){if(!e||t._n)return t;const o=(...n)=>{o._d&&Qr(-1);const r=yn(e);let s;try{s=t(...n)}finally{yn(r),o._d&&Qr(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}function Oe(t,e,i,o){const n=t.dirs,r=e&&e.dirs;for(let s=0;s<n.length;s++){const a=n[s];r&&(a.oldValue=r[s].value);let h=a.dir[o];h&&(Ee(),de(h,i,8,[t.el,a,t,e]),ke())}}const Ul=Symbol("_vte"),Bl=t=>t.__isTeleport;function Ar(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ar(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function On(t,e){return dt(t)?Lt({name:t.name},e,{setup:t}):t}function na(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function bn(t,e,i,o,n=!1){if(ct(t)){t.forEach((f,T)=>bn(f,e&&(ct(e)?e[T]:e),i,o,n));return}if(Ki(o)&&!n){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&bn(t,e,i,o.component.subTree);return}const r=o.shapeFlag&4?kr(o.component):o.el,s=n?null:r,{i:a,r:h}=t,v=e&&e.r,p=a.refs===xt?a.refs={}:a.refs,b=a.setupState,S=_t(b),y=b===xt?()=>!1:f=>yt(S,f);if(v!=null&&v!==h&&(kt(v)?(p[v]=null,y(v)&&(b[v]=null)):It(v)&&(v.value=null)),dt(h))nn(h,a,12,[s,p]);else{const f=kt(h),T=It(h);if(f||T){const E=()=>{if(t.f){const w=f?y(h)?b[h]:p[h]:h.value;n?ct(w)&&gr(w,r):ct(w)?w.includes(r)||w.push(r):f?(p[h]=[r],y(h)&&(b[h]=p[h])):(h.value=[r],t.k&&(p[t.k]=h.value))}else f?(p[h]=s,y(h)&&(b[h]=s)):T&&(h.value=s,t.k&&(p[t.k]=s))};s?(E.id=-1,$t(E,i)):E()}}}Mn().requestIdleCallback;Mn().cancelIdleCallback;const Ki=t=>!!t.type.__asyncLoader,ra=t=>t.type.__isKeepAlive;function Hl(t,e){sa(t,"a",e)}function jl(t,e){sa(t,"da",e)}function sa(t,e,i=Rt){const o=t.__wdc||(t.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Nn(e,o,i),i){let n=i.parent;for(;n&&n.parent;)ra(n.parent.vnode)&&Vl(o,e,i,n),n=n.parent}}function Vl(t,e,i,o){const n=Nn(e,t,o,!0);Fr(()=>{gr(o[e],n)},i)}function Nn(t,e,i=Rt,o=!1){if(i){const n=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...s)=>{Ee();const a=rn(i),h=de(e,i,t,s);return a(),ke(),h});return o?n.unshift(r):n.push(r),r}}const xe=t=>(e,i=Rt)=>{(!tn||t==="sp")&&Nn(t,(...o)=>e(...o),i)},Wl=xe("bm"),Rn=xe("m"),zl=xe("bu"),Tr=xe("u"),oa=xe("bum"),Fr=xe("um"),Kl=xe("sp"),$l=xe("rtg"),Xl=xe("rtc");function Yl(t,e=Rt){Nn("ec",t,e)}const ql="components";function Ce(t,e){return Jl(ql,t,!0,e)||t}const Ql=Symbol.for("v-ndc");function Jl(t,e,i=!0,o=!1){const n=te||Rt;if(n){const r=n.type;{const a=Hh(r,!1);if(a&&(a===e||a===ie(e)||a===Fn(ie(e))))return r}const s=Hr(n[t]||r[t],e)||Hr(n.appContext[t],e);return!s&&o?r:s}}function Hr(t,e){return t&&(t[e]||t[ie(e)]||t[Fn(ie(e))])}function jr(t,e,i,o){let n;const r=i,s=ct(t);if(s||kt(t)){const a=s&&$e(t);let h=!1;a&&(h=!ee(t),t=En(t)),n=new Array(t.length);for(let v=0,p=t.length;v<p;v++)n[v]=e(h?Gt(t[v]):t[v],v,void 0,r)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,r)}else if(At(t))if(t[Symbol.iterator])n=Array.from(t,(a,h)=>e(a,h,void 0,r));else{const a=Object.keys(t);n=new Array(a.length);for(let h=0,v=a.length;h<v;h++){const p=a[h];n[h]=e(t[p],p,h,r)}}else n=[];return n}const sr=t=>t?Ma(t)?kr(t):sr(t.parent):null,$i=Lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sr(t.parent),$root:t=>sr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>la(t),$forceUpdate:t=>t.f||(t.f=()=>{Pr(t.update)}),$nextTick:t=>t.n||(t.n=Gl.bind(t.proxy)),$watch:t=>bh.bind(t)}),Wn=(t,e)=>t!==xt&&!t.__isScriptSetup&&yt(t,e),Zl={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:o,data:n,props:r,accessCache:s,type:a,appContext:h}=t;let v;if(e[0]!=="$"){const y=s[e];if(y!==void 0)switch(y){case 1:return o[e];case 2:return n[e];case 4:return i[e];case 3:return r[e]}else{if(Wn(o,e))return s[e]=1,o[e];if(n!==xt&&yt(n,e))return s[e]=2,n[e];if((v=t.propsOptions[0])&&yt(v,e))return s[e]=3,r[e];if(i!==xt&&yt(i,e))return s[e]=4,i[e];or&&(s[e]=0)}}const p=$i[e];let b,S;if(p)return e==="$attrs"&&Dt(t.attrs,"get",""),p(t);if((b=a.__cssModules)&&(b=b[e]))return b;if(i!==xt&&yt(i,e))return s[e]=4,i[e];if(S=h.config.globalProperties,yt(S,e))return S[e]},set({_:t},e,i){const{data:o,setupState:n,ctx:r}=t;return Wn(n,e)?(n[e]=i,!0):o!==xt&&yt(o,e)?(o[e]=i,!0):yt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:o,appContext:n,propsOptions:r}},s){let a;return!!i[s]||t!==xt&&yt(t,s)||Wn(e,s)||(a=r[0])&&yt(a,s)||yt(o,s)||yt($i,s)||yt(n.config.globalProperties,s)},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:yt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}};function Vr(t){return ct(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}let or=!0;function th(t){const e=la(t),i=t.proxy,o=t.ctx;or=!1,e.beforeCreate&&Wr(e.beforeCreate,t,"bc");const{data:n,computed:r,methods:s,watch:a,provide:h,inject:v,created:p,beforeMount:b,mounted:S,beforeUpdate:y,updated:f,activated:T,deactivated:E,beforeDestroy:w,beforeUnmount:_,destroyed:m,unmounted:P,render:k,renderTracked:N,renderTriggered:G,errorCaptured:g,serverPrefetch:c,expose:d,inheritAttrs:A,components:M,directives:l,filters:x}=e;if(v&&eh(v,o,null),s)for(const F in s){const O=s[F];dt(O)&&(o[F]=O.bind(i))}if(n){const F=n.call(i,i);At(F)&&(t.data=en(F))}if(or=!0,r)for(const F in r){const O=r[F],D=dt(O)?O.bind(i,i):dt(O.get)?O.get.bind(i,i):ue,U=!dt(O)&&dt(O.set)?O.set.bind(i):ue,B=re({get:D,set:U});Object.defineProperty(o,F,{enumerable:!0,configurable:!0,get:()=>B.value,set:j=>B.value=j})}if(a)for(const F in a)aa(a[F],o,i,F);if(h){const F=dt(h)?h.call(i):h;Reflect.ownKeys(F).forEach(O=>{ah(O,F[O])})}p&&Wr(p,t,"c");function C(F,O){ct(O)?O.forEach(D=>F(D.bind(i))):O&&F(O.bind(i))}if(C(Wl,b),C(Rn,S),C(zl,y),C(Tr,f),C(Hl,T),C(jl,E),C(Yl,g),C(Xl,N),C($l,G),C(oa,_),C(Fr,P),C(Kl,c),ct(d))if(d.length){const F=t.exposed||(t.exposed={});d.forEach(O=>{Object.defineProperty(F,O,{get:()=>i[O],set:D=>i[O]=D})})}else t.exposed||(t.exposed={});k&&t.render===ue&&(t.render=k),A!=null&&(t.inheritAttrs=A),M&&(t.components=M),l&&(t.directives=l),c&&na(t)}function eh(t,e,i=ue){ct(t)&&(t=ar(t));for(const o in t){const n=t[o];let r;At(n)?"default"in n?r=un(n.from||o,n.default,!0):r=un(n.from||o):r=un(n),It(r)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:s=>r.value=s}):e[o]=r}}function Wr(t,e,i){de(ct(t)?t.map(o=>o.bind(e.proxy)):t.bind(e.proxy),e,i)}function aa(t,e,i,o){let n=o.includes(".")?Sa(i,o):()=>i[o];if(kt(t)){const r=e[t];dt(r)&&Xi(n,r)}else if(dt(t))Xi(n,t.bind(i));else if(At(t))if(ct(t))t.forEach(r=>aa(r,e,i,o));else{const r=dt(t.handler)?t.handler.bind(i):e[t.handler];dt(r)&&Xi(n,r,t)}}function la(t){const e=t.type,{mixins:i,extends:o}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:s}}=t.appContext,a=r.get(e);let h;return a?h=a:!n.length&&!i&&!o?h=e:(h={},n.length&&n.forEach(v=>xn(h,v,s,!0)),xn(h,e,s)),At(e)&&r.set(e,h),h}function xn(t,e,i,o=!1){const{mixins:n,extends:r}=e;r&&xn(t,r,i,!0),n&&n.forEach(s=>xn(t,s,i,!0));for(const s in e)if(!(o&&s==="expose")){const a=ih[s]||i&&i[s];t[s]=a?a(t[s],e[s]):e[s]}return t}const ih={data:zr,props:Kr,emits:Kr,methods:Hi,computed:Hi,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:Hi,directives:Hi,watch:rh,provide:zr,inject:nh};function zr(t,e){return e?t?function(){return Lt(dt(t)?t.call(this,this):t,dt(e)?e.call(this,this):e)}:e:t}function nh(t,e){return Hi(ar(t),ar(e))}function ar(t){if(ct(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function Bt(t,e){return t?[...new Set([].concat(t,e))]:e}function Hi(t,e){return t?Lt(Object.create(null),t,e):e}function Kr(t,e){return t?ct(t)&&ct(e)?[...new Set([...t,...e])]:Lt(Object.create(null),Vr(t),Vr(e??{})):e}function rh(t,e){if(!t)return e;if(!e)return t;const i=Lt(Object.create(null),t);for(const o in e)i[o]=Bt(t[o],e[o]);return i}function ha(){return{app:null,config:{isNativeTag:za,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sh=0;function oh(t,e){return function(o,n=null){dt(o)||(o=Lt({},o)),n!=null&&!At(n)&&(n=null);const r=ha(),s=new WeakSet,a=[];let h=!1;const v=r.app={_uid:sh++,_component:o,_props:n,_container:null,_context:r,_instance:null,version:Vh,get config(){return r.config},set config(p){},use(p,...b){return s.has(p)||(p&&dt(p.install)?(s.add(p),p.install(v,...b)):dt(p)&&(s.add(p),p(v,...b))),v},mixin(p){return r.mixins.includes(p)||r.mixins.push(p),v},component(p,b){return b?(r.components[p]=b,v):r.components[p]},directive(p,b){return b?(r.directives[p]=b,v):r.directives[p]},mount(p,b,S){if(!h){const y=v._ceVNode||vt(o,n);return y.appContext=r,S===!0?S="svg":S===!1&&(S=void 0),t(y,p,S),h=!0,v._container=p,p.__vue_app__=v,kr(y.component)}},onUnmount(p){a.push(p)},unmount(){h&&(de(a,v._instance,16),t(null,v._container),delete v._container.__vue_app__)},provide(p,b){return r.provides[p]=b,v},runWithContext(p){const b=Ye;Ye=v;try{return p()}finally{Ye=b}}};return v}}let Ye=null;function ah(t,e){if(Rt){let i=Rt.provides;const o=Rt.parent&&Rt.parent.provides;o===i&&(i=Rt.provides=Object.create(o)),i[t]=e}}function un(t,e,i=!1){const o=Rt||te;if(o||Ye){const n=Ye?Ye._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return i&&dt(e)?e.call(o&&o.proxy):e}}const ca={},ua=()=>Object.create(ca),da=t=>Object.getPrototypeOf(t)===ca;function lh(t,e,i,o=!1){const n={},r=ua();t.propsDefaults=Object.create(null),fa(t,e,n,r);for(const s in t.propsOptions[0])s in n||(n[s]=void 0);i?t.props=o?n:Al(n):t.type.props?t.props=n:t.props=r,t.attrs=r}function hh(t,e,i,o){const{props:n,attrs:r,vnode:{patchFlag:s}}=t,a=_t(n),[h]=t.propsOptions;let v=!1;if((o||s>0)&&!(s&16)){if(s&8){const p=t.vnode.dynamicProps;for(let b=0;b<p.length;b++){let S=p[b];if(Dn(t.emitsOptions,S))continue;const y=e[S];if(h)if(yt(r,S))y!==r[S]&&(r[S]=y,v=!0);else{const f=ie(S);n[f]=lr(h,a,f,y,t,!1)}else y!==r[S]&&(r[S]=y,v=!0)}}}else{fa(t,e,n,r)&&(v=!0);let p;for(const b in a)(!e||!yt(e,b)&&((p=Be(b))===b||!yt(e,p)))&&(h?i&&(i[b]!==void 0||i[p]!==void 0)&&(n[b]=lr(h,a,b,void 0,t,!0)):delete n[b]);if(r!==a)for(const b in r)(!e||!yt(e,b))&&(delete r[b],v=!0)}v&&_e(t.attrs,"set","")}function fa(t,e,i,o){const[n,r]=t.propsOptions;let s=!1,a;if(e)for(let h in e){if(Vi(h))continue;const v=e[h];let p;n&&yt(n,p=ie(h))?!r||!r.includes(p)?i[p]=v:(a||(a={}))[p]=v:Dn(t.emitsOptions,h)||(!(h in o)||v!==o[h])&&(o[h]=v,s=!0)}if(r){const h=_t(i),v=a||xt;for(let p=0;p<r.length;p++){const b=r[p];i[b]=lr(n,h,b,v[b],t,!yt(v,b))}}return s}function lr(t,e,i,o,n,r){const s=t[i];if(s!=null){const a=yt(s,"default");if(a&&o===void 0){const h=s.default;if(s.type!==Function&&!s.skipFactory&&dt(h)){const{propsDefaults:v}=n;if(i in v)o=v[i];else{const p=rn(n);o=v[i]=h.call(null,e),p()}}else o=h;n.ce&&n.ce._setProp(i,o)}s[0]&&(r&&!a?o=!1:s[1]&&(o===""||o===Be(i))&&(o=!0))}return o}const ch=new WeakMap;function ga(t,e,i=!1){const o=i?ch:e.propsCache,n=o.get(t);if(n)return n;const r=t.props,s={},a=[];let h=!1;if(!dt(t)){const p=b=>{h=!0;const[S,y]=ga(b,e,!0);Lt(s,S),y&&a.push(...y)};!i&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}if(!r&&!h)return At(t)&&o.set(t,Ke),Ke;if(ct(r))for(let p=0;p<r.length;p++){const b=ie(r[p]);$r(b)&&(s[b]=xt)}else if(r)for(const p in r){const b=ie(p);if($r(b)){const S=r[p],y=s[b]=ct(S)||dt(S)?{type:S}:Lt({},S),f=y.type;let T=!1,E=!0;if(ct(f))for(let w=0;w<f.length;++w){const _=f[w],m=dt(_)&&_.name;if(m==="Boolean"){T=!0;break}else m==="String"&&(E=!1)}else T=dt(f)&&f.name==="Boolean";y[0]=T,y[1]=E,(T||yt(y,"default"))&&a.push(b)}}const v=[s,a];return At(t)&&o.set(t,v),v}function $r(t){return t[0]!=="$"&&!Vi(t)}const pa=t=>t[0]==="_"||t==="$stable",Mr=t=>ct(t)?t.map(ce):[ce(t)],uh=(t,e,i)=>{if(e._n)return e;const o=We((...n)=>Mr(e(...n)),i);return o._c=!1,o},ma=(t,e,i)=>{const o=t._ctx;for(const n in t){if(pa(n))continue;const r=t[n];if(dt(r))e[n]=uh(n,r,o);else if(r!=null){const s=Mr(r);e[n]=()=>s}}},va=(t,e)=>{const i=Mr(e);t.slots.default=()=>i},_a=(t,e,i)=>{for(const o in e)(i||o!=="_")&&(t[o]=e[o])},dh=(t,e,i)=>{const o=t.slots=ua();if(t.vnode.shapeFlag&32){const n=e._;n?(_a(o,e,i),i&&No(o,"_",n,!0)):ma(e,o)}else e&&va(t,e)},fh=(t,e,i)=>{const{vnode:o,slots:n}=t;let r=!0,s=xt;if(o.shapeFlag&32){const a=e._;a?i&&a===1?r=!1:_a(n,e,i):(r=!e.$stable,ma(e,n)),s=e}else e&&(va(t,e),s={default:1});if(r)for(const a in n)!pa(a)&&s[a]==null&&delete n[a]},$t=Th;function gh(t){return ph(t)}function ph(t,e){const i=Mn();i.__VUE__=!0;const{insert:o,remove:n,patchProp:r,createElement:s,createText:a,createComment:h,setText:v,setElementText:p,parentNode:b,nextSibling:S,setScopeId:y=ue,insertStaticContent:f}=t,T=(R,L,H,V=null,z=null,K=null,nt=void 0,tt=null,et=!!L.dynamicChildren)=>{if(R===L)return;R&&!Ze(R,L)&&(V=I(R),j(R,z,K,!0),R=null),L.patchFlag===-2&&(et=!1,L.dynamicChildren=null);const{type:$,ref:st,shapeFlag:rt}=L;switch($){case Gn:E(R,L,H,V);break;case Ue:w(R,L,H,V);break;case Kn:R==null&&_(L,H,V,nt);break;case se:M(R,L,H,V,z,K,nt,tt,et);break;default:rt&1?k(R,L,H,V,z,K,nt,tt,et):rt&6?l(R,L,H,V,z,K,nt,tt,et):(rt&64||rt&128)&&$.process(R,L,H,V,z,K,nt,tt,et,Z)}st!=null&&z&&bn(st,R&&R.ref,K,L||R,!L)},E=(R,L,H,V)=>{if(R==null)o(L.el=a(L.children),H,V);else{const z=L.el=R.el;L.children!==R.children&&v(z,L.children)}},w=(R,L,H,V)=>{R==null?o(L.el=h(L.children||""),H,V):L.el=R.el},_=(R,L,H,V)=>{[R.el,R.anchor]=f(R.children,L,H,V,R.el,R.anchor)},m=({el:R,anchor:L},H,V)=>{let z;for(;R&&R!==L;)z=S(R),o(R,H,V),R=z;o(L,H,V)},P=({el:R,anchor:L})=>{let H;for(;R&&R!==L;)H=S(R),n(R),R=H;n(L)},k=(R,L,H,V,z,K,nt,tt,et)=>{L.type==="svg"?nt="svg":L.type==="math"&&(nt="mathml"),R==null?N(L,H,V,z,K,nt,tt,et):c(R,L,z,K,nt,tt,et)},N=(R,L,H,V,z,K,nt,tt)=>{let et,$;const{props:st,shapeFlag:rt,transition:ot,dirs:at}=R;if(et=R.el=s(R.type,K,st&&st.is,st),rt&8?p(et,R.children):rt&16&&g(R.children,et,null,V,z,zn(R,K),nt,tt),at&&Oe(R,null,V,"created"),G(et,R,R.scopeId,nt,V),st){for(const ft in st)ft!=="value"&&!Vi(ft)&&r(et,ft,null,st[ft],K,V);"value"in st&&r(et,"value",null,st.value,K),($=st.onVnodeBeforeMount)&&le($,V,R)}at&&Oe(R,null,V,"beforeMount");const lt=mh(z,ot);lt&&ot.beforeEnter(et),o(et,L,H),(($=st&&st.onVnodeMounted)||lt||at)&&$t(()=>{$&&le($,V,R),lt&&ot.enter(et),at&&Oe(R,null,V,"mounted")},z)},G=(R,L,H,V,z)=>{if(H&&y(R,H),V)for(let K=0;K<V.length;K++)y(R,V[K]);if(z){let K=z.subTree;if(L===K||Ca(K.type)&&(K.ssContent===L||K.ssFallback===L)){const nt=z.vnode;G(R,nt,nt.scopeId,nt.slotScopeIds,z.parent)}}},g=(R,L,H,V,z,K,nt,tt,et=0)=>{for(let $=et;$<R.length;$++){const st=R[$]=tt?Te(R[$]):ce(R[$]);T(null,st,L,H,V,z,K,nt,tt)}},c=(R,L,H,V,z,K,nt)=>{const tt=L.el=R.el;let{patchFlag:et,dynamicChildren:$,dirs:st}=L;et|=R.patchFlag&16;const rt=R.props||xt,ot=L.props||xt;let at;if(H&&Ne(H,!1),(at=ot.onVnodeBeforeUpdate)&&le(at,H,L,R),st&&Oe(L,R,H,"beforeUpdate"),H&&Ne(H,!0),(rt.innerHTML&&ot.innerHTML==null||rt.textContent&&ot.textContent==null)&&p(tt,""),$?d(R.dynamicChildren,$,tt,H,V,zn(L,z),K):nt||O(R,L,tt,null,H,V,zn(L,z),K,!1),et>0){if(et&16)A(tt,rt,ot,H,z);else if(et&2&&rt.class!==ot.class&&r(tt,"class",null,ot.class,z),et&4&&r(tt,"style",rt.style,ot.style,z),et&8){const lt=L.dynamicProps;for(let ft=0;ft<lt.length;ft++){const ut=lt[ft],Pt=rt[ut],Et=ot[ut];(Et!==Pt||ut==="value")&&r(tt,ut,Pt,Et,z,H)}}et&1&&R.children!==L.children&&p(tt,L.children)}else!nt&&$==null&&A(tt,rt,ot,H,z);((at=ot.onVnodeUpdated)||st)&&$t(()=>{at&&le(at,H,L,R),st&&Oe(L,R,H,"updated")},V)},d=(R,L,H,V,z,K,nt)=>{for(let tt=0;tt<L.length;tt++){const et=R[tt],$=L[tt],st=et.el&&(et.type===se||!Ze(et,$)||et.shapeFlag&70)?b(et.el):H;T(et,$,st,null,V,z,K,nt,!0)}},A=(R,L,H,V,z)=>{if(L!==H){if(L!==xt)for(const K in L)!Vi(K)&&!(K in H)&&r(R,K,L[K],null,z,V);for(const K in H){if(Vi(K))continue;const nt=H[K],tt=L[K];nt!==tt&&K!=="value"&&r(R,K,tt,nt,z,V)}"value"in H&&r(R,"value",L.value,H.value,z)}},M=(R,L,H,V,z,K,nt,tt,et)=>{const $=L.el=R?R.el:a(""),st=L.anchor=R?R.anchor:a("");let{patchFlag:rt,dynamicChildren:ot,slotScopeIds:at}=L;at&&(tt=tt?tt.concat(at):at),R==null?(o($,H,V),o(st,H,V),g(L.children||[],H,st,z,K,nt,tt,et)):rt>0&&rt&64&&ot&&R.dynamicChildren?(d(R.dynamicChildren,ot,H,z,K,nt,tt),(L.key!=null||z&&L===z.subTree)&&ya(R,L,!0)):O(R,L,H,st,z,K,nt,tt,et)},l=(R,L,H,V,z,K,nt,tt,et)=>{L.slotScopeIds=tt,R==null?L.shapeFlag&512?z.ctx.activate(L,H,V,nt,et):x(L,H,V,z,K,nt,et):u(R,L,et)},x=(R,L,H,V,z,K,nt)=>{const tt=R.component=Gh(R,V,z);if(ra(R)&&(tt.ctx.renderer=Z),Ih(tt,!1,nt),tt.asyncDep){if(z&&z.registerDep(tt,C,nt),!R.el){const et=tt.subTree=vt(Ue);w(null,et,L,H)}}else C(tt,R,L,H,z,K,nt)},u=(R,L,H)=>{const V=L.component=R.component;if(Ph(R,L,H))if(V.asyncDep&&!V.asyncResolved){F(V,L,H);return}else V.next=L,V.update();else L.el=R.el,V.vnode=L},C=(R,L,H,V,z,K,nt)=>{const tt=()=>{if(R.isMounted){let{next:rt,bu:ot,u:at,parent:lt,vnode:ft}=R;{const Ft=ba(R);if(Ft){rt&&(rt.el=ft.el,F(R,rt,nt)),Ft.asyncDep.then(()=>{R.isUnmounted||tt()});return}}let ut=rt,Pt;Ne(R,!1),rt?(rt.el=ft.el,F(R,rt,nt)):rt=ft,ot&&Bn(ot),(Pt=rt.props&&rt.props.onVnodeBeforeUpdate)&&le(Pt,lt,rt,ft),Ne(R,!0);const Et=Yr(R),wt=R.subTree;R.subTree=Et,T(wt,Et,b(wt.el),I(wt),R,z,K),rt.el=Et.el,ut===null&&Ah(R,Et.el),at&&$t(at,z),(Pt=rt.props&&rt.props.onVnodeUpdated)&&$t(()=>le(Pt,lt,rt,ft),z)}else{let rt;const{el:ot,props:at}=L,{bm:lt,m:ft,parent:ut,root:Pt,type:Et}=R,wt=Ki(L);Ne(R,!1),lt&&Bn(lt),!wt&&(rt=at&&at.onVnodeBeforeMount)&&le(rt,ut,L),Ne(R,!0);{Pt.ce&&Pt.ce._injectChildStyle(Et);const Ft=R.subTree=Yr(R);T(null,Ft,H,V,R,z,K),L.el=Ft.el}if(ft&&$t(ft,z),!wt&&(rt=at&&at.onVnodeMounted)){const Ft=L;$t(()=>le(rt,ut,Ft),z)}(L.shapeFlag&256||ut&&Ki(ut.vnode)&&ut.vnode.shapeFlag&256)&&R.a&&$t(R.a,z),R.isMounted=!0,L=H=V=null}};R.scope.on();const et=R.effect=new Do(tt);R.scope.off();const $=R.update=et.run.bind(et),st=R.job=et.runIfDirty.bind(et);st.i=R,st.id=R.uid,et.scheduler=()=>Pr(st),Ne(R,!0),$()},F=(R,L,H)=>{L.component=R;const V=R.vnode.props;R.vnode=L,R.next=null,hh(R,L.props,V,H),fh(R,L.children,H),Ee(),Br(R),ke()},O=(R,L,H,V,z,K,nt,tt,et=!1)=>{const $=R&&R.children,st=R?R.shapeFlag:0,rt=L.children,{patchFlag:ot,shapeFlag:at}=L;if(ot>0){if(ot&128){U($,rt,H,V,z,K,nt,tt,et);return}else if(ot&256){D($,rt,H,V,z,K,nt,tt,et);return}}at&8?(st&16&&J($,z,K),rt!==$&&p(H,rt)):st&16?at&16?U($,rt,H,V,z,K,nt,tt,et):J($,z,K,!0):(st&8&&p(H,""),at&16&&g(rt,H,V,z,K,nt,tt,et))},D=(R,L,H,V,z,K,nt,tt,et)=>{R=R||Ke,L=L||Ke;const $=R.length,st=L.length,rt=Math.min($,st);let ot;for(ot=0;ot<rt;ot++){const at=L[ot]=et?Te(L[ot]):ce(L[ot]);T(R[ot],at,H,null,z,K,nt,tt,et)}$>st?J(R,z,K,!0,!1,rt):g(L,H,V,z,K,nt,tt,et,rt)},U=(R,L,H,V,z,K,nt,tt,et)=>{let $=0;const st=L.length;let rt=R.length-1,ot=st-1;for(;$<=rt&&$<=ot;){const at=R[$],lt=L[$]=et?Te(L[$]):ce(L[$]);if(Ze(at,lt))T(at,lt,H,null,z,K,nt,tt,et);else break;$++}for(;$<=rt&&$<=ot;){const at=R[rt],lt=L[ot]=et?Te(L[ot]):ce(L[ot]);if(Ze(at,lt))T(at,lt,H,null,z,K,nt,tt,et);else break;rt--,ot--}if($>rt){if($<=ot){const at=ot+1,lt=at<st?L[at].el:V;for(;$<=ot;)T(null,L[$]=et?Te(L[$]):ce(L[$]),H,lt,z,K,nt,tt,et),$++}}else if($>ot)for(;$<=rt;)j(R[$],z,K,!0),$++;else{const at=$,lt=$,ft=new Map;for($=lt;$<=ot;$++){const Kt=L[$]=et?Te(L[$]):ce(L[$]);Kt.key!=null&&ft.set(Kt.key,$)}let ut,Pt=0;const Et=ot-lt+1;let wt=!1,Ft=0;const jt=new Array(Et);for($=0;$<Et;$++)jt[$]=0;for($=at;$<=rt;$++){const Kt=R[$];if(Pt>=Et){j(Kt,z,K,!0);continue}let ae;if(Kt.key!=null)ae=ft.get(Kt.key);else for(ut=lt;ut<=ot;ut++)if(jt[ut-lt]===0&&Ze(Kt,L[ut])){ae=ut;break}ae===void 0?j(Kt,z,K,!0):(jt[ae-lt]=$+1,ae>=Ft?Ft=ae:wt=!0,T(Kt,L[ae],H,null,z,K,nt,tt,et),Pt++)}const sn=wt?vh(jt):Ke;for(ut=sn.length-1,$=Et-1;$>=0;$--){const Kt=lt+$,ae=L[Kt],Gr=Kt+1<st?L[Kt+1].el:V;jt[$]===0?T(null,ae,H,Gr,z,K,nt,tt,et):wt&&(ut<0||$!==sn[ut]?B(ae,H,Gr,2):ut--)}}},B=(R,L,H,V,z=null)=>{const{el:K,type:nt,transition:tt,children:et,shapeFlag:$}=R;if($&6){B(R.component.subTree,L,H,V);return}if($&128){R.suspense.move(L,H,V);return}if($&64){nt.move(R,L,H,Z);return}if(nt===se){o(K,L,H);for(let rt=0;rt<et.length;rt++)B(et[rt],L,H,V);o(R.anchor,L,H);return}if(nt===Kn){m(R,L,H);return}if(V!==2&&$&1&&tt)if(V===0)tt.beforeEnter(K),o(K,L,H),$t(()=>tt.enter(K),z);else{const{leave:rt,delayLeave:ot,afterLeave:at}=tt,lt=()=>o(K,L,H),ft=()=>{rt(K,()=>{lt(),at&&at()})};ot?ot(K,lt,ft):ft()}else o(K,L,H)},j=(R,L,H,V=!1,z=!1)=>{const{type:K,props:nt,ref:tt,children:et,dynamicChildren:$,shapeFlag:st,patchFlag:rt,dirs:ot,cacheIndex:at}=R;if(rt===-2&&(z=!1),tt!=null&&bn(tt,null,H,R,!0),at!=null&&(L.renderCache[at]=void 0),st&256){L.ctx.deactivate(R);return}const lt=st&1&&ot,ft=!Ki(R);let ut;if(ft&&(ut=nt&&nt.onVnodeBeforeUnmount)&&le(ut,L,R),st&6)q(R.component,H,V);else{if(st&128){R.suspense.unmount(H,V);return}lt&&Oe(R,null,L,"beforeUnmount"),st&64?R.type.remove(R,L,H,Z,V):$&&!$.hasOnce&&(K!==se||rt>0&&rt&64)?J($,L,H,!1,!0):(K===se&&rt&384||!z&&st&16)&&J(et,L,H),V&&X(R)}(ft&&(ut=nt&&nt.onVnodeUnmounted)||lt)&&$t(()=>{ut&&le(ut,L,R),lt&&Oe(R,null,L,"unmounted")},H)},X=R=>{const{type:L,el:H,anchor:V,transition:z}=R;if(L===se){Y(H,V);return}if(L===Kn){P(R);return}const K=()=>{n(H),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(R.shapeFlag&1&&z&&!z.persisted){const{leave:nt,delayLeave:tt}=z,et=()=>nt(H,K);tt?tt(R.el,K,et):et()}else K()},Y=(R,L)=>{let H;for(;R!==L;)H=S(R),n(R),R=H;n(L)},q=(R,L,H)=>{const{bum:V,scope:z,job:K,subTree:nt,um:tt,m:et,a:$}=R;Xr(et),Xr($),V&&Bn(V),z.stop(),K&&(K.flags|=8,j(nt,R,L,H)),tt&&$t(tt,L),$t(()=>{R.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},J=(R,L,H,V=!1,z=!1,K=0)=>{for(let nt=K;nt<R.length;nt++)j(R[nt],L,H,V,z)},I=R=>{if(R.shapeFlag&6)return I(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const L=S(R.anchor||R.el),H=L&&L[Ul];return H?S(H):L};let W=!1;const Q=(R,L,H)=>{R==null?L._vnode&&j(L._vnode,null,null,!0):T(L._vnode||null,R,L,null,null,null,H),L._vnode=R,W||(W=!0,Br(),ta(),W=!1)},Z={p:T,um:j,m:B,r:X,mt:x,mc:g,pc:O,pbc:d,n:I,o:t};return{render:Q,hydrate:void 0,createApp:oh(Q)}}function zn({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Ne({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ya(t,e,i=!1){const o=t.children,n=e.children;if(ct(o)&&ct(n))for(let r=0;r<o.length;r++){const s=o[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Te(n[r]),a.el=s.el),!i&&a.patchFlag!==-2&&ya(s,a)),a.type===Gn&&(a.el=s.el)}}function vh(t){const e=t.slice(),i=[0];let o,n,r,s,a;const h=t.length;for(o=0;o<h;o++){const v=t[o];if(v!==0){if(n=i[i.length-1],t[n]<v){e[o]=n,i.push(o);continue}for(r=0,s=i.length-1;r<s;)a=r+s>>1,t[i[a]]<v?r=a+1:s=a;v<t[i[r]]&&(r>0&&(e[o]=i[r-1]),i[r]=o)}}for(r=i.length,s=i[r-1];r-- >0;)i[r]=s,s=e[s];return i}function ba(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ba(e)}function Xr(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _h=Symbol.for("v-scx"),yh=()=>un(_h);function Xi(t,e,i){return xa(t,e,i)}function xa(t,e,i=xt){const{immediate:o,deep:n,flush:r,once:s}=i,a=Lt({},i),h=e&&o||!e&&r!=="post";let v;if(tn){if(r==="sync"){const y=yh();v=y.__watcherHandles||(y.__watcherHandles=[])}else if(!h){const y=()=>{};return y.stop=ue,y.resume=ue,y.pause=ue,y}}const p=Rt;a.call=(y,f,T)=>de(y,p,f,T);let b=!1;r==="post"?a.scheduler=y=>{$t(y,p&&p.suspense)}:r!=="sync"&&(b=!0,a.scheduler=(y,f)=>{f?y():Pr(y)}),a.augmentJob=y=>{e&&(y.flags|=4),b&&(y.flags|=2,p&&(y.id=p.uid,y.i=p))};const S=Rl(t,e,a);return tn&&(v?v.push(S):h&&S()),S}function bh(t,e,i){const o=this.proxy,n=kt(t)?t.includes(".")?Sa(o,t):()=>o[t]:t.bind(o,o);let r;dt(e)?r=e:(r=e.handler,i=e);const s=rn(this),a=xa(n,r.bind(o),i);return s(),a}function Sa(t,e){const i=e.split(".");return()=>{let o=t;for(let n=0;n<i.length&&o;n++)o=o[i[n]];return o}}const xh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ie(e)}Modifiers`]||t[`${Be(e)}Modifiers`];function Sh(t,e,...i){if(t.isUnmounted)return;const o=t.vnode.props||xt;let n=i;const r=e.startsWith("update:"),s=r&&xh(o,e.slice(7));s&&(s.trim&&(n=i.map(p=>kt(p)?p.trim():p)),s.number&&(n=i.map(Za)));let a,h=o[a=Un(e)]||o[a=Un(ie(e))];!h&&r&&(h=o[a=Un(Be(e))]),h&&de(h,t,6,n);const v=o[a+"Once"];if(v){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,de(v,t,6,n)}}function wa(t,e,i=!1){const o=e.emitsCache,n=o.get(t);if(n!==void 0)return n;const r=t.emits;let s={},a=!1;if(!dt(t)){const h=v=>{const p=wa(v,e,!0);p&&(a=!0,Lt(s,p))};!i&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!r&&!a?(At(t)&&o.set(t,null),null):(ct(r)?r.forEach(h=>s[h]=null):Lt(s,r),At(t)&&o.set(t,s),s)}function Dn(t,e){return!t||!Pn(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(t,e[0].toLowerCase()+e.slice(1))||yt(t,Be(e))||yt(t,e))}function Yr(t){const{type:e,vnode:i,proxy:o,withProxy:n,propsOptions:[r],slots:s,attrs:a,emit:h,render:v,renderCache:p,props:b,data:S,setupState:y,ctx:f,inheritAttrs:T}=t,E=yn(t);let w,_;try{if(i.shapeFlag&4){const P=n||o,k=P;w=ce(v.call(k,P,p,b,y,S,f)),_=a}else{const P=e;w=ce(P.length>1?P(b,{attrs:a,slots:s,emit:h}):P(b,null)),_=e.props?a:wh(a)}}catch(P){Yi.length=0,kn(P,t,1),w=vt(Ue)}let m=w;if(_&&T!==!1){const P=Object.keys(_),{shapeFlag:k}=m;P.length&&k&7&&(r&&P.some(fr)&&(_=Ch(_,r)),m=qe(m,_,!1,!0))}return i.dirs&&(m=qe(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(i.dirs):i.dirs),i.transition&&Ar(m,i.transition),w=m,yn(E),w}const wh=t=>{let e;for(const i in t)(i==="class"||i==="style"||Pn(i))&&((e||(e={}))[i]=t[i]);return e},Ch=(t,e)=>{const i={};for(const o in t)(!fr(o)||!(o.slice(9)in e))&&(i[o]=t[o]);return i};function Ph(t,e,i){const{props:o,children:n,component:r}=t,{props:s,children:a,patchFlag:h}=e,v=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return o?qr(o,s,v):!!s;if(h&8){const p=e.dynamicProps;for(let b=0;b<p.length;b++){const S=p[b];if(s[S]!==o[S]&&!Dn(v,S))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:o===s?!1:o?s?qr(o,s,v):!0:!!s;return!1}function qr(t,e,i){const o=Object.keys(e);if(o.length!==Object.keys(t).length)return!0;for(let n=0;n<o.length;n++){const r=o[n];if(e[r]!==t[r]&&!Dn(i,r))return!0}return!1}function Ah({vnode:t,parent:e},i){for(;e;){const o=e.subTree;if(o.suspense&&o.suspense.activeBranch===t&&(o.el=t.el),o===t)(t=e.vnode).el=i,e=e.parent;else break}}const Ca=t=>t.__isSuspense;function Th(t,e){e&&e.pendingBranch?ct(t)?e.effects.push(...t):e.effects.push(t):Ll(t)}const se=Symbol.for("v-fgt"),Gn=Symbol.for("v-txt"),Ue=Symbol.for("v-cmt"),Kn=Symbol.for("v-stc"),Yi=[];let qt=null;function Ae(t=!1){Yi.push(qt=t?null:[])}function Fh(){Yi.pop(),qt=Yi[Yi.length-1]||null}let Zi=1;function Qr(t,e=!1){Zi+=t,t<0&&qt&&e&&(qt.hasOnce=!0)}function Pa(t){return t.dynamicChildren=Zi>0?qt||Ke:null,Fh(),Zi>0&&qt&&qt.push(t),t}function dn(t,e,i,o,n,r){return Pa(Ta(t,e,i,o,n,r,!0))}function fn(t,e,i,o,n){return Pa(vt(t,e,i,o,n,!0))}function Sn(t){return t?t.__v_isVNode===!0:!1}function Ze(t,e){return t.type===e.type&&t.key===e.key}const Aa=({key:t})=>t??null,gn=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?kt(t)||It(t)||dt(t)?{i:te,r:t,k:e,f:!!i}:t:null);function Ta(t,e=null,i=null,o=0,n=null,r=t===se?0:1,s=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Aa(e),ref:e&&gn(e),scopeId:ia,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:te};return a?(Er(h,i),r&128&&t.normalize(h)):i&&(h.shapeFlag|=kt(i)?8:16),Zi>0&&!s&&qt&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&qt.push(h),h}const vt=Mh;function Mh(t,e=null,i=null,o=0,n=null,r=!1){if((!t||t===Ql)&&(t=Ue),Sn(t)){const a=qe(t,e,!0);return i&&Er(a,i),Zi>0&&!r&&qt&&(a.shapeFlag&6?qt[qt.indexOf(t)]=a:qt.push(a)),a.patchFlag=-2,a}if(jh(t)&&(t=t.__vccOpts),e){e=Eh(e);let{class:a,style:h}=e;a&&!kt(a)&&(e.class=vr(a)),At(h)&&(Cr(h)&&!ct(h)&&(h=Lt({},h)),e.style=mr(h))}const s=kt(t)?1:Ca(t)?128:Bl(t)?64:At(t)?4:dt(t)?2:0;return Ta(t,e,i,o,n,s,r,!0)}function Eh(t){return t?Cr(t)||da(t)?Lt({},t):t:null}function qe(t,e,i=!1,o=!1){const{props:n,ref:r,patchFlag:s,children:a,transition:h}=t,v=e?Nh(n||{},e):n,p={__v_isVNode:!0,__v_skip:!0,type:t.type,props:v,key:v&&Aa(v),ref:e&&e.ref?i&&r?ct(r)?r.concat(gn(e)):[r,gn(e)]:gn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==se?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:h,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qe(t.ssContent),ssFallback:t.ssFallback&&qe(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return h&&o&&Ar(p,h.clone(p)),p}function kh(t=" ",e=0){return vt(Gn,null,t,e)}function Oh(t="",e=!1){return e?(Ae(),fn(Ue,null,t)):vt(Ue,null,t)}function ce(t){return t==null||typeof t=="boolean"?vt(Ue):ct(t)?vt(se,null,t.slice()):Sn(t)?Te(t):vt(Gn,null,String(t))}function Te(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:qe(t)}function Er(t,e){let i=0;const{shapeFlag:o}=t;if(e==null)e=null;else if(ct(e))i=16;else if(typeof e=="object")if(o&65){const n=e.default;n&&(n._c&&(n._d=!1),Er(t,n()),n._c&&(n._d=!0));return}else{i=32;const n=e._;!n&&!da(e)?e._ctx=te:n===3&&te&&(te.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else dt(e)?(e={default:e,_ctx:te},i=32):(e=String(e),o&64?(i=16,e=[kh(e)]):i=8);t.children=e,t.shapeFlag|=i}function Nh(...t){const e={};for(let i=0;i<t.length;i++){const o=t[i];for(const n in o)if(n==="class")e.class!==o.class&&(e.class=vr([e.class,o.class]));else if(n==="style")e.style=mr([e.style,o.style]);else if(Pn(n)){const r=e[n],s=o[n];s&&r!==s&&!(ct(r)&&r.includes(s))&&(e[n]=r?[].concat(r,s):s)}else n!==""&&(e[n]=o[n])}return e}function le(t,e,i,o=null){de(t,e,7,[i,o])}const Rh=ha();let Dh=0;function Gh(t,e,i){const o=t.type,n=(e?e.appContext:t.appContext)||Rh,r={uid:Dh++,vnode:t,type:o,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ol(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ga(o,n),emitsOptions:wa(o,n),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:o.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Sh.bind(null,r),t.ce&&t.ce(r),r}let Rt=null;const Fa=()=>Rt||te;let wn,hr;{const t=Mn(),e=(i,o)=>{let n;return(n=t[i])||(n=t[i]=[]),n.push(o),r=>{n.length>1?n.forEach(s=>s(r)):n[0](r)}};wn=e("__VUE_INSTANCE_SETTERS__",i=>Rt=i),hr=e("__VUE_SSR_SETTERS__",i=>tn=i)}const rn=t=>{const e=Rt;return wn(t),t.scope.on(),()=>{t.scope.off(),wn(e)}},Jr=()=>{Rt&&Rt.scope.off(),wn(null)};function Ma(t){return t.vnode.shapeFlag&4}let tn=!1;function Ih(t,e=!1,i=!1){e&&hr(e);const{props:o,children:n}=t.vnode,r=Ma(t);lh(t,o,r,e),dh(t,n,i);const s=r?Lh(t,e):void 0;return e&&hr(!1),s}function Lh(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Zl);const{setup:o}=i;if(o){Ee();const n=t.setupContext=o.length>1?Bh(t):null,r=rn(t),s=nn(o,t,0,[t.props,n]),a=Oo(s);if(ke(),r(),(a||t.sp)&&!Ki(t)&&na(t),a){if(s.then(Jr,Jr),e)return s.then(h=>{Zr(t,h)}).catch(h=>{kn(h,t,0)});t.asyncDep=s}else Zr(t,s)}else Ea(t)}function Zr(t,e,i){dt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:At(e)&&(t.setupState=Qo(e)),Ea(t)}function Ea(t,e,i){const o=t.type;t.render||(t.render=o.render||ue);{const n=rn(t);Ee();try{th(t)}finally{ke(),n()}}}const Uh={get(t,e){return Dt(t,"get",""),t[e]}};function Bh(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,Uh),slots:t.slots,emit:t.emit,expose:e}}function kr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Qo(Tl(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in $i)return $i[i](t)},has(e,i){return i in e||i in $i}})):t.proxy}function Hh(t,e=!0){return dt(t)?t.displayName||t.name:t.name||e&&t.__name}function jh(t){return dt(t)&&"__vccOpts"in t}const re=(t,e)=>Ol(t,e,tn);function ka(t,e,i){const o=arguments.length;return o===2?At(e)&&!ct(e)?Sn(e)?vt(t,null,[e]):vt(t,e):vt(t,null,e):(o>3?i=Array.prototype.slice.call(arguments,2):o===3&&Sn(i)&&(i=[i]),vt(t,e,i))}const Vh="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cr;const ts=typeof window<"u"&&window.trustedTypes;if(ts)try{cr=ts.createPolicy("vue",{createHTML:t=>t})}catch{}const Oa=cr?t=>cr.createHTML(t):t=>t,Wh="http://www.w3.org/2000/svg",zh="http://www.w3.org/1998/Math/MathML",ve=typeof document<"u"?document:null,es=ve&&ve.createElement("template"),Kh={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,o)=>{const n=e==="svg"?ve.createElementNS(Wh,t):e==="mathml"?ve.createElementNS(zh,t):i?ve.createElement(t,{is:i}):ve.createElement(t);return t==="select"&&o&&o.multiple!=null&&n.setAttribute("multiple",o.multiple),n},createText:t=>ve.createTextNode(t),createComment:t=>ve.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ve.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,o,n,r){const s=i?i.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),i),!(n===r||!(n=n.nextSibling)););else{es.innerHTML=Oa(o==="svg"?`<svg>${t}</svg>`:o==="mathml"?`<math>${t}</math>`:t);const a=es.content;if(o==="svg"||o==="mathml"){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}e.insertBefore(a,i)}return[s?s.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},$h=Symbol("_vtc");function Xh(t,e,i){const o=t[$h];o&&(e=(e?[e,...o]:[...o]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const is=Symbol("_vod"),Yh=Symbol("_vsh"),qh=Symbol(""),Qh=/(^|;)\s*display\s*:/;function Jh(t,e,i){const o=t.style,n=kt(i);let r=!1;if(i&&!n){if(e)if(kt(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();i[a]==null&&pn(o,a,"")}else for(const s in e)i[s]==null&&pn(o,s,"");for(const s in i)s==="display"&&(r=!0),pn(o,s,i[s])}else if(n){if(e!==i){const s=o[qh];s&&(i+=";"+s),o.cssText=i,r=Qh.test(i)}}else e&&t.removeAttribute("style");is in t&&(t[is]=r?o.display:"",t[Yh]&&(o.display="none"))}const ns=/\s*!important$/;function pn(t,e,i){if(ct(i))i.forEach(o=>pn(t,e,o));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const o=Zh(t,e);ns.test(i)?t.setProperty(Be(o),i.replace(ns,""),"important"):t[o]=i}}const rs=["Webkit","Moz","ms"],$n={};function Zh(t,e){const i=$n[e];if(i)return i;let o=ie(e);if(o!=="filter"&&o in t)return $n[e]=o;o=Fn(o);for(let n=0;n<rs.length;n++){const r=rs[n]+o;if(r in t)return $n[e]=r}return e}const ss="http://www.w3.org/1999/xlink";function os(t,e,i,o,n,r=sl(e)){o&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(ss,e.slice(6,e.length)):t.setAttributeNS(ss,e,i):i==null||r&&!Ro(i)?t.removeAttribute(e):t.setAttribute(e,r?"":Qe(i)?String(i):i)}function as(t,e,i,o,n){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?Oa(i):i);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,h=i==null?t.type==="checkbox"?"on":"":String(i);(a!==h||!("_value"in t))&&(t.value=h),i==null&&t.removeAttribute(e),t._value=i;return}let s=!1;if(i===""||i==null){const a=typeof t[e];a==="boolean"?i=Ro(i):i==null&&a==="string"?(i="",s=!0):a==="number"&&(i=0,s=!0)}try{t[e]=i}catch{}s&&t.removeAttribute(n||e)}function tc(t,e,i,o){t.addEventListener(e,i,o)}function ec(t,e,i,o){t.removeEventListener(e,i,o)}const ls=Symbol("_vei");function ic(t,e,i,o,n=null){const r=t[ls]||(t[ls]={}),s=r[e];if(o&&s)s.value=o;else{const[a,h]=nc(e);if(o){const v=r[e]=oc(o,n);tc(t,a,v,h)}else s&&(ec(t,a,s,h),r[e]=void 0)}}const hs=/(?:Once|Passive|Capture)$/;function nc(t){let e;if(hs.test(t)){e={};let o;for(;o=t.match(hs);)t=t.slice(0,t.length-o[0].length),e[o[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Be(t.slice(2)),e]}let Xn=0;const rc=Promise.resolve(),sc=()=>Xn||(rc.then(()=>Xn=0),Xn=Date.now());function oc(t,e){const i=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=i.attached)return;de(ac(o,i.value),e,5,[o])};return i.value=t,i.attached=sc(),i}function ac(t,e){if(ct(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(o=>n=>!n._stopped&&o&&o(n))}else return e}const cs=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,lc=(t,e,i,o,n,r)=>{const s=n==="svg";e==="class"?Xh(t,o,s):e==="style"?Jh(t,i,o):Pn(e)?fr(e)||ic(t,e,i,o,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hc(t,e,o,s))?(as(t,e,o),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&os(t,e,o,s,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!kt(o))?as(t,ie(e),o,r,e):(e==="true-value"?t._trueValue=o:e==="false-value"&&(t._falseValue=o),os(t,e,o,s))};function hc(t,e,i,o){if(o)return!!(e==="innerHTML"||e==="textContent"||e in t&&cs(e)&&dt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return cs(e)&&kt(i)?!1:e in t}const cc=Lt({patchProp:lc},Kh);let us;function uc(){return us||(us=gh(cc))}const dc=(...t)=>{const e=uc().createApp(...t),{mount:i}=e;return e.mount=o=>{const n=gc(o);if(!n)return;const r=e._component;!dt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const s=i(n,!1,fc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),s},e};function fc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function gc(t){return kt(t)?document.querySelector(t):t}const pc="modulepreload",mc=function(t){return"/"+t},ds={},vc=function(e,i,o){let n=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));n=Promise.allSettled(i.map(h=>{if(h=mc(h),h in ds)return;ds[h]=!0;const v=h.endsWith(".css"),p=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":pc,v||(b.as="script"),b.crossOrigin="",b.href=h,a&&b.setAttribute("nonce",a),document.head.appendChild(b),v)return new Promise((S,y)=>{b.addEventListener("load",S),b.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return n.then(s=>{for(const a of s||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},_c=On({__name:"App",setup(t){const e={},i=Xt({currentPrice:3606.17,priceScale:2,qtyScale:4}),o=Xt({bids:[],asks:[]});return(()=>{console.info("Start loading mock data"),vc(()=>import("./index-BD0kgJ1c.js"),[]).then(r=>{o.value={bids:r.bids,asks:r.asks}})})(),(r,s)=>{const a=Ce("depthChart");return Ae(),dn("main",null,[vt(a,{options:e,symbolData:i.value,depthData:o.value},null,8,["symbolData","depthData"])])}}}),yc=(t,e)=>{const i=t.__vccOpts||t;for(const[o,n]of e)i[o]=n;return i},bc=yc(_c,[["__scopeId","data-v-e8d0bd1a"]]);var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mn={exports:{}},ti={},gs={},ps={},ms;function gt(){return ms||(ms=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof fs<"u"?fs:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.18",isBrowser:i(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return t.Konva.angleDeg?n*e:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var n;return(n=t.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(n){t.glob.Konva=n}};const o=n=>{t.Konva[n.prototype.getClassName()]=n};t._registerNode=o,t.Konva._injectGlobal(t.Konva)}(ps)),ps}var vs={},_s;function Tt(){return _s||(_s=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=gt();class i{constructor(P=[1,0,0,1,0,0]){this.dirty=!1,this.m=P&&P.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(P){P.m[0]=this.m[0],P.m[1]=this.m[1],P.m[2]=this.m[2],P.m[3]=this.m[3],P.m[4]=this.m[4],P.m[5]=this.m[5]}point(P){const k=this.m;return{x:k[0]*P.x+k[2]*P.y+k[4],y:k[1]*P.x+k[3]*P.y+k[5]}}translate(P,k){return this.m[4]+=this.m[0]*P+this.m[2]*k,this.m[5]+=this.m[1]*P+this.m[3]*k,this}scale(P,k){return this.m[0]*=P,this.m[1]*=P,this.m[2]*=k,this.m[3]*=k,this}rotate(P){const k=Math.cos(P),N=Math.sin(P),G=this.m[0]*k+this.m[2]*N,g=this.m[1]*k+this.m[3]*N,c=this.m[0]*-N+this.m[2]*k,d=this.m[1]*-N+this.m[3]*k;return this.m[0]=G,this.m[1]=g,this.m[2]=c,this.m[3]=d,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(P,k){const N=this.m[0]+this.m[2]*k,G=this.m[1]+this.m[3]*k,g=this.m[2]+this.m[0]*P,c=this.m[3]+this.m[1]*P;return this.m[0]=N,this.m[1]=G,this.m[2]=g,this.m[3]=c,this}multiply(P){const k=this.m[0]*P.m[0]+this.m[2]*P.m[1],N=this.m[1]*P.m[0]+this.m[3]*P.m[1],G=this.m[0]*P.m[2]+this.m[2]*P.m[3],g=this.m[1]*P.m[2]+this.m[3]*P.m[3],c=this.m[0]*P.m[4]+this.m[2]*P.m[5]+this.m[4],d=this.m[1]*P.m[4]+this.m[3]*P.m[5]+this.m[5];return this.m[0]=k,this.m[1]=N,this.m[2]=G,this.m[3]=g,this.m[4]=c,this.m[5]=d,this}invert(){const P=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),k=this.m[3]*P,N=-this.m[1]*P,G=-this.m[2]*P,g=this.m[0]*P,c=P*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),d=P*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=k,this.m[1]=N,this.m[2]=G,this.m[3]=g,this.m[4]=c,this.m[5]=d,this}getMatrix(){return this.m}decompose(){const P=this.m[0],k=this.m[1],N=this.m[2],G=this.m[3],g=this.m[4],c=this.m[5],d=P*G-k*N,A={x:g,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(P!=0||k!=0){const M=Math.sqrt(P*P+k*k);A.rotation=k>0?Math.acos(P/M):-Math.acos(P/M),A.scaleX=M,A.scaleY=d/M,A.skewX=(P*N+k*G)/d,A.skewY=0}else if(N!=0||G!=0){const M=Math.sqrt(N*N+G*G);A.rotation=Math.PI/2-(G>0?Math.acos(-N/M):-Math.acos(N/M)),A.scaleX=d/M,A.scaleY=M,A.skewX=0,A.skewY=(P*N+k*G)/d}return A.rotation=t.Util._getRotation(A.rotation),A}}t.Transform=i;const o="[object Array]",n="[object Number]",r="[object String]",s="[object Boolean]",a=Math.PI/180,h=180/Math.PI,v="#",p="",b="0",S="Konva warning: ",y="Konva error: ",f="rgb(",T={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},E=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let w=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(m){setTimeout(m,60)};t.Util={_isElement(m){return!!(m&&m.nodeType==1)},_isFunction(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject(m){return!!m&&m.constructor===Object},_isArray(m){return Object.prototype.toString.call(m)===o},_isNumber(m){return Object.prototype.toString.call(m)===n&&!isNaN(m)&&isFinite(m)},_isString(m){return Object.prototype.toString.call(m)===r},_isBoolean(m){return Object.prototype.toString.call(m)===s},isObject(m){return m instanceof Object},isValidSelector(m){if(typeof m!="string")return!1;const P=m[0];return P==="#"||P==="."||P===P.toUpperCase()},_sign(m){return m===0||m>0?1:-1},requestAnimFrame(m){w.push(m),w.length===1&&_(function(){const P=w;w=[],P.forEach(function(k){k()})})},createCanvasElement(){const m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement(){return document.createElement("img")},_isInDocument(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_urlToImage(m,P){const k=t.Util.createImageElement();k.onload=function(){P(k)},k.src=m},_rgbToHex(m,P,k){return((1<<24)+(m<<16)+(P<<8)+k).toString(16).slice(1)},_hexToRgb(m){m=m.replace(v,p);const P=parseInt(m,16);return{r:P>>16&255,g:P>>8&255,b:P&255}},getRandomColor(){let m=(Math.random()*16777215<<0).toString(16);for(;m.length<6;)m=b+m;return v+m},getRGB(m){let P;return m in T?(P=T[m],{r:P[0],g:P[1],b:P[2]}):m[0]===v?this._hexToRgb(m.substring(1)):m.substr(0,4)===f?(P=E.exec(m.replace(/ /g,"")),{r:parseInt(P[1],10),g:parseInt(P[2],10),b:parseInt(P[3],10)}):{r:0,g:0,b:0}},colorToRGBA(m){return m=m||"black",t.Util._namedColorToRBA(m)||t.Util._hex3ColorToRGBA(m)||t.Util._hex4ColorToRGBA(m)||t.Util._hex6ColorToRGBA(m)||t.Util._hex8ColorToRGBA(m)||t.Util._rgbColorToRGBA(m)||t.Util._rgbaColorToRGBA(m)||t.Util._hslColorToRGBA(m)},_namedColorToRBA(m){const P=T[m.toLowerCase()];return P?{r:P[0],g:P[1],b:P[2],a:1}:null},_rgbColorToRGBA(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];const P=m.split(/ *, */).map(Number);return{r:P[0],g:P[1],b:P[2],a:1}}},_rgbaColorToRGBA(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];const P=m.split(/ *, */).map((k,N)=>k.slice(-1)==="%"?N===3?parseInt(k)/100:parseInt(k)/100*255:Number(k));return{r:P[0],g:P[1],b:P[2],a:P[3]}}},_hex8ColorToRGBA(m){if(m[0]==="#"&&m.length===9)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:parseInt(m.slice(7,9),16)/255}},_hex6ColorToRGBA(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex4ColorToRGBA(m){if(m[0]==="#"&&m.length===5)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:parseInt(m[4]+m[4],16)/255}},_hex3ColorToRGBA(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){const[P,...k]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m),N=Number(k[0])/360,G=Number(k[1])/100,g=Number(k[2])/100;let c,d,A;if(G===0)return A=g*255,{r:Math.round(A),g:Math.round(A),b:Math.round(A),a:1};g<.5?c=g*(1+G):c=g+G-g*G;const M=2*g-c,l=[0,0,0];for(let x=0;x<3;x++)d=N+1/3*-(x-1),d<0&&d++,d>1&&d--,6*d<1?A=M+(c-M)*6*d:2*d<1?A=c:3*d<2?A=M+(c-M)*(2/3-d)*6:A=M,l[x]=A*255;return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection(m,P){return!(P.x>m.x+m.width||P.x+P.width<m.x||P.y>m.y+m.height||P.y+P.height<m.y)},cloneObject(m){const P={};for(const k in m)this._isPlainObject(m[k])?P[k]=this.cloneObject(m[k]):this._isArray(m[k])?P[k]=this.cloneArray(m[k]):P[k]=m[k];return P},cloneArray(m){return m.slice(0)},degToRad(m){return m*a},radToDeg(m){return m*h},_degToRad(m){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(m)},_radToDeg(m){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(m)},_getRotation(m){return e.Konva.angleDeg?t.Util.radToDeg(m):m},_capitalize(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw(m){throw new Error(y+m)},error(m){console.error(y+m)},warn(m){e.Konva.showWarnings&&console.warn(S+m)},each(m,P){for(const k in m)P(k,m[k])},_inRange(m,P,k){return P<=m&&m<k},_getProjectionToSegment(m,P,k,N,G,g){let c,d,A;const M=(m-k)*(m-k)+(P-N)*(P-N);if(M==0)c=m,d=P,A=(G-k)*(G-k)+(g-N)*(g-N);else{const l=((G-m)*(k-m)+(g-P)*(N-P))/M;l<0?(c=m,d=P,A=(m-G)*(m-G)+(P-g)*(P-g)):l>1?(c=k,d=N,A=(k-G)*(k-G)+(N-g)*(N-g)):(c=m+l*(k-m),d=P+l*(N-P),A=(c-G)*(c-G)+(d-g)*(d-g))}return[c,d,A]},_getProjectionToLine(m,P,k){const N=t.Util.cloneObject(m);let G=Number.MAX_VALUE;return P.forEach(function(g,c){if(!k&&c===P.length-1)return;const d=P[(c+1)%P.length],A=t.Util._getProjectionToSegment(g.x,g.y,d.x,d.y,m.x,m.y),M=A[0],l=A[1],x=A[2];x<G&&(N.x=M,N.y=l,G=x)}),N},_prepareArrayForTween(m,P,k){const N=[],G=[];if(m.length>P.length){const c=P;P=m,m=c}for(let c=0;c<m.length;c+=2)N.push({x:m[c],y:m[c+1]});for(let c=0;c<P.length;c+=2)G.push({x:P[c],y:P[c+1]});const g=[];return G.forEach(function(c){const d=t.Util._getProjectionToLine(c,N,k);g.push(d.x),g.push(d.y)}),g},_prepareToStringify(m){let P;m.visitedByCircularReferenceRemoval=!0;for(const k in m)if(m.hasOwnProperty(k)&&m[k]&&typeof m[k]=="object"){if(P=Object.getOwnPropertyDescriptor(m,k),m[k].visitedByCircularReferenceRemoval||t.Util._isElement(m[k]))if(P.configurable)delete m[k];else return null;else if(t.Util._prepareToStringify(m[k])===null)if(P.configurable)delete m[k];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign(m,P){for(const k in P)m[k]=P[k];return m},_getFirstPointerId(m){return m.touches?m.changedTouches[0].identifier:m.pointerId||999},releaseCanvas(...m){e.Konva.releaseCanvasOnDestroy&&m.forEach(P=>{P.width=0,P.height=0})},drawRoundedRectPath(m,P,k,N){let G=0,g=0,c=0,d=0;typeof N=="number"?G=g=c=d=Math.min(N,P/2,k/2):(G=Math.min(N[0]||0,P/2,k/2),g=Math.min(N[1]||0,P/2,k/2),d=Math.min(N[2]||0,P/2,k/2),c=Math.min(N[3]||0,P/2,k/2)),m.moveTo(G,0),m.lineTo(P-g,0),m.arc(P-g,g,g,Math.PI*3/2,0,!1),m.lineTo(P,k-d),m.arc(P-d,k-d,d,0,Math.PI/2,!1),m.lineTo(c,k),m.arc(c,k-c,c,Math.PI/2,Math.PI,!1),m.lineTo(0,G),m.arc(G,G,G,Math.PI,Math.PI*3/2,!1)}}}(vs)),vs}var ei={},ys={},Vt={},bs;function mt(){if(bs)return Vt;bs=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.RGBComponent=o,Vt.alphaComponent=n,Vt.getNumberValidator=r,Vt.getNumberOrArrayOfNumbersValidator=s,Vt.getNumberOrAutoValidator=a,Vt.getStringValidator=h,Vt.getStringOrGradientValidator=v,Vt.getFunctionValidator=p,Vt.getNumberArrayValidator=b,Vt.getBooleanValidator=S,Vt.getComponentValidator=y;const t=gt(),e=Tt();function i(f){return e.Util._isString(f)?'"'+f+'"':Object.prototype.toString.call(f)==="[object Number]"||e.Util._isBoolean(f)?f:Object.prototype.toString.call(f)}function o(f){return f>255?255:f<0?0:Math.round(f)}function n(f){return f>1?1:f<1e-4?1e-4:f}function r(){if(t.Konva.isUnminified)return function(f,T){return e.Util._isNumber(f)||e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a number.'),f}}function s(f){if(t.Konva.isUnminified)return function(T,E){let w=e.Util._isNumber(T),_=e.Util._isArray(T)&&T.length==f;return!w&&!_&&e.Util.warn(i(T)+' is a not valid value for "'+E+'" attribute. The value should be a number or Array<number>('+f+")"),T}}function a(){if(t.Konva.isUnminified)return function(f,T){var E=e.Util._isNumber(f),w=f==="auto";return E||w||e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a number or "auto".'),f}}function h(){if(t.Konva.isUnminified)return function(f,T){return e.Util._isString(f)||e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a string.'),f}}function v(){if(t.Konva.isUnminified)return function(f,T){const E=e.Util._isString(f),w=Object.prototype.toString.call(f)==="[object CanvasGradient]"||f&&f.addColorStop;return E||w||e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a string or a native gradient.'),f}}function p(){if(t.Konva.isUnminified)return function(f,T){return e.Util._isFunction(f)||e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a function.'),f}}function b(){if(t.Konva.isUnminified)return function(f,T){const E=Int8Array?Object.getPrototypeOf(Int8Array):null;return E&&f instanceof E||(e.Util._isArray(f)?f.forEach(function(w){e.Util._isNumber(w)||e.Util.warn('"'+T+'" attribute has non numeric element '+w+". Make sure that all elements are numbers.")}):e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a array of numbers.')),f}}function S(){if(t.Konva.isUnminified)return function(f,T){var E=f===!0||f===!1;return E||e.Util.warn(i(f)+' is a not valid value for "'+T+'" attribute. The value should be a boolean.'),f}}function y(f){if(t.Konva.isUnminified)return function(T,E){return T==null||e.Util.isObject(T)||e.Util.warn(i(T)+' is a not valid value for "'+E+'" attribute. The value should be an object with properties '+f),T}}return Vt}var xs;function pt(){return xs||(xs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=Tt(),i=mt(),o="get",n="set";t.Factory={addGetterSetter(r,s,a,h,v){t.Factory.addGetter(r,s,a),t.Factory.addSetter(r,s,h,v),t.Factory.addOverloadedGetterSetter(r,s)},addGetter(r,s,a){var h=o+e.Util._capitalize(s);r.prototype[h]=r.prototype[h]||function(){const v=this.attrs[s];return v===void 0?a:v}},addSetter(r,s,a,h){var v=n+e.Util._capitalize(s);r.prototype[v]||t.Factory.overWriteSetter(r,s,a,h)},overWriteSetter(r,s,a,h){var v=n+e.Util._capitalize(s);r.prototype[v]=function(p){return a&&p!==void 0&&p!==null&&(p=a.call(this,p,s)),this._setAttr(s,p),h&&h.call(this),this}},addComponentsGetterSetter(r,s,a,h,v){const p=a.length,b=e.Util._capitalize,S=o+b(s),y=n+b(s);r.prototype[S]=function(){const T={};for(let E=0;E<p;E++){const w=a[E];T[w]=this.getAttr(s+b(w))}return T};const f=(0,i.getComponentValidator)(a);r.prototype[y]=function(T){const E=this.attrs[s];h&&(T=h.call(this,T,s)),f&&f.call(this,T,s);for(const w in T)T.hasOwnProperty(w)&&this._setAttr(s+b(w),T[w]);return T||a.forEach(w=>{this._setAttr(s+b(w),void 0)}),this._fireChangeEvent(s,E,T),v&&v.call(this),this},t.Factory.addOverloadedGetterSetter(r,s)},addOverloadedGetterSetter(r,s){var a=e.Util._capitalize(s),h=n+a,v=o+a;r.prototype[s]=function(){return arguments.length?(this[h](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(r,s,a,h){e.Util.error("Adding deprecated "+s);const v=o+e.Util._capitalize(s),p=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[v]=function(){e.Util.error(p);const b=this.attrs[s];return b===void 0?a:b},t.Factory.addSetter(r,s,h,function(){e.Util.error(p)}),t.Factory.addOverloadedGetterSetter(r,s)},backCompat(r,s){e.Util.each(s,function(a,h){const v=r.prototype[h],p=o+e.Util._capitalize(a),b=n+e.Util._capitalize(a);function S(){v.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+h+'" instead.')}r.prototype[a]=S,r.prototype[p]=S,r.prototype[b]=S})},afterSetFilter(){this._filterUpToDate=!1}}}(ys)),ys}var ge={},pe={},Ss;function Na(){if(Ss)return pe;Ss=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.HitContext=pe.SceneContext=pe.Context=void 0;const t=Tt(),e=gt();function i(w){const _=[],m=w.length,P=t.Util;for(let k=0;k<m;k++){let N=w[k];P._isNumber(N)?N=Math.round(N*1e3)/1e3:P._isString(N)||(N=N+""),_.push(N)}return _}const o=",",n="(",r=")",s="([",a="])",h=";",v="()",p="=",b=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],S=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],y=100;let f=class{constructor(w){this.canvas=w,e.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(w){w.fillEnabled()&&this._fill(w)}_fill(w){}strokeShape(w){w.hasStroke()&&this._stroke(w)}_stroke(w){}fillStrokeShape(w){w.attrs.fillAfterStrokeEnabled?(this.strokeShape(w),this.fillShape(w)):(this.fillShape(w),this.strokeShape(w))}getTrace(w,_){let m=this.traceArr,P=m.length,k="",N,G,g,c;for(N=0;N<P;N++)G=m[N],g=G.method,g?(c=G.args,k+=g,w?k+=v:t.Util._isArray(c[0])?k+=s+c.join(o)+a:(_&&(c=c.map(d=>typeof d=="number"?Math.floor(d):d)),k+=n+c.join(o)+r)):(k+=G.property,w||(k+=p+G.val)),k+=h;return k}clearTrace(){this.traceArr=[]}_trace(w){let _=this.traceArr,m;_.push(w),m=_.length,m>=y&&_.shift()}reset(){const w=this.getCanvas().getPixelRatio();this.setTransform(1*w,0,0,1*w,0,0)}getCanvas(){return this.canvas}clear(w){const _=this.getCanvas();w?this.clearRect(w.x||0,w.y||0,w.width||0,w.height||0):this.clearRect(0,0,_.getWidth()/_.pixelRatio,_.getHeight()/_.pixelRatio)}_applyLineCap(w){const _=w.attrs.lineCap;_&&this.setAttr("lineCap",_)}_applyOpacity(w){const _=w.getAbsoluteOpacity();_!==1&&this.setAttr("globalAlpha",_)}_applyLineJoin(w){const _=w.attrs.lineJoin;_&&this.setAttr("lineJoin",_)}setAttr(w,_){this._context[w]=_}arc(w,_,m,P,k,N){this._context.arc(w,_,m,P,k,N)}arcTo(w,_,m,P,k){this._context.arcTo(w,_,m,P,k)}beginPath(){this._context.beginPath()}bezierCurveTo(w,_,m,P,k,N){this._context.bezierCurveTo(w,_,m,P,k,N)}clearRect(w,_,m,P){this._context.clearRect(w,_,m,P)}clip(...w){this._context.clip.apply(this._context,w)}closePath(){this._context.closePath()}createImageData(w,_){const m=arguments;if(m.length===2)return this._context.createImageData(w,_);if(m.length===1)return this._context.createImageData(w)}createLinearGradient(w,_,m,P){return this._context.createLinearGradient(w,_,m,P)}createPattern(w,_){return this._context.createPattern(w,_)}createRadialGradient(w,_,m,P,k,N){return this._context.createRadialGradient(w,_,m,P,k,N)}drawImage(w,_,m,P,k,N,G,g,c){const d=arguments,A=this._context;d.length===3?A.drawImage(w,_,m):d.length===5?A.drawImage(w,_,m,P,k):d.length===9&&A.drawImage(w,_,m,P,k,N,G,g,c)}ellipse(w,_,m,P,k,N,G,g){this._context.ellipse(w,_,m,P,k,N,G,g)}isPointInPath(w,_,m,P){return m?this._context.isPointInPath(m,w,_,P):this._context.isPointInPath(w,_,P)}fill(...w){this._context.fill.apply(this._context,w)}fillRect(w,_,m,P){this._context.fillRect(w,_,m,P)}strokeRect(w,_,m,P){this._context.strokeRect(w,_,m,P)}fillText(w,_,m,P){P?this._context.fillText(w,_,m,P):this._context.fillText(w,_,m)}measureText(w){return this._context.measureText(w)}getImageData(w,_,m,P){return this._context.getImageData(w,_,m,P)}lineTo(w,_){this._context.lineTo(w,_)}moveTo(w,_){this._context.moveTo(w,_)}rect(w,_,m,P){this._context.rect(w,_,m,P)}roundRect(w,_,m,P,k){this._context.roundRect(w,_,m,P,k)}putImageData(w,_,m){this._context.putImageData(w,_,m)}quadraticCurveTo(w,_,m,P){this._context.quadraticCurveTo(w,_,m,P)}restore(){this._context.restore()}rotate(w){this._context.rotate(w)}save(){this._context.save()}scale(w,_){this._context.scale(w,_)}setLineDash(w){this._context.setLineDash?this._context.setLineDash(w):"mozDash"in this._context?this._context.mozDash=w:"webkitLineDash"in this._context&&(this._context.webkitLineDash=w)}getLineDash(){return this._context.getLineDash()}setTransform(w,_,m,P,k,N){this._context.setTransform(w,_,m,P,k,N)}stroke(w){w?this._context.stroke(w):this._context.stroke()}strokeText(w,_,m,P){this._context.strokeText(w,_,m,P)}transform(w,_,m,P,k,N){this._context.transform(w,_,m,P,k,N)}translate(w,_){this._context.translate(w,_)}_enableTrace(){let w=this,_=b.length,m=this.setAttr,P,k;const N=function(G){let g=w[G],c;w[G]=function(){return k=i(Array.prototype.slice.call(arguments,0)),c=g.apply(w,arguments),w._trace({method:G,args:k}),c}};for(P=0;P<_;P++)N(b[P]);w.setAttr=function(){m.apply(w,arguments);const G=arguments[0];let g=arguments[1];(G==="shadowOffsetX"||G==="shadowOffsetY"||G==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),w._trace({property:G,val:g})}}_applyGlobalCompositeOperation(w){const _=w.attrs.globalCompositeOperation;!_||_==="source-over"||this.setAttr("globalCompositeOperation",_)}};pe.Context=f,S.forEach(function(w){Object.defineProperty(f.prototype,w,{get(){return this._context[w]},set(_){this._context[w]=_}})});class T extends f{constructor(_,{willReadFrequently:m=!1}={}){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:m})}_fillColor(_){const m=_.fill();this.setAttr("fillStyle",m),_._fillFunc(this)}_fillPattern(_){this.setAttr("fillStyle",_._getFillPattern()),_._fillFunc(this)}_fillLinearGradient(_){const m=_._getLinearGradient();m&&(this.setAttr("fillStyle",m),_._fillFunc(this))}_fillRadialGradient(_){const m=_._getRadialGradient();m&&(this.setAttr("fillStyle",m),_._fillFunc(this))}_fill(_){const m=_.fill(),P=_.getFillPriority();if(m&&P==="color"){this._fillColor(_);return}const k=_.getFillPatternImage();if(k&&P==="pattern"){this._fillPattern(_);return}const N=_.getFillLinearGradientColorStops();if(N&&P==="linear-gradient"){this._fillLinearGradient(_);return}const G=_.getFillRadialGradientColorStops();if(G&&P==="radial-gradient"){this._fillRadialGradient(_);return}m?this._fillColor(_):k?this._fillPattern(_):N?this._fillLinearGradient(_):G&&this._fillRadialGradient(_)}_strokeLinearGradient(_){const m=_.getStrokeLinearGradientStartPoint(),P=_.getStrokeLinearGradientEndPoint(),k=_.getStrokeLinearGradientColorStops(),N=this.createLinearGradient(m.x,m.y,P.x,P.y);if(k){for(let G=0;G<k.length;G+=2)N.addColorStop(k[G],k[G+1]);this.setAttr("strokeStyle",N)}}_stroke(_){const m=_.dash(),P=_.getStrokeScaleEnabled();if(_.hasStroke()){if(!P){this.save();const k=this.getCanvas().getPixelRatio();this.setTransform(k,0,0,k,0,0)}this._applyLineCap(_),m&&_.dashEnabled()&&(this.setLineDash(m),this.setAttr("lineDashOffset",_.dashOffset())),this.setAttr("lineWidth",_.strokeWidth()),_.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),_.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(_):this.setAttr("strokeStyle",_.stroke()),_._strokeFunc(this),P||this.restore()}}_applyShadow(_){var m,P,k;const N=(m=_.getShadowRGBA())!==null&&m!==void 0?m:"black",G=(P=_.getShadowBlur())!==null&&P!==void 0?P:5,g=(k=_.getShadowOffset())!==null&&k!==void 0?k:{x:0,y:0},c=_.getAbsoluteScale(),d=this.canvas.getPixelRatio(),A=c.x*d,M=c.y*d;this.setAttr("shadowColor",N),this.setAttr("shadowBlur",G*Math.min(Math.abs(A),Math.abs(M))),this.setAttr("shadowOffsetX",g.x*A),this.setAttr("shadowOffsetY",g.y*M)}}pe.SceneContext=T;class E extends f{constructor(_){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:!0})}_fill(_){this.save(),this.setAttr("fillStyle",_.colorKey),_._fillFuncHit(this),this.restore()}strokeShape(_){_.hasHitStroke()&&this._stroke(_)}_stroke(_){if(_.hasHitStroke()){const m=_.getStrokeScaleEnabled();if(!m){this.save();const N=this.getCanvas().getPixelRatio();this.setTransform(N,0,0,N,0,0)}this._applyLineCap(_);const P=_.hitStrokeWidth(),k=P==="auto"?_.strokeWidth():P;this.setAttr("lineWidth",k),this.setAttr("strokeStyle",_.colorKey),_._strokeFuncHit(this),m||this.restore()}}}return pe.HitContext=E,pe}var ws;function In(){if(ws)return ge;ws=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.HitCanvas=ge.SceneCanvas=ge.Canvas=void 0;const t=Tt(),e=Na(),i=gt(),o=pt(),n=mt();let r;function s(){if(r)return r;const p=t.Util.createCanvasElement(),b=p.getContext("2d");return r=function(){const S=i.Konva._global.devicePixelRatio||1,y=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return S/y}(),t.Util.releaseCanvas(p),r}let a=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const b=(p||{}).pixelRatio||i.Konva.pixelRatio||s();this.pixelRatio=b,this._canvas=t.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const b=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/b,this.getHeight()/b)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const b=this.pixelRatio;this.getContext()._context.scale(b,b)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const b=this.pixelRatio;this.getContext()._context.scale(b,b)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,b){this.setWidth(p||0),this.setHeight(b||0)}toDataURL(p,b){try{return this._canvas.toDataURL(p,b)}catch{try{return this._canvas.toDataURL()}catch(S){return t.Util.error("Unable to get data URL. "+S.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ge.Canvas=a,o.Factory.addGetterSetter(a,"pixelRatio",void 0,(0,n.getNumberValidator)());class h extends a{constructor(b={width:0,height:0,willReadFrequently:!1}){super(b),this.context=new e.SceneContext(this,{willReadFrequently:b.willReadFrequently}),this.setSize(b.width,b.height)}}ge.SceneCanvas=h;class v extends a{constructor(b={width:0,height:0}){super(b),this.hitCanvas=!0,this.context=new e.HitContext(this),this.setSize(b.width,b.height)}}return ge.HitCanvas=v,ge}var Cs={},Ps;function Or(){return Ps||(Ps=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=gt(),i=Tt();t.DD={get isDragging(){let o=!1;return t.DD._dragElements.forEach(n=>{n.dragStatus==="dragging"&&(o=!0)}),o},justDragged:!1,get node(){let o;return t.DD._dragElements.forEach(n=>{o=n.node}),o},_dragElements:new Map,_drag(o){const n=[];t.DD._dragElements.forEach((r,s)=>{const{node:a}=r,h=a.getStage();h.setPointersPositions(o),r.pointerId===void 0&&(r.pointerId=i.Util._getFirstPointerId(o));const v=h._changedPointerPositions.find(p=>p.id===r.pointerId);if(v){if(r.dragStatus!=="dragging"){const p=a.dragDistance();if(Math.max(Math.abs(v.x-r.startPointerPos.x),Math.abs(v.y-r.startPointerPos.y))<p||(a.startDrag({evt:o}),!a.isDragging()))return}a._setDragPosition(o,r),n.push(a)}}),n.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:o},!0)})},_endDragBefore(o){const n=[];t.DD._dragElements.forEach(r=>{const{node:s}=r,a=s.getStage();if(o&&a.setPointersPositions(o),!a._changedPointerPositions.find(v=>v.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof e.Konva.Stage&&r.node;h&&n.indexOf(h)===-1&&n.push(h)}),n.forEach(r=>{r.draw()})},_endDragAfter(o){t.DD._dragElements.forEach((n,r)=>{n.dragStatus==="stopped"&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:o},!0),n.dragStatus!=="dragging"&&t.DD._dragElements.delete(r)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))}(Cs)),Cs}var As;function Mt(){if(As)return ei;As=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.Node=void 0;const t=Tt(),e=pt(),i=In(),o=gt(),n=Or(),r=mt(),s="absoluteOpacity",a="allEventListeners",h="absoluteTransform",v="absoluteScale",p="canvas",b="Change",S="children",y="konva",f="listening",T="mouseenter",E="mouseleave",w="set",_="Shape",m=" ",P="stage",k="transform",N="Stage",G="visible",g=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m);let c=1,d=class ur{constructor(l){this._id=c++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(l),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(l){(l===k||l===h)&&this._cache.get(l)?this._cache.get(l).dirty=!0:l?this._cache.delete(l):this._cache.clear()}_getCache(l,x){let u=this._cache.get(l);return(u===void 0||(l===k||l===h)&&u.dirty===!0)&&(u=x.call(this),this._cache.set(l,u)),u}_calculate(l,x,u){if(!this._attachedDepsListeners.get(l)){const C=x.map(F=>F+"Change.konva").join(m);this.on(C,()=>{this._clearCache(l)}),this._attachedDepsListeners.set(l,!0)}return this._getCache(l,u)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(l){this._clearCache(l),l===h&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:l,filter:x,hit:u}=this._cache.get(p);t.Util.releaseCanvas(l,x,u),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(l){const x=l||{};let u={};(x.x===void 0||x.y===void 0||x.width===void 0||x.height===void 0)&&(u=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let C=Math.ceil(x.width||u.width),F=Math.ceil(x.height||u.height),O=x.pixelRatio,D=x.x===void 0?Math.floor(u.x):x.x,U=x.y===void 0?Math.floor(u.y):x.y,B=x.offset||0,j=x.drawBorder||!1,X=x.hitCanvasPixelRatio||1;if(!C||!F){t.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Y=Math.abs(Math.round(u.x)-D)>.5?1:0,q=Math.abs(Math.round(u.y)-U)>.5?1:0;C+=B*2+Y,F+=B*2+q,D-=B,U-=B;const J=new i.SceneCanvas({pixelRatio:O,width:C,height:F}),I=new i.SceneCanvas({pixelRatio:O,width:0,height:0,willReadFrequently:!0}),W=new i.HitCanvas({pixelRatio:X,width:C,height:F}),Q=J.getContext(),Z=W.getContext();return W.isCache=!0,J.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,x.imageSmoothingEnabled===!1&&(J.getContext()._context.imageSmoothingEnabled=!1,I.getContext()._context.imageSmoothingEnabled=!1),Q.save(),Z.save(),Q.translate(-D,-U),Z.translate(-D,-U),this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(v),this.drawScene(J,this),this.drawHit(W,this),this._isUnderCache=!1,Q.restore(),Z.restore(),j&&(Q.save(),Q.beginPath(),Q.rect(0,0,C,F),Q.closePath(),Q.setAttr("strokeStyle","red"),Q.setAttr("lineWidth",5),Q.stroke(),Q.restore()),this._cache.set(p,{scene:J,filter:I,hit:W,x:D,y:U}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(l){throw new Error('abstract "getClientRect" method call')}_transformedRect(l,x){const u=[{x:l.x,y:l.y},{x:l.x+l.width,y:l.y},{x:l.x+l.width,y:l.y+l.height},{x:l.x,y:l.y+l.height}];let C=1/0,F=1/0,O=-1/0,D=-1/0;const U=this.getAbsoluteTransform(x);return u.forEach(function(B){const j=U.point(B);C===void 0&&(C=O=j.x,F=D=j.y),C=Math.min(C,j.x),F=Math.min(F,j.y),O=Math.max(O,j.x),D=Math.max(D,j.y)}),{x:C,y:F,width:O-C,height:D-F}}_drawCachedSceneCanvas(l){l.save(),l._applyOpacity(this),l._applyGlobalCompositeOperation(this);const x=this._getCanvasCache();l.translate(x.x,x.y);const u=this._getCachedSceneCanvas(),C=u.pixelRatio;l.drawImage(u._canvas,0,0,u.width/C,u.height/C),l.restore()}_drawCachedHitCanvas(l){const x=this._getCanvasCache(),u=x.hit;l.save(),l.translate(x.x,x.y),l.drawImage(u._canvas,0,0,u.width/u.pixelRatio,u.height/u.pixelRatio),l.restore()}_getCachedSceneCanvas(){let l=this.filters(),x=this._getCanvasCache(),u=x.scene,C=x.filter,F=C.getContext(),O,D,U,B;if(l){if(!this._filterUpToDate){const j=u.pixelRatio;C.setSize(u.width/u.pixelRatio,u.height/u.pixelRatio);try{for(O=l.length,F.clear(),F.drawImage(u._canvas,0,0,u.getWidth()/j,u.getHeight()/j),D=F.getImageData(0,0,C.getWidth(),C.getHeight()),U=0;U<O;U++){if(B=l[U],typeof B!="function"){t.Util.error("Filter should be type of function, but got "+typeof B+" instead. Please check correct filters");continue}B.call(this,D),F.putImageData(D,0,0)}}catch(X){t.Util.error("Unable to apply filter. "+X.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return C}return u}on(l,x){if(this._cache&&this._cache.delete(a),arguments.length===3)return this._delegate.apply(this,arguments);let u=l.split(m),C=u.length,F,O,D,U,B;for(F=0;F<C;F++)O=u[F],D=O.split("."),U=D[0],B=D[1]||"",this.eventListeners[U]||(this.eventListeners[U]=[]),this.eventListeners[U].push({name:B,handler:x});return this}off(l,x){let u=(l||"").split(m),C=u.length,F,O,D,U,B,j;if(this._cache&&this._cache.delete(a),!l)for(O in this.eventListeners)this._off(O);for(F=0;F<C;F++)if(D=u[F],U=D.split("."),B=U[0],j=U[1],B)this.eventListeners[B]&&this._off(B,j,x);else for(O in this.eventListeners)this._off(O,j,x);return this}dispatchEvent(l){const x={target:this,type:l.type,evt:l};return this.fire(l.type,x),this}addEventListener(l,x){return this.on(l,function(u){x.call(this,u.evt)}),this}removeEventListener(l){return this.off(l),this}_delegate(l,x,u){const C=this;this.on(l,function(F){const O=F.target.findAncestors(x,!0,C);for(let D=0;D<O.length;D++)F=t.Util.cloneObject(F),F.currentTarget=O[D],u.call(O[D],F)})}remove(){return this.isDragging()&&this.stopDrag(),n.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(P),this._clearSelfAndDescendantCache(G),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const l=this.getParent();l&&l.children&&(l.children.splice(this.index,1),l._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(l){const x="get"+t.Util._capitalize(l);return t.Util._isFunction(this[x])?this[x]():this.attrs[l]}getAncestors(){let l=this.getParent(),x=[];for(;l;)x.push(l),l=l.getParent();return x}getAttrs(){return this.attrs||{}}setAttrs(l){return this._batchTransformChanges(()=>{let x,u;if(!l)return this;for(x in l)x!==S&&(u=w+t.Util._capitalize(x),t.Util._isFunction(this[u])?this[u](l[x]):this._setAttr(x,l[x]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(l){if(!this.listening())return!1;const x=this.getParent();return x&&x!==l&&this!==l?x._isListening(l):!0}isVisible(){return this._getCache(G,this._isVisible)}_isVisible(l){if(!this.visible())return!1;const x=this.getParent();return x&&x!==l&&this!==l?x._isVisible(l):!0}shouldDrawHit(l,x=!1){if(l)return this._isVisible(l)&&this._isListening(l);const u=this.getLayer();let C=!1;n.DD._dragElements.forEach(O=>{O.dragStatus==="dragging"&&(O.node.nodeType==="Stage"||O.node.getLayer()===u)&&(C=!0)});const F=!x&&!o.Konva.hitOnDragEnabled&&(C||o.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!F}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let l=this.getDepth(),x=this,u=0,C,F,O,D;function U(j){for(C=[],F=j.length,O=0;O<F;O++)D=j[O],u++,D.nodeType!==_&&(C=C.concat(D.getChildren().slice())),D._id===x._id&&(O=F);C.length>0&&C[0].getDepth()<=l&&U(C)}const B=this.getStage();return x.nodeType!==N&&B&&U(B.getChildren()),u}getDepth(){let l=0,x=this.parent;for(;x;)l++,x=x.parent;return l}_batchTransformChanges(l){this._batchingTransformChange=!0,l(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(k),this._clearSelfAndDescendantCache(h)),this._needClearTransformCache=!1}setPosition(l){return this._batchTransformChanges(()=>{this.x(l.x),this.y(l.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const l=this.getStage();if(!l)return null;const x=l.getPointerPosition();if(!x)return null;const u=this.getAbsoluteTransform().copy();return u.invert(),u.point(x)}getAbsolutePosition(l){let x=!1,u=this.parent;for(;u;){if(u.isCached()){x=!0;break}u=u.parent}x&&!l&&(l=!0);const C=this.getAbsoluteTransform(l).getMatrix(),F=new t.Transform,O=this.offset();return F.m=C.slice(),F.translate(O.x,O.y),F.getTranslation()}setAbsolutePosition(l){const{x,y:u,...C}=this._clearTransform();this.attrs.x=x,this.attrs.y=u,this._clearCache(k);const F=this._getAbsoluteTransform().copy();return F.invert(),F.translate(l.x,l.y),l={x:this.attrs.x+F.getTranslation().x,y:this.attrs.y+F.getTranslation().y},this._setTransform(C),this.setPosition({x:l.x,y:l.y}),this._clearCache(k),this._clearSelfAndDescendantCache(h),this}_setTransform(l){let x;for(x in l)this.attrs[x]=l[x]}_clearTransform(){const l={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,l}move(l){let x=l.x,u=l.y,C=this.x(),F=this.y();return x!==void 0&&(C+=x),u!==void 0&&(F+=u),this.setPosition({x:C,y:F}),this}_eachAncestorReverse(l,x){let u=[],C=this.getParent(),F,O;if(!(x&&x._id===this._id)){for(u.unshift(this);C&&(!x||C._id!==x._id);)u.unshift(C),C=C.parent;for(F=u.length,O=0;O<F;O++)l(u[O])}}rotate(l){return this.rotation(this.rotation()+l),this}moveToTop(){if(!this.parent)return t.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const l=this.index,x=this.parent.getChildren().length;return l<x-1?(this.parent.children.splice(l,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return t.Util.warn("Node has no parent. moveUp function is ignored."),!1;const l=this.index,x=this.parent.getChildren().length;return l<x-1?(this.parent.children.splice(l,1),this.parent.children.splice(l+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return t.Util.warn("Node has no parent. moveDown function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.splice(l-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return t.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const l=this.index;return l>0?(this.parent.children.splice(l,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(l){if(!this.parent)return t.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(l<0||l>=this.parent.children.length)&&t.Util.warn("Unexpected value "+l+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const x=this.index;return this.parent.children.splice(x,1),this.parent.children.splice(l,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(s,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let l=this.opacity();const x=this.getParent();return x&&!x._isUnderCache&&(l*=x.getAbsoluteOpacity()),l}moveTo(l){return this.getParent()!==l&&(this._remove(),l.add(this)),this}toObject(){let l=this.getAttrs(),x,u,C,F,O;const D={attrs:{},className:this.getClassName()};for(x in l)u=l[x],O=t.Util.isObject(u)&&!t.Util._isPlainObject(u)&&!t.Util._isArray(u),!O&&(C=typeof this[x]=="function"&&this[x],delete l[x],F=C?C.call(this):null,l[x]=u,F!==u&&(D.attrs[x]=u));return t.Util._prepareToStringify(D)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(l,x,u){const C=[];x&&this._isMatch(l)&&C.push(this);let F=this.parent;for(;F;){if(F===u)return C;F._isMatch(l)&&C.push(F),F=F.parent}return C}isAncestorOf(l){return!1}findAncestor(l,x,u){return this.findAncestors(l,x,u)[0]}_isMatch(l){if(!l)return!1;if(typeof l=="function")return l(this);let x=l.replace(/ /g,"").split(","),u=x.length,C,F;for(C=0;C<u;C++)if(F=x[C],t.Util.isValidSelector(F)||(t.Util.warn('Selector "'+F+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),t.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),t.Util.warn("Konva is awesome, right?")),F.charAt(0)==="#"){if(this.id()===F.slice(1))return!0}else if(F.charAt(0)==="."){if(this.hasName(F.slice(1)))return!0}else if(this.className===F||this.nodeType===F)return!0;return!1}getLayer(){const l=this.getParent();return l?l.getLayer():null}getStage(){return this._getCache(P,this._getStage)}_getStage(){const l=this.getParent();return l?l.getStage():null}fire(l,x={},u){return x.target=x.target||this,u?this._fireAndBubble(l,x):this._fire(l,x),this}getAbsoluteTransform(l){return l?this._getAbsoluteTransform(l):this._getCache(h,this._getAbsoluteTransform)}_getAbsoluteTransform(l){let x;if(l)return x=new t.Transform,this._eachAncestorReverse(function(u){const C=u.transformsEnabled();C==="all"?x.multiply(u.getTransform()):C==="position"&&x.translate(u.x()-u.offsetX(),u.y()-u.offsetY())},l),x;{x=this._cache.get(h)||new t.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(x):x.reset();const u=this.transformsEnabled();if(u==="all")x.multiply(this.getTransform());else if(u==="position"){const C=this.attrs.x||0,F=this.attrs.y||0,O=this.attrs.offsetX||0,D=this.attrs.offsetY||0;x.translate(C-O,F-D)}return x.dirty=!1,x}}getAbsoluteScale(l){let x=this;for(;x;)x._isUnderCache&&(l=x),x=x.getParent();const u=this.getAbsoluteTransform(l).decompose();return{x:u.scaleX,y:u.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(k,this._getTransform)}_getTransform(){var l,x;const u=this._cache.get(k)||new t.Transform;u.reset();const C=this.x(),F=this.y(),O=o.Konva.getAngle(this.rotation()),D=(l=this.attrs.scaleX)!==null&&l!==void 0?l:1,U=(x=this.attrs.scaleY)!==null&&x!==void 0?x:1,B=this.attrs.skewX||0,j=this.attrs.skewY||0,X=this.attrs.offsetX||0,Y=this.attrs.offsetY||0;return(C!==0||F!==0)&&u.translate(C,F),O!==0&&u.rotate(O),(B!==0||j!==0)&&u.skew(B,j),(D!==1||U!==1)&&u.scale(D,U),(X!==0||Y!==0)&&u.translate(-1*X,-1*Y),u.dirty=!1,u}clone(l){let x=t.Util.cloneObject(this.attrs),u,C,F,O,D;for(u in l)x[u]=l[u];const U=new this.constructor(x);for(u in this.eventListeners)for(C=this.eventListeners[u],F=C.length,O=0;O<F;O++)D=C[O],D.name.indexOf(y)<0&&(U.eventListeners[u]||(U.eventListeners[u]=[]),U.eventListeners[u].push(D));return U}_toKonvaCanvas(l){l=l||{};const x=this.getClientRect(),u=this.getStage(),C=l.x!==void 0?l.x:Math.floor(x.x),F=l.y!==void 0?l.y:Math.floor(x.y),O=l.pixelRatio||1,D=new i.SceneCanvas({width:l.width||Math.ceil(x.width)||(u?u.width():0),height:l.height||Math.ceil(x.height)||(u?u.height():0),pixelRatio:O}),U=D.getContext(),B=new i.SceneCanvas({width:D.width/D.pixelRatio+Math.abs(C),height:D.height/D.pixelRatio+Math.abs(F),pixelRatio:D.pixelRatio});return l.imageSmoothingEnabled===!1&&(U._context.imageSmoothingEnabled=!1),U.save(),(C||F)&&U.translate(-1*C,-1*F),this.drawScene(D,void 0,B),U.restore(),D}toCanvas(l){return this._toKonvaCanvas(l)._canvas}toDataURL(l){l=l||{};const x=l.mimeType||null,u=l.quality||null,C=this._toKonvaCanvas(l).toDataURL(x,u);return l.callback&&l.callback(C),C}toImage(l){return new Promise((x,u)=>{try{const C=l==null?void 0:l.callback;C&&delete l.callback,t.Util._urlToImage(this.toDataURL(l),function(F){x(F),C==null||C(F)})}catch(C){u(C)}})}toBlob(l){return new Promise((x,u)=>{try{const C=l==null?void 0:l.callback;C&&delete l.callback,this.toCanvas(l).toBlob(F=>{x(F),C==null||C(F)},l==null?void 0:l.mimeType,l==null?void 0:l.quality)}catch(C){u(C)}})}setSize(l){return this.width(l.width),this.height(l.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():o.Konva.dragDistance}_off(l,x,u){let C=this.eventListeners[l],F,O,D;for(F=0;F<C.length;F++)if(O=C[F].name,D=C[F].handler,(O!=="konva"||x==="konva")&&(!x||O===x)&&(!u||u===D)){if(C.splice(F,1),C.length===0){delete this.eventListeners[l];break}F--}}_fireChangeEvent(l,x,u){this._fire(l+b,{oldVal:x,newVal:u})}addName(l){if(!this.hasName(l)){const x=this.name(),u=x?x+" "+l:l;this.name(u)}return this}hasName(l){if(!l)return!1;const x=this.name();return x?(x||"").split(/\s/g).indexOf(l)!==-1:!1}removeName(l){const x=(this.name()||"").split(/\s/g),u=x.indexOf(l);return u!==-1&&(x.splice(u,1),this.name(x.join(" "))),this}setAttr(l,x){const u=this[w+t.Util._capitalize(l)];return t.Util._isFunction(u)?u.call(this,x):this._setAttr(l,x),this}_requestDraw(){if(o.Konva.autoDrawEnabled){const l=this.getLayer()||this.getStage();l==null||l.batchDraw()}}_setAttr(l,x){const u=this.attrs[l];u===x&&!t.Util.isObject(x)||(x==null?delete this.attrs[l]:this.attrs[l]=x,this._shouldFireChangeEvents&&this._fireChangeEvent(l,u,x),this._requestDraw())}_setComponentAttr(l,x,u){let C;u!==void 0&&(C=this.attrs[l],C||(this.attrs[l]=this.getAttr(l)),this.attrs[l][x]=u,this._fireChangeEvent(l,C,u))}_fireAndBubble(l,x,u){if(x&&this.nodeType===_&&(x.target=this),!((l===T||l===E)&&(u&&(this===u||this.isAncestorOf&&this.isAncestorOf(u))||this.nodeType==="Stage"&&!u))){this._fire(l,x);const C=(l===T||l===E)&&u&&u.isAncestorOf&&u.isAncestorOf(this)&&!u.isAncestorOf(this.parent);(x&&!x.cancelBubble||!x)&&this.parent&&this.parent.isListening()&&!C&&(u&&u.parent?this._fireAndBubble.call(this.parent,l,x,u):this._fireAndBubble.call(this.parent,l,x))}}_getProtoListeners(l){var x,u,C;const F=(x=this._cache.get(a))!==null&&x!==void 0?x:{};let O=F==null?void 0:F[l];if(O===void 0){O=[];let D=Object.getPrototypeOf(this);for(;D;){const U=(C=(u=D.eventListeners)===null||u===void 0?void 0:u[l])!==null&&C!==void 0?C:[];O.push(...U),D=Object.getPrototypeOf(D)}F[l]=O,this._cache.set(a,F)}return O}_fire(l,x){x=x||{},x.currentTarget=this,x.type=l;const u=this._getProtoListeners(l);if(u)for(var C=0;C<u.length;C++)u[C].handler.call(this,x);const F=this.eventListeners[l];if(F)for(var C=0;C<F.length;C++)F[C].handler.call(this,x)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(l){const x=l?l.pointerId:void 0,u=this.getStage(),C=this.getAbsolutePosition();if(!u)return;const F=u._getPointerById(x)||u._changedPointerPositions[0]||C;n.DD._dragElements.set(this._id,{node:this,startPointerPos:F,offset:{x:F.x-C.x,y:F.y-C.y},dragStatus:"ready",pointerId:x})}startDrag(l,x=!0){n.DD._dragElements.has(this._id)||this._createDragElement(l);const u=n.DD._dragElements.get(this._id);u.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:l&&l.evt},x)}_setDragPosition(l,x){const u=this.getStage()._getPointerById(x.pointerId);if(!u)return;let C={x:u.x-x.offset.x,y:u.y-x.offset.y};const F=this.dragBoundFunc();if(F!==void 0){const O=F.call(this,C,l);O?C=O:t.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==C.x||this._lastPos.y!==C.y)&&(this.setAbsolutePosition(C),this._requestDraw()),this._lastPos=C}stopDrag(l){const x=n.DD._dragElements.get(this._id);x&&(x.dragStatus="stopped"),n.DD._endDragBefore(l),n.DD._endDragAfter(l)}setDraggable(l){this._setAttr("draggable",l),this._dragChange()}isDragging(){const l=n.DD._dragElements.get(this._id);return l?l.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(l){if(!(l.evt.button===void 0||o.Konva.dragButtons.indexOf(l.evt.button)>=0)||this.isDragging())return;let x=!1;n.DD._dragElements.forEach(u=>{this.isAncestorOf(u.node)&&(x=!0)}),x||this._createDragElement(l)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const l=n.DD._dragElements.get(this._id),x=l&&l.dragStatus==="dragging",u=l&&l.dragStatus==="ready";x?this.stopDrag():u&&n.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(l={x:0,y:0}){const x=this.getStage();if(!x)return!1;const u={x:-l.x,y:-l.y,width:x.width()+2*l.x,height:x.height()+2*l.y};return t.Util.haveIntersection(u,this.getClientRect())}static create(l,x){return t.Util._isString(l)&&(l=JSON.parse(l)),this._createNode(l,x)}static _createNode(l,x){let u=ur.prototype.getClassName.call(l),C=l.children,F,O,D;x&&(l.attrs.container=x),o.Konva[u]||(t.Util.warn('Can not find a node with class name "'+u+'". Fallback to "Shape".'),u="Shape");const U=o.Konva[u];if(F=new U(l.attrs),C)for(O=C.length,D=0;D<O;D++)F.add(ur._createNode(C[D]));return F}};ei.Node=d,d.prototype.nodeType="Node",d.prototype._attrsAffectingSize=[],d.prototype.eventListeners={},d.prototype.on.call(d.prototype,g,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(k),this._clearSelfAndDescendantCache(h)}),d.prototype.on.call(d.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(G)}),d.prototype.on.call(d.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),d.prototype.on.call(d.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(s)});const A=e.Factory.addGetterSetter;return A(d,"zIndex"),A(d,"absolutePosition"),A(d,"position"),A(d,"x",0,(0,r.getNumberValidator)()),A(d,"y",0,(0,r.getNumberValidator)()),A(d,"globalCompositeOperation","source-over",(0,r.getStringValidator)()),A(d,"opacity",1,(0,r.getNumberValidator)()),A(d,"name","",(0,r.getStringValidator)()),A(d,"id","",(0,r.getStringValidator)()),A(d,"rotation",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(d,"scale",["x","y"]),A(d,"scaleX",1,(0,r.getNumberValidator)()),A(d,"scaleY",1,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(d,"skew",["x","y"]),A(d,"skewX",0,(0,r.getNumberValidator)()),A(d,"skewY",0,(0,r.getNumberValidator)()),e.Factory.addComponentsGetterSetter(d,"offset",["x","y"]),A(d,"offsetX",0,(0,r.getNumberValidator)()),A(d,"offsetY",0,(0,r.getNumberValidator)()),A(d,"dragDistance",void 0,(0,r.getNumberValidator)()),A(d,"width",0,(0,r.getNumberValidator)()),A(d,"height",0,(0,r.getNumberValidator)()),A(d,"listening",!0,(0,r.getBooleanValidator)()),A(d,"preventDefault",!0,(0,r.getBooleanValidator)()),A(d,"filters",void 0,function(M){return this._filterUpToDate=!1,M}),A(d,"visible",!0,(0,r.getBooleanValidator)()),A(d,"transformsEnabled","all",(0,r.getStringValidator)()),A(d,"size"),A(d,"dragBoundFunc"),A(d,"draggable",!1,(0,r.getBooleanValidator)()),e.Factory.backCompat(d,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),ei}var ii={},Ts;function Ln(){if(Ts)return ii;Ts=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Container=void 0;const t=pt(),e=Mt(),i=mt();let o=class extends e.Node{constructor(){super(...arguments),this.children=[]}getChildren(n){if(!n)return this.children||[];const r=this.children||[],s=[];return r.forEach(function(a){n(a)&&s.push(a)}),s}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(n=>{n.parent=null,n.index=0,n.destroy()}),this.children=[],this._requestDraw(),this}add(...n){if(n.length===0)return this;if(n.length>1){for(let s=0;s<n.length;s++)this.add(n[s]);return this}const r=n[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(n){return this._generalFind(n,!1)}findOne(n){const r=this._generalFind(n,!0);return r.length>0?r[0]:void 0}_generalFind(n,r){const s=[];return this._descendants(a=>{const h=a._isMatch(n);return h&&s.push(a),!!(h&&r)}),s}_descendants(n){let r=!1;const s=this.getChildren();for(const a of s)if(r=n(a),r||a.hasChildren()&&(r=a._descendants(n),r))return!0;return!1}toObject(){const n=e.Node.prototype.toObject.call(this);return n.children=[],this.getChildren().forEach(r=>{n.children.push(r.toObject())}),n}isAncestorOf(n){let r=n.getParent();for(;r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(n){const r=e.Node.prototype.clone.call(this,n);return this.getChildren().forEach(function(s){r.add(s.clone())}),r}getAllIntersections(n){const r=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(n)&&r.push(s)}),r}_clearSelfAndDescendantCache(n){var r;super._clearSelfAndDescendantCache(n),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(s){s._clearSelfAndDescendantCache(n)}))}_setChildrenIndices(){var n;(n=this.children)===null||n===void 0||n.forEach(function(r,s){r.index=s}),this._requestDraw()}drawScene(n,r,s){const a=this.getLayer(),h=n||a&&a.getCanvas(),v=h&&h.getContext(),p=this._getCanvasCache(),b=p&&p.scene,S=h&&h.isCache;if(!this.isVisible()&&!S)return this;if(b){v.save();const y=this.getAbsoluteTransform(r).getMatrix();v.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(v),v.restore()}else this._drawChildren("drawScene",h,r,s);return this}drawHit(n,r){if(!this.shouldDrawHit(r))return this;const s=this.getLayer(),a=n||s&&s.hitCanvas,h=a&&a.getContext(),v=this._getCanvasCache();if(v&&v.hit){h.save();const p=this.getAbsoluteTransform(r).getMatrix();h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(h),h.restore()}else this._drawChildren("drawHit",a,r);return this}_drawChildren(n,r,s,a){var h;const v=r&&r.getContext(),p=this.clipWidth(),b=this.clipHeight(),S=this.clipFunc(),y=typeof p=="number"&&typeof b=="number"||S,f=s===this;if(y){v.save();const E=this.getAbsoluteTransform(s);let w=E.getMatrix();v.transform(w[0],w[1],w[2],w[3],w[4],w[5]),v.beginPath();let _;if(S)_=S.call(this,v,this);else{const m=this.clipX(),P=this.clipY();v.rect(m||0,P||0,p,b)}v.clip.apply(v,_),w=E.copy().invert().getMatrix(),v.transform(w[0],w[1],w[2],w[3],w[4],w[5])}const T=!f&&this.globalCompositeOperation()!=="source-over"&&n==="drawScene";T&&(v.save(),v._applyGlobalCompositeOperation(this)),(h=this.children)===null||h===void 0||h.forEach(function(E){E[n](r,s,a)}),T&&v.restore(),y&&v.restore()}getClientRect(n={}){var r;const s=n.skipTransform,a=n.relativeTo;let h,v,p,b,S={x:1/0,y:1/0,width:0,height:0};const y=this;(r=this.children)===null||r===void 0||r.forEach(function(E){if(!E.visible())return;const w=E.getClientRect({relativeTo:y,skipShadow:n.skipShadow,skipStroke:n.skipStroke});w.width===0&&w.height===0||(h===void 0?(h=w.x,v=w.y,p=w.x+w.width,b=w.y+w.height):(h=Math.min(h,w.x),v=Math.min(v,w.y),p=Math.max(p,w.x+w.width),b=Math.max(b,w.y+w.height)))});const f=this.find("Shape");let T=!1;for(let E=0;E<f.length;E++)if(f[E]._isVisible(this)){T=!0;break}return T&&h!==void 0?S={x:h,y:v,width:p-h,height:b-v}:S={x:0,y:0,width:0,height:0},s?S:this._transformedRect(S,a)}};return ii.Container=o,t.Factory.addComponentsGetterSetter(o,"clip",["x","y","width","height"]),t.Factory.addGetterSetter(o,"clipX",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"clipY",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"clipWidth",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"clipHeight",void 0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(o,"clipFunc"),ii}var Fs={},Se={},Ms;function Ra(){if(Ms)return Se;Ms=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.getCapturedShape=o,Se.createEvent=n,Se.hasPointerCapture=r,Se.setPointerCapture=s,Se.releaseCapture=a;const t=gt(),e=new Map,i=t.Konva._global.PointerEvent!==void 0;function o(h){return e.get(h)}function n(h){return{evt:h,pointerId:h.pointerId}}function r(h,v){return e.get(h)===v}function s(h,v){a(h),v.getStage()&&(e.set(h,v),i&&v._fire("gotpointercapture",n(new PointerEvent("gotpointercapture"))))}function a(h,v){const p=e.get(h);if(!p)return;const b=p.getStage();b&&b.content,e.delete(h),i&&p._fire("lostpointercapture",n(new PointerEvent("lostpointercapture")))}return Se}var Es;function Sc(){return Es||(Es=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=Tt(),i=pt(),o=Ln(),n=gt(),r=In(),s=Or(),a=gt(),h=Ra(),v="Stage",p="string",b="px",S="mouseout",y="mouseleave",f="mouseover",T="mouseenter",E="mousemove",w="mousedown",_="mouseup",m="pointermove",P="pointerdown",k="pointerup",N="pointercancel",G="lostpointercapture",g="pointerout",c="pointerleave",d="pointerover",A="pointerenter",M="contextmenu",l="touchstart",x="touchend",u="touchmove",C="touchcancel",F="wheel",O=5,D=[[T,"_pointerenter"],[w,"_pointerdown"],[E,"_pointermove"],[_,"_pointerup"],[y,"_pointerleave"],[l,"_pointerdown"],[u,"_pointermove"],[x,"_pointerup"],[C,"_pointercancel"],[f,"_pointerover"],[F,"_wheel"],[M,"_contextmenu"],[P,"_pointerdown"],[m,"_pointermove"],[k,"_pointerup"],[N,"_pointercancel"],[G,"_lostpointercapture"]],U={mouse:{[g]:S,[c]:y,[d]:f,[A]:T,[m]:E,[P]:w,[k]:_,[N]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[g]:"touchout",[c]:"touchleave",[d]:"touchover",[A]:"touchenter",[m]:u,[P]:l,[k]:x,[N]:C,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[g]:g,[c]:c,[d]:d,[A]:A,[m]:m,[P]:P,[k]:k,[N]:N,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},B=J=>J.indexOf("pointer")>=0?"pointer":J.indexOf("touch")>=0?"touch":"mouse",j=J=>{const I=B(J);if(I==="pointer")return n.Konva.pointerEventsEnabled&&U.pointer;if(I==="touch")return U.touch;if(I==="mouse")return U.mouse};function X(J={}){return(J.clipFunc||J.clipWidth||J.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),J}const Y="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class q extends o.Container{constructor(I){super(X(I)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{X(this.attrs)}),this._checkVisibility()}_validateAdd(I){const W=I.getType()==="Layer",Q=I.getType()==="FastLayer";W||Q||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const I=this.visible()?"":"none";this.content.style.display=I}setContainer(I){if(typeof I===p){if(I.charAt(0)==="."){const Q=I.slice(1);I=document.getElementsByClassName(Q)[0]}else{var W;I.charAt(0)!=="#"?W=I:W=I.slice(1),I=document.getElementById(W)}if(!I)throw"Can not find container in document with id "+W}return this._setAttr("container",I),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),I.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const I=this.children,W=I.length;for(let Q=0;Q<W;Q++)I[Q].clear();return this}clone(I){return I||(I={}),I.container=typeof document<"u"&&document.createElement("div"),o.Container.prototype.clone.call(this,I)}destroy(){super.destroy();const I=this.content;I&&e.Util._isInDocument(I)&&this.container().removeChild(I);const W=t.stages.indexOf(this);return W>-1&&t.stages.splice(W,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const I=this._pointerPositions[0]||this._changedPointerPositions[0];return I?{x:I.x,y:I.y}:(e.Util.warn(Y),null)}_getPointerById(I){return this._pointerPositions.find(W=>W.id===I)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(I){I=I||{},I.x=I.x||0,I.y=I.y||0,I.width=I.width||this.width(),I.height=I.height||this.height();const W=new r.SceneCanvas({width:I.width,height:I.height,pixelRatio:I.pixelRatio||1}),Q=W.getContext()._context,Z=this.children;return(I.x||I.y)&&Q.translate(-1*I.x,-1*I.y),Z.forEach(function(it){if(!it.isVisible())return;const R=it._toKonvaCanvas(I);Q.drawImage(R._canvas,I.x,I.y,R.getWidth()/R.getPixelRatio(),R.getHeight()/R.getPixelRatio())}),W}getIntersection(I){if(!I)return null;const W=this.children,Q=W.length,Z=Q-1;for(let it=Z;it>=0;it--){const R=W[it].getIntersection(I);if(R)return R}return null}_resizeDOM(){const I=this.width(),W=this.height();this.content&&(this.content.style.width=I+b,this.content.style.height=W+b),this.bufferCanvas.setSize(I,W),this.bufferHitCanvas.setSize(I,W),this.children.forEach(Q=>{Q.setSize({width:I,height:W}),Q.draw()})}add(I,...W){if(arguments.length>1){for(let Z=0;Z<arguments.length;Z++)this.add(arguments[Z]);return this}super.add(I);const Q=this.children.length;return Q>O&&e.Util.warn("The stage has "+Q+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),I.setSize({width:this.width(),height:this.height()}),I.draw(),n.Konva.isBrowser&&this.content.appendChild(I.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(I){return h.hasPointerCapture(I,this)}setPointerCapture(I){h.setPointerCapture(I,this)}releaseCapture(I){h.releaseCapture(I,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&D.forEach(([I,W])=>{this.content.addEventListener(I,Q=>{this[W](Q)},{passive:!1})})}_pointerenter(I){this.setPointersPositions(I);const W=j(I.type);W&&this._fire(W.pointerenter,{evt:I,target:this,currentTarget:this})}_pointerover(I){this.setPointersPositions(I);const W=j(I.type);W&&this._fire(W.pointerover,{evt:I,target:this,currentTarget:this})}_getTargetShape(I){let W=this[I+"targetShape"];return W&&!W.getStage()&&(W=null),W}_pointerleave(I){const W=j(I.type),Q=B(I.type);if(!W)return;this.setPointersPositions(I);const Z=this._getTargetShape(Q),it=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;Z&&it?(Z._fireAndBubble(W.pointerout,{evt:I}),Z._fireAndBubble(W.pointerleave,{evt:I}),this._fire(W.pointerleave,{evt:I,target:this,currentTarget:this}),this[Q+"targetShape"]=null):it&&(this._fire(W.pointerleave,{evt:I,target:this,currentTarget:this}),this._fire(W.pointerout,{evt:I,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(I){const W=j(I.type),Q=B(I.type);if(!W)return;this.setPointersPositions(I);let Z=!1;this._changedPointerPositions.forEach(it=>{const R=this.getIntersection(it);if(s.DD.justDragged=!1,n.Konva["_"+Q+"ListenClick"]=!0,!R||!R.isListening()){this[Q+"ClickStartShape"]=void 0;return}n.Konva.capturePointerEventsEnabled&&R.setPointerCapture(it.id),this[Q+"ClickStartShape"]=R,R._fireAndBubble(W.pointerdown,{evt:I,pointerId:it.id}),Z=!0;const L=I.type.indexOf("touch")>=0;R.preventDefault()&&I.cancelable&&L&&I.preventDefault()}),Z||this._fire(W.pointerdown,{evt:I,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(I){const W=j(I.type),Q=B(I.type);if(!W||(n.Konva.isDragging()&&s.DD.node.preventDefault()&&I.cancelable&&I.preventDefault(),this.setPointersPositions(I),!(!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled)))return;const Z={};let it=!1;const R=this._getTargetShape(Q);this._changedPointerPositions.forEach(L=>{const H=h.getCapturedShape(L.id)||this.getIntersection(L),V=L.id,z={evt:I,pointerId:V},K=R!==H;if(K&&R&&(R._fireAndBubble(W.pointerout,{...z},H),R._fireAndBubble(W.pointerleave,{...z},H)),H){if(Z[H._id])return;Z[H._id]=!0}H&&H.isListening()?(it=!0,K&&(H._fireAndBubble(W.pointerover,{...z},R),H._fireAndBubble(W.pointerenter,{...z},R),this[Q+"targetShape"]=H),H._fireAndBubble(W.pointermove,{...z})):R&&(this._fire(W.pointerover,{evt:I,target:this,currentTarget:this,pointerId:V}),this[Q+"targetShape"]=null)}),it||this._fire(W.pointermove,{evt:I,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(I){const W=j(I.type),Q=B(I.type);if(!W)return;this.setPointersPositions(I);const Z=this[Q+"ClickStartShape"],it=this[Q+"ClickEndShape"],R={};let L=!1;this._changedPointerPositions.forEach(H=>{const V=h.getCapturedShape(H.id)||this.getIntersection(H);if(V){if(V.releaseCapture(H.id),R[V._id])return;R[V._id]=!0}const z=H.id,K={evt:I,pointerId:z};let nt=!1;n.Konva["_"+Q+"InDblClickWindow"]?(nt=!0,clearTimeout(this[Q+"DblTimeout"])):s.DD.justDragged||(n.Konva["_"+Q+"InDblClickWindow"]=!0,clearTimeout(this[Q+"DblTimeout"])),this[Q+"DblTimeout"]=setTimeout(function(){n.Konva["_"+Q+"InDblClickWindow"]=!1},n.Konva.dblClickWindow),V&&V.isListening()?(L=!0,this[Q+"ClickEndShape"]=V,V._fireAndBubble(W.pointerup,{...K}),n.Konva["_"+Q+"ListenClick"]&&Z&&Z===V&&(V._fireAndBubble(W.pointerclick,{...K}),nt&&it&&it===V&&V._fireAndBubble(W.pointerdblclick,{...K}))):(this[Q+"ClickEndShape"]=null,n.Konva["_"+Q+"ListenClick"]&&this._fire(W.pointerclick,{evt:I,target:this,currentTarget:this,pointerId:z}),nt&&this._fire(W.pointerdblclick,{evt:I,target:this,currentTarget:this,pointerId:z}))}),L||this._fire(W.pointerup,{evt:I,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+Q+"ListenClick"]=!1,I.cancelable&&Q!=="touch"&&Q!=="pointer"&&I.preventDefault()}_contextmenu(I){this.setPointersPositions(I);const W=this.getIntersection(this.getPointerPosition());W&&W.isListening()?W._fireAndBubble(M,{evt:I}):this._fire(M,{evt:I,target:this,currentTarget:this})}_wheel(I){this.setPointersPositions(I);const W=this.getIntersection(this.getPointerPosition());W&&W.isListening()?W._fireAndBubble(F,{evt:I}):this._fire(F,{evt:I,target:this,currentTarget:this})}_pointercancel(I){this.setPointersPositions(I);const W=h.getCapturedShape(I.pointerId)||this.getIntersection(this.getPointerPosition());W&&W._fireAndBubble(k,h.createEvent(I)),h.releaseCapture(I.pointerId)}_lostpointercapture(I){h.releaseCapture(I.pointerId)}setPointersPositions(I){const W=this._getContentPosition();let Q=null,Z=null;I=I||window.event,I.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(I.touches,it=>{this._pointerPositions.push({id:it.identifier,x:(it.clientX-W.left)/W.scaleX,y:(it.clientY-W.top)/W.scaleY})}),Array.prototype.forEach.call(I.changedTouches||I.touches,it=>{this._changedPointerPositions.push({id:it.identifier,x:(it.clientX-W.left)/W.scaleX,y:(it.clientY-W.top)/W.scaleY})})):(Q=(I.clientX-W.left)/W.scaleX,Z=(I.clientY-W.top)/W.scaleY,this.pointerPos={x:Q,y:Z},this._pointerPositions=[{x:Q,y:Z,id:e.Util._getFirstPointerId(I)}],this._changedPointerPositions=[{x:Q,y:Z,id:e.Util._getFirstPointerId(I)}])}_setPointerPosition(I){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(I)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const I=this.content.getBoundingClientRect();return{top:I.top,left:I.left,scaleX:I.width/this.content.clientWidth||1,scaleY:I.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!n.Konva.isBrowser)return;const I=this.container();if(!I)throw"Stage has no container. A container is required.";I.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),I.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(I){I.batchDraw()}),this}}t.Stage=q,q.prototype.nodeType=v,(0,a._registerNode)(q),i.Factory.addGetterSetter(q,"container"),n.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(J=>{J.batchDraw()})})}(Fs)),Fs}var ni={},ks={},Os;function Nt(){return Os||(Os=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=gt(),i=Tt(),o=pt(),n=Mt(),r=mt(),s=gt(),a=Ra(),h="hasShadow",v="shadowRGBA",p="patternImage",b="linearGradient",S="radialGradient";let y;function f(){return y||(y=i.Util.createCanvasElement().getContext("2d"),y)}t.shapes={};function T(c){const d=this.attrs.fillRule;d?c.fill(d):c.fill()}function E(c){c.stroke()}function w(c){const d=this.attrs.fillRule;d?c.fill(d):c.fill()}function _(c){c.stroke()}function m(){this._clearCache(h)}function P(){this._clearCache(v)}function k(){this._clearCache(p)}function N(){this._clearCache(b)}function G(){this._clearCache(S)}class g extends n.Node{constructor(d){super(d);let A;for(;A=i.Util.getRandomColor(),!(A&&!(A in t.shapes)););this.colorKey=A,t.shapes[A]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const d=f().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(d&&d.setTransform){const A=new i.Transform;A.translate(this.fillPatternX(),this.fillPatternY()),A.rotate(e.Konva.getAngle(this.fillPatternRotation())),A.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),A.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const M=A.getMatrix(),l=typeof DOMMatrix>"u"?{a:M[0],b:M[1],c:M[2],d:M[3],e:M[4],f:M[5]}:new DOMMatrix(M);d.setTransform(l)}return d}}_getLinearGradient(){return this._getCache(b,this.__getLinearGradient)}__getLinearGradient(){const d=this.fillLinearGradientColorStops();if(d){const A=f(),M=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),x=A.createLinearGradient(M.x,M.y,l.x,l.y);for(let u=0;u<d.length;u+=2)x.addColorStop(d[u],d[u+1]);return x}}_getRadialGradient(){return this._getCache(S,this.__getRadialGradient)}__getRadialGradient(){const d=this.fillRadialGradientColorStops();if(d){const A=f(),M=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),x=A.createRadialGradient(M.x,M.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius());for(let u=0;u<d.length;u+=2)x.addColorStop(d[u],d[u+1]);return x}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const d=i.Util.colorToRGBA(this.shadowColor());if(d)return"rgba("+d.r+","+d.g+","+d.b+","+d.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const d=this.hitStrokeWidth();return d==="auto"?this.hasStroke():this.strokeEnabled()&&!!d}intersects(d){const A=this.getStage();if(!A)return!1;const M=A.bufferHitCanvas;return M.getContext().clear(),this.drawHit(M,void 0,!0),M.context.getImageData(Math.round(d.x),Math.round(d.y),1,1).data[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(d){var A;if(!(!((A=this.attrs.perfectDrawEnabled)!==null&&A!==void 0)||A))return!1;const M=d||this.hasFill(),l=this.hasStroke(),x=this.getAbsoluteOpacity()!==1;if(M&&l&&x)return!0;const u=this.hasShadow(),C=this.shadowForStrokeEnabled();return!!(M&&l&&u&&C)}setStrokeHitEnabled(d){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),d?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const d=this.size();return{x:this._centroid?-d.width/2:0,y:this._centroid?-d.height/2:0,width:d.width,height:d.height}}getClientRect(d={}){let A=!1,M=this.getParent();for(;M;){if(M.isCached()){A=!0;break}M=M.getParent()}const l=d.skipTransform,x=d.relativeTo||A&&this.getStage()||void 0,u=this.getSelfRect(),C=!d.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,F=u.width+C,O=u.height+C,D=!d.skipShadow&&this.hasShadow(),U=D?this.shadowOffsetX():0,B=D?this.shadowOffsetY():0,j=F+Math.abs(U),X=O+Math.abs(B),Y=D&&this.shadowBlur()||0,q=j+Y*2,J=X+Y*2,I={width:q,height:J,x:-(C/2+Y)+Math.min(U,0)+u.x,y:-(C/2+Y)+Math.min(B,0)+u.y};return l?I:this._transformedRect(I,x)}drawScene(d,A,M){const l=this.getLayer();let x=d||l.getCanvas(),u=x.getContext(),C=this._getCanvasCache(),F=this.getSceneFunc(),O=this.hasShadow(),D,U;const B=x.isCache,j=A===this;if(!this.isVisible()&&!j)return this;if(C){u.save();const Y=this.getAbsoluteTransform(A).getMatrix();return u.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedSceneCanvas(u),u.restore(),this}if(!F)return this;if(u.save(),this._useBufferCanvas()&&!B){D=this.getStage();const Y=M||D.bufferCanvas;U=Y.getContext(),U.clear(),U.save(),U._applyLineJoin(this);var X=this.getAbsoluteTransform(A).getMatrix();U.transform(X[0],X[1],X[2],X[3],X[4],X[5]),F.call(this,U,this),U.restore();const q=Y.pixelRatio;O&&u._applyShadow(this),u._applyOpacity(this),u._applyGlobalCompositeOperation(this),u.drawImage(Y._canvas,0,0,Y.width/q,Y.height/q)}else{if(u._applyLineJoin(this),!j){var X=this.getAbsoluteTransform(A).getMatrix();u.transform(X[0],X[1],X[2],X[3],X[4],X[5]),u._applyOpacity(this),u._applyGlobalCompositeOperation(this)}O&&u._applyShadow(this),F.call(this,u,this)}return u.restore(),this}drawHit(d,A,M=!1){if(!this.shouldDrawHit(A,M))return this;const l=this.getLayer(),x=d||l.hitCanvas,u=x&&x.getContext(),C=this.hitFunc()||this.sceneFunc(),F=this._getCanvasCache(),O=F&&F.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),O){u.save();const D=this.getAbsoluteTransform(A).getMatrix();return u.transform(D[0],D[1],D[2],D[3],D[4],D[5]),this._drawCachedHitCanvas(u),u.restore(),this}if(!C)return this;if(u.save(),u._applyLineJoin(this),this!==A){const D=this.getAbsoluteTransform(A).getMatrix();u.transform(D[0],D[1],D[2],D[3],D[4],D[5])}return C.call(this,u,this),u.restore(),this}drawHitFromCache(d=0){const A=this._getCanvasCache(),M=this._getCachedSceneCanvas(),l=A.hit,x=l.getContext(),u=l.getWidth(),C=l.getHeight();x.clear(),x.drawImage(M._canvas,0,0,u,C);try{const F=x.getImageData(0,0,u,C),O=F.data,D=O.length,U=i.Util._hexToRgb(this.colorKey);for(let B=0;B<D;B+=4)O[B+3]>d?(O[B]=U.r,O[B+1]=U.g,O[B+2]=U.b,O[B+3]=255):O[B+3]=0;x.putImageData(F,0,0)}catch(F){i.Util.error("Unable to draw hit graph from cached scene canvas. "+F.message)}return this}hasPointerCapture(d){return a.hasPointerCapture(d,this)}setPointerCapture(d){a.setPointerCapture(d,this)}releaseCapture(d){a.releaseCapture(d,this)}}t.Shape=g,g.prototype._fillFunc=T,g.prototype._strokeFunc=E,g.prototype._fillFuncHit=w,g.prototype._strokeFuncHit=_,g.prototype._centroid=!1,g.prototype.nodeType="Shape",(0,s._registerNode)(g),g.prototype.eventListeners={},g.prototype.on.call(g.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),g.prototype.on.call(g.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",P),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",k),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",N),g.prototype.on.call(g.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",G),o.Factory.addGetterSetter(g,"stroke",void 0,(0,r.getStringOrGradientValidator)()),o.Factory.addGetterSetter(g,"strokeWidth",2,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"fillAfterStrokeEnabled",!1),o.Factory.addGetterSetter(g,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),o.Factory.addGetterSetter(g,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),o.Factory.addGetterSetter(g,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),o.Factory.addGetterSetter(g,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),o.Factory.addGetterSetter(g,"lineJoin"),o.Factory.addGetterSetter(g,"lineCap"),o.Factory.addGetterSetter(g,"sceneFunc"),o.Factory.addGetterSetter(g,"hitFunc"),o.Factory.addGetterSetter(g,"dash"),o.Factory.addGetterSetter(g,"dashOffset",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"shadowColor",void 0,(0,r.getStringValidator)()),o.Factory.addGetterSetter(g,"shadowBlur",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"shadowOpacity",1,(0,r.getNumberValidator)()),o.Factory.addComponentsGetterSetter(g,"shadowOffset",["x","y"]),o.Factory.addGetterSetter(g,"shadowOffsetX",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"shadowOffsetY",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"fillPatternImage"),o.Factory.addGetterSetter(g,"fill",void 0,(0,r.getStringOrGradientValidator)()),o.Factory.addGetterSetter(g,"fillPatternX",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"fillPatternY",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"fillLinearGradientColorStops"),o.Factory.addGetterSetter(g,"strokeLinearGradientColorStops"),o.Factory.addGetterSetter(g,"fillRadialGradientStartRadius",0),o.Factory.addGetterSetter(g,"fillRadialGradientEndRadius",0),o.Factory.addGetterSetter(g,"fillRadialGradientColorStops"),o.Factory.addGetterSetter(g,"fillPatternRepeat","repeat"),o.Factory.addGetterSetter(g,"fillEnabled",!0),o.Factory.addGetterSetter(g,"strokeEnabled",!0),o.Factory.addGetterSetter(g,"shadowEnabled",!0),o.Factory.addGetterSetter(g,"dashEnabled",!0),o.Factory.addGetterSetter(g,"strokeScaleEnabled",!0),o.Factory.addGetterSetter(g,"fillPriority","color"),o.Factory.addComponentsGetterSetter(g,"fillPatternOffset",["x","y"]),o.Factory.addGetterSetter(g,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),o.Factory.addComponentsGetterSetter(g,"fillPatternScale",["x","y"]),o.Factory.addGetterSetter(g,"fillPatternScaleX",1,(0,r.getNumberValidator)()),o.Factory.addGetterSetter(g,"fillPatternScaleY",1,(0,r.getNumberValidator)()),o.Factory.addComponentsGetterSetter(g,"fillLinearGradientStartPoint",["x","y"]),o.Factory.addComponentsGetterSetter(g,"strokeLinearGradientStartPoint",["x","y"]),o.Factory.addGetterSetter(g,"fillLinearGradientStartPointX",0),o.Factory.addGetterSetter(g,"strokeLinearGradientStartPointX",0),o.Factory.addGetterSetter(g,"fillLinearGradientStartPointY",0),o.Factory.addGetterSetter(g,"strokeLinearGradientStartPointY",0),o.Factory.addComponentsGetterSetter(g,"fillLinearGradientEndPoint",["x","y"]),o.Factory.addComponentsGetterSetter(g,"strokeLinearGradientEndPoint",["x","y"]),o.Factory.addGetterSetter(g,"fillLinearGradientEndPointX",0),o.Factory.addGetterSetter(g,"strokeLinearGradientEndPointX",0),o.Factory.addGetterSetter(g,"fillLinearGradientEndPointY",0),o.Factory.addGetterSetter(g,"strokeLinearGradientEndPointY",0),o.Factory.addComponentsGetterSetter(g,"fillRadialGradientStartPoint",["x","y"]),o.Factory.addGetterSetter(g,"fillRadialGradientStartPointX",0),o.Factory.addGetterSetter(g,"fillRadialGradientStartPointY",0),o.Factory.addComponentsGetterSetter(g,"fillRadialGradientEndPoint",["x","y"]),o.Factory.addGetterSetter(g,"fillRadialGradientEndPointX",0),o.Factory.addGetterSetter(g,"fillRadialGradientEndPointY",0),o.Factory.addGetterSetter(g,"fillPatternRotation",0),o.Factory.addGetterSetter(g,"fillRule",void 0,(0,r.getStringValidator)()),o.Factory.backCompat(g,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(ks)),ks}var Ns;function Da(){if(Ns)return ni;Ns=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.Layer=void 0;const t=Tt(),e=Ln(),i=Mt(),o=pt(),n=In(),r=mt(),s=Nt(),a=gt(),h="#",v="beforeDraw",p="draw",b=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],S=b.length;let y=class extends e.Container{constructor(f){super(f),this.canvas=new n.SceneCanvas,this.hitCanvas=new n.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(f){return this.getContext().clear(f),this.getHitCanvas().getContext().clear(f),this}setZIndex(f){super.setZIndex(f);const T=this.getStage();return T&&T.content&&(T.content.removeChild(this.getNativeCanvasElement()),f<T.children.length-1?T.content.insertBefore(this.getNativeCanvasElement(),T.children[f+1].getCanvas()._canvas):T.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){i.Node.prototype.moveToTop.call(this);const f=this.getStage();return f&&f.content&&(f.content.removeChild(this.getNativeCanvasElement()),f.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!i.Node.prototype.moveUp.call(this))return!1;const f=this.getStage();return!f||!f.content?!1:(f.content.removeChild(this.getNativeCanvasElement()),this.index<f.children.length-1?f.content.insertBefore(this.getNativeCanvasElement(),f.children[this.index+1].getCanvas()._canvas):f.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(i.Node.prototype.moveDown.call(this)){const f=this.getStage();if(f){const T=f.children;f.content&&(f.content.removeChild(this.getNativeCanvasElement()),f.content.insertBefore(this.getNativeCanvasElement(),T[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(i.Node.prototype.moveToBottom.call(this)){const f=this.getStage();if(f){const T=f.children;f.content&&(f.content.removeChild(this.getNativeCanvasElement()),f.content.insertBefore(this.getNativeCanvasElement(),T[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const f=this.getNativeCanvasElement();return i.Node.prototype.remove.call(this),f&&f.parentNode&&t.Util._isInDocument(f)&&f.parentNode.removeChild(f),this}getStage(){return this.parent}setSize({width:f,height:T}){return this.canvas.setSize(f,T),this.hitCanvas.setSize(f,T),this._setSmoothEnabled(),this}_validateAdd(f){const T=f.getType();T!=="Group"&&T!=="Shape"&&t.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(f){return f=f||{},f.width=f.width||this.getWidth(),f.height=f.height||this.getHeight(),f.x=f.x!==void 0?f.x:this.x(),f.y=f.y!==void 0?f.y:this.y(),i.Node.prototype._toKonvaCanvas.call(this,f)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){t.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){t.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,t.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(f){if(!this.isListening()||!this.isVisible())return null;let T=1,E=!1;for(;;){for(let w=0;w<S;w++){const _=b[w],m=this._getIntersection({x:f.x+_.x*T,y:f.y+_.y*T}),P=m.shape;if(P)return P;if(E=!!m.antialiased,!m.antialiased)break}if(E)T+=1;else return null}}_getIntersection(f){const T=this.hitCanvas.pixelRatio,E=this.hitCanvas.context.getImageData(Math.round(f.x*T),Math.round(f.y*T),1,1).data,w=E[3];if(w===255){const _=t.Util._rgbToHex(E[0],E[1],E[2]),m=s.shapes[h+_];return m?{shape:m}:{antialiased:!0}}else if(w>0)return{antialiased:!0};return{}}drawScene(f,T){const E=this.getLayer(),w=f||E&&E.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&w.getContext().clear(),e.Container.prototype.drawScene.call(this,w,T),this._fire(p,{node:this}),this}drawHit(f,T){const E=this.getLayer(),w=f||E&&E.hitCanvas;return E&&E.clearBeforeDraw()&&E.getHitCanvas().getContext().clear(),e.Container.prototype.drawHit.call(this,w,T),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(f){t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(f)}getHitGraphEnabled(f){return t.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const f=this.parent;this.hitCanvas._canvas.parentNode?f.content.removeChild(this.hitCanvas._canvas):f.content.appendChild(this.hitCanvas._canvas)}destroy(){return t.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return ni.Layer=y,y.prototype.nodeType="Layer",(0,a._registerNode)(y),o.Factory.addGetterSetter(y,"imageSmoothingEnabled",!0),o.Factory.addGetterSetter(y,"clearBeforeDraw",!0),o.Factory.addGetterSetter(y,"hitGraphEnabled",!0,(0,r.getBooleanValidator)()),ni}var ri={},Rs;function wc(){if(Rs)return ri;Rs=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.FastLayer=void 0;const t=Tt(),e=Da(),i=gt();let o=class extends e.Layer{constructor(n){super(n),this.listening(!1),t.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return ri.FastLayer=o,o.prototype.nodeType="FastLayer",(0,i._registerNode)(o),ri}var si={},Ds;function Nr(){if(Ds)return si;Ds=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Group=void 0;const t=Tt(),e=Ln(),i=gt();let o=class extends e.Container{_validateAdd(n){const r=n.getType();r!=="Group"&&r!=="Shape"&&t.Util.throw("You may only add groups and shapes to groups.")}};return si.Group=o,o.prototype.nodeType="Group",(0,i._registerNode)(o),si}var oi={},Gs;function Rr(){if(Gs)return oi;Gs=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.Animation=void 0;const t=gt(),e=Tt(),i=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}();let o=class ze{constructor(r,s){this.id=ze.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=r,this.setLayers(s)}setLayers(r){let s=[];return r&&(s=Array.isArray(r)?r:[r]),this.layers=s,this}getLayers(){return this.layers}addLayer(r){const s=this.layers,a=s.length;for(let h=0;h<a;h++)if(s[h]._id===r._id)return!1;return this.layers.push(r),!0}isRunning(){const r=ze.animations,s=r.length;for(let a=0;a<s;a++)if(r[a].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),ze._addAnimation(this),this}stop(){return ze._removeAnimation(this),this}_updateFrameObject(r){this.frame.timeDiff=r-this.frame.lastTime,this.frame.lastTime=r,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(r){this.animations.push(r),this._handleAnimation()}static _removeAnimation(r){const s=r.id,a=this.animations,h=a.length;for(let v=0;v<h;v++)if(a[v].id===s){this.animations.splice(v,1);break}}static _runFrames(){const r={},s=this.animations;for(let a=0;a<s.length;a++){const h=s[a],v=h.layers,p=h.func;h._updateFrameObject(i());const b=v.length;let S;if(p?S=p.call(h,h.frame)!==!1:S=!0,!!S)for(let y=0;y<b;y++){const f=v[y];f._id!==void 0&&(r[f._id]=f)}}for(const a in r)r.hasOwnProperty(a)&&r[a].batchDraw()}static _animationLoop(){const r=ze;r.animations.length?(r._runFrames(),e.Util.requestAnimFrame(r._animationLoop)):r.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,e.Util.requestAnimFrame(this._animationLoop))}};return oi.Animation=o,o.animations=[],o.animIdCounter=0,o.animRunning=!1,oi}var Is={},Ls;function Cc(){return Ls||(Ls=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=Tt(),i=Rr(),o=Mt(),n=gt(),r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,a=2,h=3,v=["fill","stroke","shadowColor"];let p=0;class b{constructor(f,T,E,w,_,m,P){this.prop=f,this.propFunc=T,this.begin=w,this._pos=w,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=P,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=E,this._change=_-this.begin,this.pause()}fire(f){const T=this[f];T&&T()}setTime(f){f>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():f<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=f,this.update())}getTime(){return this._time}setPosition(f){this.prevPos=this._pos,this.propFunc(f),this._pos=f}getPosition(f){return f===void 0&&(f=this._time),this.func(f,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=h,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(f){this.pause(),this._time=f,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const f=this.getTimer()-this._startTime;this.state===a?this.setTime(f):this.state===h&&this.setTime(this.duration-f)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class S{constructor(f){const T=this,E=f.node,w=E._id,_=f.easing||t.Easings.Linear,m=!!f.yoyo;let P,k;typeof f.duration>"u"?P=.3:f.duration===0?P=.001:P=f.duration,this.node=E,this._id=p++;const N=E.getLayer()||(E instanceof n.Konva.Stage?E.getLayers():null);N||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){T.tween.onEnterFrame()},N),this.tween=new b(k,function(G){T._tweenFunc(G)},_,0,1,P*1e3,m),this._addListeners(),S.attrs[w]||(S.attrs[w]={}),S.attrs[w][this._id]||(S.attrs[w][this._id]={}),S.tweens[w]||(S.tweens[w]={});for(k in f)r[k]===void 0&&this._addAttr(k,f[k]);this.reset(),this.onFinish=f.onFinish,this.onReset=f.onReset,this.onUpdate=f.onUpdate}_addAttr(f,T){const E=this.node,w=E._id;let _,m,P,k,N;const G=S.tweens[w][f];G&&delete S.attrs[w][G][f];let g=E.getAttr(f);if(e.Util._isArray(T))if(_=[],m=Math.max(T.length,g.length),f==="points"&&T.length!==g.length&&(T.length>g.length?(k=g,g=e.Util._prepareArrayForTween(g,T,E.closed())):(P=T,T=e.Util._prepareArrayForTween(T,g,E.closed()))),f.indexOf("fill")===0)for(let c=0;c<m;c++)if(c%2===0)_.push(T[c]-g[c]);else{const d=e.Util.colorToRGBA(g[c]);N=e.Util.colorToRGBA(T[c]),g[c]=d,_.push({r:N.r-d.r,g:N.g-d.g,b:N.b-d.b,a:N.a-d.a})}else for(let c=0;c<m;c++)_.push(T[c]-g[c]);else v.indexOf(f)!==-1?(g=e.Util.colorToRGBA(g),N=e.Util.colorToRGBA(T),_={r:N.r-g.r,g:N.g-g.g,b:N.b-g.b,a:N.a-g.a}):_=T-g;S.attrs[w][this._id][f]={start:g,diff:_,end:T,trueEnd:P,trueStart:k},S.tweens[w][f]=this._id}_tweenFunc(f){const T=this.node,E=S.attrs[T._id][this._id];let w,_,m,P,k,N,G,g;for(w in E){if(_=E[w],m=_.start,P=_.diff,g=_.end,e.Util._isArray(m))if(k=[],G=Math.max(m.length,g.length),w.indexOf("fill")===0)for(N=0;N<G;N++)N%2===0?k.push((m[N]||0)+P[N]*f):k.push("rgba("+Math.round(m[N].r+P[N].r*f)+","+Math.round(m[N].g+P[N].g*f)+","+Math.round(m[N].b+P[N].b*f)+","+(m[N].a+P[N].a*f)+")");else for(N=0;N<G;N++)k.push((m[N]||0)+P[N]*f);else v.indexOf(w)!==-1?k="rgba("+Math.round(m.r+P.r*f)+","+Math.round(m.g+P.g*f)+","+Math.round(m.b+P.b*f)+","+(m.a+P.a*f)+")":k=m+P*f;T.setAttr(w,k)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const f=this.node,T=S.attrs[f._id][this._id];T.points&&T.points.trueEnd&&f.setAttr("points",T.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const f=this.node,T=S.attrs[f._id][this._id];T.points&&T.points.trueStart&&f.points(T.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(f){return this.tween.seek(f*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const f=this.node._id,T=this._id,E=S.tweens[f];this.pause();for(const w in E)delete S.tweens[f][w];delete S.attrs[f][T]}}t.Tween=S,S.attrs={},S.tweens={},o.Node.prototype.to=function(y){const f=y.onFinish;y.node=this,y.onFinish=function(){this.destroy(),f&&f()},new S(y).play()},t.Easings={BackEaseIn(y,f,T,E){return T*(y/=E)*y*((1.70158+1)*y-1.70158)+f},BackEaseOut(y,f,T,E){return T*((y=y/E-1)*y*((1.70158+1)*y+1.70158)+1)+f},BackEaseInOut(y,f,T,E){let w=1.70158;return(y/=E/2)<1?T/2*(y*y*(((w*=1.525)+1)*y-w))+f:T/2*((y-=2)*y*(((w*=1.525)+1)*y+w)+2)+f},ElasticEaseIn(y,f,T,E,w,_){let m=0;return y===0?f:(y/=E)===1?f+T:(_||(_=E*.3),!w||w<Math.abs(T)?(w=T,m=_/4):m=_/(2*Math.PI)*Math.asin(T/w),-(w*Math.pow(2,10*(y-=1))*Math.sin((y*E-m)*(2*Math.PI)/_))+f)},ElasticEaseOut(y,f,T,E,w,_){let m=0;return y===0?f:(y/=E)===1?f+T:(_||(_=E*.3),!w||w<Math.abs(T)?(w=T,m=_/4):m=_/(2*Math.PI)*Math.asin(T/w),w*Math.pow(2,-10*y)*Math.sin((y*E-m)*(2*Math.PI)/_)+T+f)},ElasticEaseInOut(y,f,T,E,w,_){let m=0;return y===0?f:(y/=E/2)===2?f+T:(_||(_=E*(.3*1.5)),!w||w<Math.abs(T)?(w=T,m=_/4):m=_/(2*Math.PI)*Math.asin(T/w),y<1?-.5*(w*Math.pow(2,10*(y-=1))*Math.sin((y*E-m)*(2*Math.PI)/_))+f:w*Math.pow(2,-10*(y-=1))*Math.sin((y*E-m)*(2*Math.PI)/_)*.5+T+f)},BounceEaseOut(y,f,T,E){return(y/=E)<1/2.75?T*(7.5625*y*y)+f:y<2/2.75?T*(7.5625*(y-=1.5/2.75)*y+.75)+f:y<2.5/2.75?T*(7.5625*(y-=2.25/2.75)*y+.9375)+f:T*(7.5625*(y-=2.625/2.75)*y+.984375)+f},BounceEaseIn(y,f,T,E){return T-t.Easings.BounceEaseOut(E-y,0,T,E)+f},BounceEaseInOut(y,f,T,E){return y<E/2?t.Easings.BounceEaseIn(y*2,0,T,E)*.5+f:t.Easings.BounceEaseOut(y*2-E,0,T,E)*.5+T*.5+f},EaseIn(y,f,T,E){return T*(y/=E)*y+f},EaseOut(y,f,T,E){return-T*(y/=E)*(y-2)+f},EaseInOut(y,f,T,E){return(y/=E/2)<1?T/2*y*y+f:-T/2*(--y*(y-2)-1)+f},StrongEaseIn(y,f,T,E){return T*(y/=E)*y*y*y*y+f},StrongEaseOut(y,f,T,E){return T*((y=y/E-1)*y*y*y*y+1)+f},StrongEaseInOut(y,f,T,E){return(y/=E/2)<1?T/2*y*y*y*y*y+f:T/2*((y-=2)*y*y*y*y+2)+f},Linear(y,f,T,E){return T*y/E+f}}}(Is)),Is}var Us;function Pc(){return Us||(Us=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=gt(),i=Tt(),o=Mt(),n=Ln(),r=Sc(),s=Da(),a=wc(),h=Nr(),v=Or(),p=Nt(),b=Rr(),S=Cc(),y=Na(),f=In();t.Konva=i.Util._assign(e.Konva,{Util:i.Util,Transform:i.Transform,Node:o.Node,Container:n.Container,Stage:r.Stage,stages:r.stages,Layer:s.Layer,FastLayer:a.FastLayer,Group:h.Group,DD:v.DD,Shape:p.Shape,shapes:p.shapes,Animation:b.Animation,Tween:S.Tween,Easings:S.Easings,Context:y.Context,Canvas:f.Canvas}),t.default=t.Konva}(gs)),gs}var ai={},Bs;function Ac(){if(Bs)return ai;Bs=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Arc=void 0;const t=pt(),e=Nt(),i=gt(),o=mt(),n=gt();let r=class extends e.Shape{_sceneFunc(s){const a=i.Konva.getAngle(this.angle()),h=this.clockwise();s.beginPath(),s.arc(0,0,this.outerRadius(),0,a,h),s.arc(0,0,this.innerRadius(),a,0,!h),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}getSelfRect(){const s=this.innerRadius(),a=this.outerRadius(),h=this.clockwise(),v=i.Konva.getAngle(h?360-this.angle():this.angle()),p=Math.cos(Math.min(v,Math.PI)),b=1,S=Math.sin(Math.min(Math.max(Math.PI,v),3*Math.PI/2)),y=Math.sin(Math.min(v,Math.PI/2)),f=p*(p>0?s:a),T=b*a,E=S*(S>0?s:a),w=y*(y>0?a:s);return{x:f,y:h?-1*w:E,width:T-f,height:w-E}}};return ai.Arc=r,r.prototype._centroid=!0,r.prototype.className="Arc",r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1,(0,o.getBooleanValidator)()),ai}var li={},hi={},Hs;function Ga(){if(Hs)return hi;Hs=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Line=void 0;const t=pt(),e=gt(),i=Nt(),o=mt();function n(a,h,v,p,b,S,y){const f=Math.sqrt(Math.pow(v-a,2)+Math.pow(p-h,2)),T=Math.sqrt(Math.pow(b-v,2)+Math.pow(S-p,2)),E=y*f/(f+T),w=y*T/(f+T),_=v-E*(b-a),m=p-E*(S-h),P=v+w*(b-a),k=p+w*(S-h);return[_,m,P,k]}function r(a,h){const v=a.length,p=[];for(let b=2;b<v-2;b+=2){const S=n(a[b-2],a[b-1],a[b],a[b+1],a[b+2],a[b+3],h);isNaN(S[0])||(p.push(S[0]),p.push(S[1]),p.push(a[b]),p.push(a[b+1]),p.push(S[2]),p.push(S[3]))}return p}let s=class extends i.Shape{constructor(a){super(a),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(a){let h=this.points(),v=h.length,p=this.tension(),b=this.closed(),S=this.bezier(),y,f,T;if(v){if(a.beginPath(),a.moveTo(h[0],h[1]),p!==0&&v>4){for(y=this.getTensionPoints(),f=y.length,T=b?0:4,b||a.quadraticCurveTo(y[0],y[1],y[2],y[3]);T<f-2;)a.bezierCurveTo(y[T++],y[T++],y[T++],y[T++],y[T++],y[T++]);b||a.quadraticCurveTo(y[f-2],y[f-1],h[v-2],h[v-1])}else if(S)for(T=2;T<v;)a.bezierCurveTo(h[T++],h[T++],h[T++],h[T++],h[T++],h[T++]);else for(T=2;T<v;T+=2)a.lineTo(h[T],h[T+1]);b?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():r(this.points(),this.tension())}_getTensionPointsClosed(){const a=this.points(),h=a.length,v=this.tension(),p=n(a[h-2],a[h-1],a[0],a[1],a[2],a[3],v),b=n(a[h-4],a[h-3],a[h-2],a[h-1],a[0],a[1],v),S=r(a,v);return[p[2],p[3]].concat(S).concat([b[0],b[1],a[h-2],a[h-1],b[2],b[3],p[0],p[1],a[0],a[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let a=this.points();if(a.length<4)return{x:a[0]||0,y:a[1]||0,width:0,height:0};this.tension()!==0?a=[a[0],a[1],...this._getTensionPoints(),a[a.length-2],a[a.length-1]]:a=this.points();let h=a[0],v=a[0],p=a[1],b=a[1],S,y;for(let f=0;f<a.length/2;f++)S=a[f*2],y=a[f*2+1],h=Math.min(h,S),v=Math.max(v,S),p=Math.min(p,y),b=Math.max(b,y);return{x:h,y:p,width:v-h,height:b-p}}};return hi.Line=s,s.prototype.className="Line",s.prototype._attrsAffectingSize=["points","bezier","tension"],(0,e._registerNode)(s),t.Factory.addGetterSetter(s,"closed",!1),t.Factory.addGetterSetter(s,"bezier",!1),t.Factory.addGetterSetter(s,"tension",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(s,"points",[],(0,o.getNumberArrayValidator)()),hi}var ci={},js={},Vs;function Tc(){return Vs||(Vs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(s,a,h)=>{let v,p;const b=h/2;v=0;for(let S=0;S<20;S++)p=b*t.tValues[20][S]+b,v+=t.cValues[20][S]*o(s,a,p);return b*v};t.getCubicArcLength=e;const i=(s,a,h)=>{h===void 0&&(h=1);const v=s[0]-2*s[1]+s[2],p=a[0]-2*a[1]+a[2],b=2*s[1]-2*s[0],S=2*a[1]-2*a[0],y=4*(v*v+p*p),f=4*(v*b+p*S),T=b*b+S*S;if(y===0)return h*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(a[2]-a[0],2));const E=f/(2*y),w=T/y,_=h+E,m=w-E*E,P=_*_+m>0?Math.sqrt(_*_+m):0,k=E*E+m>0?Math.sqrt(E*E+m):0,N=E+Math.sqrt(E*E+m)!==0?m*Math.log(Math.abs((_+P)/(E+k))):0;return Math.sqrt(y)/2*(_*P-E*k+N)};t.getQuadraticArcLength=i;function o(s,a,h){const v=n(1,h,s),p=n(1,h,a),b=v*v+p*p;return Math.sqrt(b)}const n=(s,a,h)=>{const v=h.length-1;let p,b;if(v===0)return 0;if(s===0){b=0;for(let S=0;S<=v;S++)b+=t.binomialCoefficients[v][S]*Math.pow(1-a,v-S)*Math.pow(a,S)*h[S];return b}else{p=new Array(v);for(let S=0;S<v;S++)p[S]=v*(h[S+1]-h[S]);return n(s-1,a,p)}},r=(s,a,h)=>{let v=1,p=s/a,b=(s-h(p))/a,S=0;for(;v>.001;){const y=h(p+b),f=Math.abs(s-y)/a;if(f<v)v=f,p+=b;else{const T=h(p-b),E=Math.abs(s-T)/a;E<v?(v=E,p-=b):b/=2}if(S++,S>500)break}return p};t.t2length=r}(js)),js}var Ws;function Dr(){if(Ws)return ci;Ws=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Path=void 0;const t=pt(),e=Nt(),i=gt(),o=Tc();let n=class Wt extends e.Shape{constructor(s){super(s),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Wt.parsePathData(this.data()),this.pathLength=Wt.getPathLength(this.dataArray)}_sceneFunc(s){const a=this.dataArray;s.beginPath();let h=!1;for(let P=0;P<a.length;P++){const k=a[P].command,N=a[P].points;switch(k){case"L":s.lineTo(N[0],N[1]);break;case"M":s.moveTo(N[0],N[1]);break;case"C":s.bezierCurveTo(N[0],N[1],N[2],N[3],N[4],N[5]);break;case"Q":s.quadraticCurveTo(N[0],N[1],N[2],N[3]);break;case"A":var v=N[0],p=N[1],b=N[2],S=N[3],y=N[4],f=N[5],T=N[6],E=N[7],w=b>S?b:S,_=b>S?1:b/S,m=b>S?S/b:1;s.translate(v,p),s.rotate(T),s.scale(_,m),s.arc(0,0,w,y,y+f,1-E),s.scale(1/_,1/m),s.rotate(-T),s.translate(-v,-p);break;case"z":h=!0,s.closePath();break}}!h&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)}getSelfRect(){let s=[];this.dataArray.forEach(function(y){if(y.command==="A"){const f=y.points[4],T=y.points[5],E=y.points[4]+T;let w=Math.PI/180;if(Math.abs(f-E)<w&&(w=Math.abs(f-E)),T<0)for(let _=f-w;_>E;_-=w){const m=Wt.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],_,0);s.push(m.x,m.y)}else for(let _=f+w;_<E;_+=w){const m=Wt.getPointOnEllipticalArc(y.points[0],y.points[1],y.points[2],y.points[3],_,0);s.push(m.x,m.y)}}else if(y.command==="C")for(let f=0;f<=1;f+=.01){const T=Wt.getPointOnCubicBezier(f,y.start.x,y.start.y,y.points[0],y.points[1],y.points[2],y.points[3],y.points[4],y.points[5]);s.push(T.x,T.y)}else s=s.concat(y.points)});let a=s[0],h=s[0],v=s[1],p=s[1],b,S;for(let y=0;y<s.length/2;y++)b=s[y*2],S=s[y*2+1],isNaN(b)||(a=Math.min(a,b),h=Math.max(h,b)),isNaN(S)||(v=Math.min(v,S),p=Math.max(p,S));return{x:a,y:v,width:h-a,height:p-v}}getLength(){return this.pathLength}getPointAtLength(s){return Wt.getPointAtLengthOfDataArray(s,this.dataArray)}static getLineLength(s,a,h,v){return Math.sqrt((h-s)*(h-s)+(v-a)*(v-a))}static getPathLength(s){let a=0;for(let h=0;h<s.length;++h)a+=s[h].pathLength;return a}static getPointAtLengthOfDataArray(s,a){let h,v=0,p=a.length;if(!p)return null;for(;v<p&&s>a[v].pathLength;)s-=a[v].pathLength,++v;if(v===p)return h=a[v-1].points.slice(-2),{x:h[0],y:h[1]};if(s<.01)return h=a[v].points.slice(0,2),{x:h[0],y:h[1]};const b=a[v],S=b.points;switch(b.command){case"L":return Wt.getPointOnLine(s,b.start.x,b.start.y,S[0],S[1]);case"C":return Wt.getPointOnCubicBezier((0,o.t2length)(s,Wt.getPathLength(a),P=>(0,o.getCubicArcLength)([b.start.x,S[0],S[2],S[4]],[b.start.y,S[1],S[3],S[5]],P)),b.start.x,b.start.y,S[0],S[1],S[2],S[3],S[4],S[5]);case"Q":return Wt.getPointOnQuadraticBezier((0,o.t2length)(s,Wt.getPathLength(a),P=>(0,o.getQuadraticArcLength)([b.start.x,S[0],S[2]],[b.start.y,S[1],S[3]],P)),b.start.x,b.start.y,S[0],S[1],S[2],S[3]);case"A":var y=S[0],f=S[1],T=S[2],E=S[3],w=S[4],_=S[5],m=S[6];return w+=_*s/b.pathLength,Wt.getPointOnEllipticalArc(y,f,T,E,w,m)}return null}static getPointOnLine(s,a,h,v,p,b,S){b=b??a,S=S??h;const y=this.getLineLength(a,h,v,p);if(y<1e-10)return{x:a,y:h};if(v===a)return{x:b,y:S+(p>h?s:-s)};const f=(p-h)/(v-a),T=Math.sqrt(s*s/(1+f*f))*(v<a?-1:1),E=f*T;if(Math.abs(S-h-f*(b-a))<1e-10)return{x:b+T,y:S+E};const w=((b-a)*(v-a)+(S-h)*(p-h))/(y*y),_=a+w*(v-a),m=h+w*(p-h),P=this.getLineLength(b,S,_,m),k=Math.sqrt(s*s-P*P),N=Math.sqrt(k*k/(1+f*f))*(v<a?-1:1),G=f*N;return{x:_+N,y:m+G}}static getPointOnCubicBezier(s,a,h,v,p,b,S,y,f){function T(k){return k*k*k}function E(k){return 3*k*k*(1-k)}function w(k){return 3*k*(1-k)*(1-k)}function _(k){return(1-k)*(1-k)*(1-k)}const m=y*T(s)+b*E(s)+v*w(s)+a*_(s),P=f*T(s)+S*E(s)+p*w(s)+h*_(s);return{x:m,y:P}}static getPointOnQuadraticBezier(s,a,h,v,p,b,S){function y(_){return _*_}function f(_){return 2*_*(1-_)}function T(_){return(1-_)*(1-_)}const E=b*y(s)+v*f(s)+a*T(s),w=S*y(s)+p*f(s)+h*T(s);return{x:E,y:w}}static getPointOnEllipticalArc(s,a,h,v,p,b){const S=Math.cos(b),y=Math.sin(b),f={x:h*Math.cos(p),y:v*Math.sin(p)};return{x:s+(f.x*S-f.y*y),y:a+(f.x*y+f.y*S)}}static parsePathData(s){if(!s)return[];let a=s;const h=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];a=a.replace(new RegExp(" ","g"),",");for(var v=0;v<h.length;v++)a=a.replace(new RegExp(h[v],"g"),"|"+h[v]);const p=a.split("|"),b=[],S=[];let y=0,f=0;const T=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let E;for(v=1;v<p.length;v++){let l=p[v],x=l.charAt(0);for(l=l.slice(1),S.length=0;E=T.exec(l);)S.push(E[0]);const u=[];for(let C=0,F=S.length;C<F;C++){if(S[C]==="00"){u.push(0,0);continue}const O=parseFloat(S[C]);isNaN(O)?u.push(0):u.push(O)}for(;u.length>0&&!isNaN(u[0]);){let C="",F=[];const O=y,D=f;var w,_,m,P,k,N,G,g,c,d;switch(x){case"l":y+=u.shift(),f+=u.shift(),C="L",F.push(y,f);break;case"L":y=u.shift(),f=u.shift(),F.push(y,f);break;case"m":var A=u.shift(),M=u.shift();if(y+=A,f+=M,C="M",b.length>2&&b[b.length-1].command==="z"){for(let U=b.length-2;U>=0;U--)if(b[U].command==="M"){y=b[U].points[0]+A,f=b[U].points[1]+M;break}}F.push(y,f),x="l";break;case"M":y=u.shift(),f=u.shift(),C="M",F.push(y,f),x="L";break;case"h":y+=u.shift(),C="L",F.push(y,f);break;case"H":y=u.shift(),C="L",F.push(y,f);break;case"v":f+=u.shift(),C="L",F.push(y,f);break;case"V":f=u.shift(),C="L",F.push(y,f);break;case"C":F.push(u.shift(),u.shift(),u.shift(),u.shift()),y=u.shift(),f=u.shift(),F.push(y,f);break;case"c":F.push(y+u.shift(),f+u.shift(),y+u.shift(),f+u.shift()),y+=u.shift(),f+=u.shift(),C="C",F.push(y,f);break;case"S":_=y,m=f,w=b[b.length-1],w.command==="C"&&(_=y+(y-w.points[2]),m=f+(f-w.points[3])),F.push(_,m,u.shift(),u.shift()),y=u.shift(),f=u.shift(),C="C",F.push(y,f);break;case"s":_=y,m=f,w=b[b.length-1],w.command==="C"&&(_=y+(y-w.points[2]),m=f+(f-w.points[3])),F.push(_,m,y+u.shift(),f+u.shift()),y+=u.shift(),f+=u.shift(),C="C",F.push(y,f);break;case"Q":F.push(u.shift(),u.shift()),y=u.shift(),f=u.shift(),F.push(y,f);break;case"q":F.push(y+u.shift(),f+u.shift()),y+=u.shift(),f+=u.shift(),C="Q",F.push(y,f);break;case"T":_=y,m=f,w=b[b.length-1],w.command==="Q"&&(_=y+(y-w.points[0]),m=f+(f-w.points[1])),y=u.shift(),f=u.shift(),C="Q",F.push(_,m,y,f);break;case"t":_=y,m=f,w=b[b.length-1],w.command==="Q"&&(_=y+(y-w.points[0]),m=f+(f-w.points[1])),y+=u.shift(),f+=u.shift(),C="Q",F.push(_,m,y,f);break;case"A":P=u.shift(),k=u.shift(),N=u.shift(),G=u.shift(),g=u.shift(),c=y,d=f,y=u.shift(),f=u.shift(),C="A",F=this.convertEndpointToCenterParameterization(c,d,y,f,G,g,P,k,N);break;case"a":P=u.shift(),k=u.shift(),N=u.shift(),G=u.shift(),g=u.shift(),c=y,d=f,y+=u.shift(),f+=u.shift(),C="A",F=this.convertEndpointToCenterParameterization(c,d,y,f,G,g,P,k,N);break}b.push({command:C||x,points:F,start:{x:O,y:D},pathLength:this.calcLength(O,D,C||x,F)})}(x==="z"||x==="Z")&&b.push({command:"z",points:[],start:void 0,pathLength:0})}return b}static calcLength(s,a,h,v){let p,b,S,y;const f=Wt;switch(h){case"L":return f.getLineLength(s,a,v[0],v[1]);case"C":return(0,o.getCubicArcLength)([s,v[0],v[2],v[4]],[a,v[1],v[3],v[5]],1);case"Q":return(0,o.getQuadraticArcLength)([s,v[0],v[2]],[a,v[1],v[3]],1);case"A":p=0;var T=v[4],E=v[5],w=v[4]+E,_=Math.PI/180;if(Math.abs(T-w)<_&&(_=Math.abs(T-w)),b=f.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],T,0),E<0)for(y=T-_;y>w;y-=_)S=f.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],y,0),p+=f.getLineLength(b.x,b.y,S.x,S.y),b=S;else for(y=T+_;y<w;y+=_)S=f.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],y,0),p+=f.getLineLength(b.x,b.y,S.x,S.y),b=S;return S=f.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],w,0),p+=f.getLineLength(b.x,b.y,S.x,S.y),p}return 0}static convertEndpointToCenterParameterization(s,a,h,v,p,b,S,y,f){const T=f*(Math.PI/180),E=Math.cos(T)*(s-h)/2+Math.sin(T)*(a-v)/2,w=-1*Math.sin(T)*(s-h)/2+Math.cos(T)*(a-v)/2,_=E*E/(S*S)+w*w/(y*y);_>1&&(S*=Math.sqrt(_),y*=Math.sqrt(_));let m=Math.sqrt((S*S*(y*y)-S*S*(w*w)-y*y*(E*E))/(S*S*(w*w)+y*y*(E*E)));p===b&&(m*=-1),isNaN(m)&&(m=0);const P=m*S*w/y,k=m*-y*E/S,N=(s+h)/2+Math.cos(T)*P-Math.sin(T)*k,G=(a+v)/2+Math.sin(T)*P+Math.cos(T)*k,g=function(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])},c=function(u,C){return(u[0]*C[0]+u[1]*C[1])/(g(u)*g(C))},d=function(u,C){return(u[0]*C[1]<u[1]*C[0]?-1:1)*Math.acos(c(u,C))},A=d([1,0],[(E-P)/S,(w-k)/y]),M=[(E-P)/S,(w-k)/y],l=[(-1*E-P)/S,(-1*w-k)/y];let x=d(M,l);return c(M,l)<=-1&&(x=Math.PI),c(M,l)>=1&&(x=0),b===0&&x>0&&(x=x-2*Math.PI),b===1&&x<0&&(x=x+2*Math.PI),[N,G,S,y,A,x,T,b]}};return ci.Path=n,n.prototype.className="Path",n.prototype._attrsAffectingSize=["data"],(0,i._registerNode)(n),t.Factory.addGetterSetter(n,"data"),ci}var zs;function Fc(){if(zs)return li;zs=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Arrow=void 0;const t=pt(),e=Ga(),i=mt(),o=gt(),n=Dr();let r=class extends e.Line{_sceneFunc(s){super._sceneFunc(s);const a=Math.PI*2,h=this.points();let v=h;const p=this.tension()!==0&&h.length>4;p&&(v=this.getTensionPoints());const b=this.pointerLength(),S=h.length;let y,f;if(p){const w=[v[v.length-4],v[v.length-3],v[v.length-2],v[v.length-1],h[S-2],h[S-1]],_=n.Path.calcLength(v[v.length-4],v[v.length-3],"C",w),m=n.Path.getPointOnQuadraticBezier(Math.min(1,1-b/_),w[0],w[1],w[2],w[3],w[4],w[5]);y=h[S-2]-m.x,f=h[S-1]-m.y}else y=h[S-2]-h[S-4],f=h[S-1]-h[S-3];const T=(Math.atan2(f,y)+a)%a,E=this.pointerWidth();this.pointerAtEnding()&&(s.save(),s.beginPath(),s.translate(h[S-2],h[S-1]),s.rotate(T),s.moveTo(0,0),s.lineTo(-b,E/2),s.lineTo(-b,-E/2),s.closePath(),s.restore(),this.__fillStroke(s)),this.pointerAtBeginning()&&(s.save(),s.beginPath(),s.translate(h[0],h[1]),p?(y=(v[0]+v[2])/2-h[0],f=(v[1]+v[3])/2-h[1]):(y=h[2]-h[0],f=h[3]-h[1]),s.rotate((Math.atan2(-f,-y)+a)%a),s.moveTo(0,0),s.lineTo(-b,E/2),s.lineTo(-b,-E/2),s.closePath(),s.restore(),this.__fillStroke(s))}__fillStroke(s){const a=this.dashEnabled();a&&(this.attrs.dashEnabled=!1,s.setLineDash([])),s.fillStrokeShape(this),a&&(this.attrs.dashEnabled=!0)}getSelfRect(){const s=super.getSelfRect(),a=this.pointerWidth()/2;return{x:s.x,y:s.y-a,width:s.width,height:s.height+a*2}}};return li.Arrow=r,r.prototype.className="Arrow",(0,o._registerNode)(r),t.Factory.addGetterSetter(r,"pointerLength",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerWidth",10,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"pointerAtBeginning",!1),t.Factory.addGetterSetter(r,"pointerAtEnding",!0),li}var ui={},Ks;function Mc(){if(Ks)return ui;Ks=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Circle=void 0;const t=pt(),e=Nt(),i=mt(),o=gt();let n=class extends e.Shape{_sceneFunc(r){r.beginPath(),r.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(r){this.radius()!==r/2&&this.radius(r/2)}setHeight(r){this.radius()!==r/2&&this.radius(r/2)}};return ui.Circle=n,n.prototype._centroid=!0,n.prototype.className="Circle",n.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),ui}var di={},$s;function Ec(){if($s)return di;$s=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Ellipse=void 0;const t=pt(),e=Nt(),i=mt(),o=gt();let n=class extends e.Shape{_sceneFunc(r){const s=this.radiusX(),a=this.radiusY();r.beginPath(),r.save(),s!==a&&r.scale(1,a/s),r.arc(0,0,s,0,Math.PI*2,!1),r.restore(),r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(r){this.radiusX(r/2)}setHeight(r){this.radiusY(r/2)}};return di.Ellipse=n,n.prototype.className="Ellipse",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,o._registerNode)(n),t.Factory.addComponentsGetterSetter(n,"radius",["x","y"]),t.Factory.addGetterSetter(n,"radiusX",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"radiusY",0,(0,i.getNumberValidator)()),di}var fi={},Xs;function kc(){if(Xs)return fi;Xs=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Image=void 0;const t=Tt(),e=pt(),i=Nt(),o=gt(),n=mt();let r=class Ia extends i.Shape{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const a=!!this.cornerRadius(),h=this.hasShadow();return a&&h?!0:super._useBufferCanvas(!0)}_sceneFunc(a){const h=this.getWidth(),v=this.getHeight(),p=this.cornerRadius(),b=this.attrs.image;let S;if(b){const y=this.attrs.cropWidth,f=this.attrs.cropHeight;y&&f?S=[b,this.cropX(),this.cropY(),y,f,0,0,h,v]:S=[b,0,0,h,v]}(this.hasFill()||this.hasStroke()||p)&&(a.beginPath(),p?t.Util.drawRoundedRectPath(a,h,v,p):a.rect(0,0,h,v),a.closePath(),a.fillStrokeShape(this)),b&&(p&&a.clip(),a.drawImage.apply(a,S))}_hitFunc(a){const h=this.width(),v=this.height(),p=this.cornerRadius();a.beginPath(),p?t.Util.drawRoundedRectPath(a,h,v,p):a.rect(0,0,h,v),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,h;return(a=this.attrs.width)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.width}getHeight(){var a,h;return(a=this.attrs.height)!==null&&a!==void 0?a:(h=this.image())===null||h===void 0?void 0:h.height}static fromURL(a,h,v=null){const p=t.Util.createImageElement();p.onload=function(){const b=new Ia({image:p});h(b)},p.onerror=v,p.crossOrigin="Anonymous",p.src=a}};return fi.Image=r,r.prototype.className="Image",(0,o._registerNode)(r),e.Factory.addGetterSetter(r,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),e.Factory.addGetterSetter(r,"image"),e.Factory.addComponentsGetterSetter(r,"crop",["x","y","width","height"]),e.Factory.addGetterSetter(r,"cropX",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropY",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(r,"cropHeight",0,(0,n.getNumberValidator)()),fi}var Re={},Ys;function Oc(){if(Ys)return Re;Ys=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.Tag=Re.Label=void 0;const t=pt(),e=Nt(),i=Nr(),o=mt(),n=gt(),r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],s="Change.konva",a="none",h="up",v="right",p="down",b="left",S=r.length;let y=class extends i.Group{constructor(T){super(T),this.on("add.konva",function(E){this._addListeners(E.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(T){let E=this,w;const _=function(){E._sync()};for(w=0;w<S;w++)T.on(r[w]+s,_)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let T=this.getText(),E=this.getTag(),w,_,m,P,k,N,G;if(T&&E){switch(w=T.width(),_=T.height(),m=E.pointerDirection(),P=E.pointerWidth(),G=E.pointerHeight(),k=0,N=0,m){case h:k=w/2,N=-1*G;break;case v:k=w+P,N=_/2;break;case p:k=w/2,N=_+G;break;case b:k=-1*P,N=_/2;break}E.setAttrs({x:-1*k,y:-1*N,width:w,height:_}),T.setAttrs({x:-1*k,y:-1*N})}}};Re.Label=y,y.prototype.className="Label",(0,n._registerNode)(y);class f extends e.Shape{_sceneFunc(E){const w=this.width(),_=this.height(),m=this.pointerDirection(),P=this.pointerWidth(),k=this.pointerHeight(),N=this.cornerRadius();let G=0,g=0,c=0,d=0;typeof N=="number"?G=g=c=d=Math.min(N,w/2,_/2):(G=Math.min(N[0]||0,w/2,_/2),g=Math.min(N[1]||0,w/2,_/2),d=Math.min(N[2]||0,w/2,_/2),c=Math.min(N[3]||0,w/2,_/2)),E.beginPath(),E.moveTo(G,0),m===h&&(E.lineTo((w-P)/2,0),E.lineTo(w/2,-1*k),E.lineTo((w+P)/2,0)),E.lineTo(w-g,0),E.arc(w-g,g,g,Math.PI*3/2,0,!1),m===v&&(E.lineTo(w,(_-k)/2),E.lineTo(w+P,_/2),E.lineTo(w,(_+k)/2)),E.lineTo(w,_-d),E.arc(w-d,_-d,d,0,Math.PI/2,!1),m===p&&(E.lineTo((w+P)/2,_),E.lineTo(w/2,_+k),E.lineTo((w-P)/2,_)),E.lineTo(c,_),E.arc(c,_-c,c,Math.PI/2,Math.PI,!1),m===b&&(E.lineTo(0,(_+k)/2),E.lineTo(-1*P,_/2),E.lineTo(0,(_-k)/2)),E.lineTo(0,G),E.arc(G,G,G,Math.PI,Math.PI*3/2,!1),E.closePath(),E.fillStrokeShape(this)}getSelfRect(){let E=0,w=0,_=this.pointerWidth(),m=this.pointerHeight(),P=this.pointerDirection(),k=this.width(),N=this.height();return P===h?(w-=m,N+=m):P===p?N+=m:P===b?(E-=_*1.5,k+=_):P===v&&(k+=_*1.5),{x:E,y:w,width:k,height:N}}}return Re.Tag=f,f.prototype.className="Tag",(0,n._registerNode)(f),t.Factory.addGetterSetter(f,"pointerDirection",a),t.Factory.addGetterSetter(f,"pointerWidth",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(f,"pointerHeight",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(f,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),Re}var gi={},qs;function La(){if(qs)return gi;qs=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Rect=void 0;const t=pt(),e=Nt(),i=gt(),o=Tt(),n=mt();let r=class extends e.Shape{_sceneFunc(s){const a=this.cornerRadius(),h=this.width(),v=this.height();s.beginPath(),a?o.Util.drawRoundedRectPath(s,h,v,a):s.rect(0,0,h,v),s.closePath(),s.fillStrokeShape(this)}};return gi.Rect=r,r.prototype.className="Rect",(0,i._registerNode)(r),t.Factory.addGetterSetter(r,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),gi}var pi={},Qs;function Nc(){if(Qs)return pi;Qs=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.RegularPolygon=void 0;const t=pt(),e=Nt(),i=mt(),o=gt();let n=class extends e.Shape{_sceneFunc(r){const s=this._getPoints();r.beginPath(),r.moveTo(s[0].x,s[0].y);for(let a=1;a<s.length;a++)r.lineTo(s[a].x,s[a].y);r.closePath(),r.fillStrokeShape(this)}_getPoints(){const r=this.attrs.sides,s=this.attrs.radius||0,a=[];for(let h=0;h<r;h++)a.push({x:s*Math.sin(h*2*Math.PI/r),y:-1*s*Math.cos(h*2*Math.PI/r)});return a}getSelfRect(){const r=this._getPoints();let s=r[0].x,a=r[0].y,h=r[0].x,v=r[0].y;return r.forEach(p=>{s=Math.min(s,p.x),a=Math.max(a,p.x),h=Math.min(h,p.y),v=Math.max(v,p.y)}),{x:s,y:h,width:a-s,height:v-h}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(r){this.radius(r/2)}setHeight(r){this.radius(r/2)}};return pi.RegularPolygon=n,n.prototype.className="RegularPolygon",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(n),t.Factory.addGetterSetter(n,"radius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"sides",0,(0,i.getNumberValidator)()),pi}var mi={},Js;function Rc(){if(Js)return mi;Js=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Ring=void 0;const t=pt(),e=Nt(),i=mt(),o=gt(),n=Math.PI*2;let r=class extends e.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.innerRadius(),0,n,!1),s.moveTo(this.outerRadius(),0),s.arc(0,0,this.outerRadius(),n,0,!0),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(s){this.outerRadius(s/2)}setHeight(s){this.outerRadius(s/2)}};return mi.Ring=r,r.prototype.className="Ring",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,o._registerNode)(r),t.Factory.addGetterSetter(r,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(r,"outerRadius",0,(0,i.getNumberValidator)()),mi}var vi={},Zs;function Dc(){if(Zs)return vi;Zs=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Sprite=void 0;const t=pt(),e=Nt(),i=Rr(),o=mt(),n=gt();let r=class extends e.Shape{constructor(s){super(s),this._updated=!0,this.anim=new i.Animation(()=>{const a=this._updated;return this._updated=!1,a}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(s){const a=this.animation(),h=this.frameIndex(),v=h*4,p=this.animations()[a],b=this.frameOffsets(),S=p[v+0],y=p[v+1],f=p[v+2],T=p[v+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(s.beginPath(),s.rect(0,0,f,T),s.closePath(),s.fillStrokeShape(this)),E)if(b){const w=b[a],_=h*2;s.drawImage(E,S,y,f,T,w[_+0],w[_+1],f,T)}else s.drawImage(E,S,y,f,T,0,0,f,T)}_hitFunc(s){const a=this.animation(),h=this.frameIndex(),v=h*4,p=this.animations()[a],b=this.frameOffsets(),S=p[v+2],y=p[v+3];if(s.beginPath(),b){const f=b[a],T=h*2;s.rect(f[T+0],f[T+1],S,y)}else s.rect(0,0,S,y);s.closePath(),s.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const s=this;this.interval=setInterval(function(){s._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const s=this.getLayer();this.anim.setLayers(s),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const s=this.frameIndex(),a=this.animation(),h=this.animations(),v=h[a],p=v.length/4;s<p-1?this.frameIndex(s+1):this.frameIndex(0)}};return vi.Sprite=r,r.prototype.className="Sprite",(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"animation"),t.Factory.addGetterSetter(r,"animations"),t.Factory.addGetterSetter(r,"frameOffsets"),t.Factory.addGetterSetter(r,"image"),t.Factory.addGetterSetter(r,"frameIndex",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(r,"frameRate",17,(0,o.getNumberValidator)()),t.Factory.backCompat(r,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),vi}var _i={},to;function Gc(){if(to)return _i;to=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Star=void 0;const t=pt(),e=Nt(),i=mt(),o=gt();let n=class extends e.Shape{_sceneFunc(r){const s=this.innerRadius(),a=this.outerRadius(),h=this.numPoints();r.beginPath(),r.moveTo(0,0-a);for(let v=1;v<h*2;v++){const p=v%2===0?a:s,b=p*Math.sin(v*Math.PI/h),S=-1*p*Math.cos(v*Math.PI/h);r.lineTo(b,S)}r.closePath(),r.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(r){this.outerRadius(r/2)}setHeight(r){this.outerRadius(r/2)}};return _i.Star=n,n.prototype.className="Star",n.prototype._centroid=!0,n.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,o._registerNode)(n),t.Factory.addGetterSetter(n,"numPoints",5,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"innerRadius",0,(0,i.getNumberValidator)()),t.Factory.addGetterSetter(n,"outerRadius",0,(0,i.getNumberValidator)()),_i}var je={},eo;function Ua(){if(eo)return je;eo=1,Object.defineProperty(je,"__esModule",{value:!0}),je.Text=void 0,je.stringToArray=s;const t=Tt(),e=pt(),i=Nt(),o=gt(),n=mt(),r=gt();function s(j){return[...j].reduce((X,Y,q,J)=>{if(new RegExp("\\p{Emoji}","u").test(Y)){const I=J[q+1];I&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(I)?(X.push(Y+I),J[q+1]=""):X.push(Y)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(Y+(J[q+1]||""))?X.push(Y+J[q+1]):q>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(Y)?X[X.length-1]+=Y:Y&&X.push(Y);return X},[])}const a="auto",h="center",v="inherit",p="justify",b="Change.konva",S="2d",y="-",f="left",T="text",E="Text",w="top",_="bottom",m="middle",P="normal",k="px ",N=" ",G="right",g="rtl",c="word",d="char",A="none",M="",l=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],x=l.length;function u(j){return j.split(",").map(X=>{X=X.trim();const Y=X.indexOf(" ")>=0,q=X.indexOf('"')>=0||X.indexOf("'")>=0;return Y&&!q&&(X=`"${X}"`),X}).join(", ")}let C;function F(){return C||(C=t.Util.createCanvasElement().getContext(S),C)}function O(j){j.fillText(this._partialText,this._partialTextX,this._partialTextY)}function D(j){j.setAttr("miterLimit",2),j.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function U(j){return j=j||{},!j.fillLinearGradientColorStops&&!j.fillRadialGradientColorStops&&!j.fillPatternImage&&(j.fill=j.fill||"black"),j}let B=class extends i.Shape{constructor(j){super(U(j)),this._partialTextX=0,this._partialTextY=0;for(let X=0;X<x;X++)this.on(l[X]+b,this._setTextData);this._setTextData()}_sceneFunc(j){const X=this.textArr,Y=X.length;if(!this.text())return;let q=this.padding(),J=this.fontSize(),I=this.lineHeight()*J,W=this.verticalAlign(),Q=this.direction(),Z=0,it=this.align(),R=this.getWidth(),L=this.letterSpacing(),H=this.fill(),V=this.textDecoration(),z=V.indexOf("underline")!==-1,K=V.indexOf("line-through")!==-1,nt;Q=Q===v?j.direction:Q;let tt=I/2,et=m;if(o.Konva._fixTextRendering){const Pt=this.measureSize("M");et="alphabetic",tt=(Pt.fontBoundingBoxAscent-Pt.fontBoundingBoxDescent)/2+I/2}var $=0,st=0;for(Q===g&&j.setAttr("direction",Q),j.setAttr("font",this._getContextFont()),j.setAttr("textBaseline",et),j.setAttr("textAlign",f),W===m?Z=(this.getHeight()-Y*I-q*2)/2:W===_&&(Z=this.getHeight()-Y*I-q*2),j.translate(q,Z+q),nt=0;nt<Y;nt++){var $=0,st=0,rt=X[nt],ot=rt.text,at=rt.width,lt=rt.lastInParagraph,ft,ut;if(j.save(),it===G?$+=R-at-q*2:it===h&&($+=(R-at-q*2)/2),z){j.save(),j.beginPath();const wt=o.Konva._fixTextRendering?Math.round(J/4):Math.round(J/2),Ft=$,jt=tt+st+wt;j.moveTo(Ft,jt),ft=ot.split(" ").length-1,ut=it===p&&!lt?R-q*2:at,j.lineTo(Ft+Math.round(ut),jt),j.lineWidth=J/15;const sn=this._getLinearGradient();j.strokeStyle=sn||H,j.stroke(),j.restore()}if(K){j.save(),j.beginPath();const wt=o.Konva._fixTextRendering?-Math.round(J/4):0;j.moveTo($,tt+st+wt),ft=ot.split(" ").length-1,ut=it===p&&!lt?R-q*2:at,j.lineTo($+Math.round(ut),tt+st+wt),j.lineWidth=J/15;const Ft=this._getLinearGradient();j.strokeStyle=Ft||H,j.stroke(),j.restore()}if(Q!==g&&(L!==0||it===p)){ft=ot.split(" ").length-1;const wt=s(ot);for(let Ft=0;Ft<wt.length;Ft++){const jt=wt[Ft];jt===" "&&!lt&&it===p&&($+=(R-q*2-at)/ft),this._partialTextX=$,this._partialTextY=tt+st,this._partialText=jt,j.fillStrokeShape(this),$+=this.measureSize(jt).width+L}}else L!==0&&j.setAttr("letterSpacing",`${L}px`),this._partialTextX=$,this._partialTextY=tt+st,this._partialText=ot,j.fillStrokeShape(this);j.restore(),Y>1&&(tt+=I)}}_hitFunc(j){const X=this.getWidth(),Y=this.getHeight();j.beginPath(),j.rect(0,0,X,Y),j.closePath(),j.fillStrokeShape(this)}setText(j){const X=t.Util._isString(j)?j:j==null?"":j+"";return this._setAttr(T,X),this}getWidth(){return this.attrs.width===a||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===a||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(j){var X,Y,q,J,I,W,Q,Z,it,R,L;let H=F(),V=this.fontSize(),z;H.save(),H.font=this._getContextFont(),z=H.measureText(j),H.restore();const K=V/100;return{actualBoundingBoxAscent:(X=z.actualBoundingBoxAscent)!==null&&X!==void 0?X:71.58203125*K,actualBoundingBoxDescent:(Y=z.actualBoundingBoxDescent)!==null&&Y!==void 0?Y:0,actualBoundingBoxLeft:(q=z.actualBoundingBoxLeft)!==null&&q!==void 0?q:-7.421875*K,actualBoundingBoxRight:(J=z.actualBoundingBoxRight)!==null&&J!==void 0?J:75.732421875*K,alphabeticBaseline:(I=z.alphabeticBaseline)!==null&&I!==void 0?I:0,emHeightAscent:(W=z.emHeightAscent)!==null&&W!==void 0?W:100*K,emHeightDescent:(Q=z.emHeightDescent)!==null&&Q!==void 0?Q:-20*K,fontBoundingBoxAscent:(Z=z.fontBoundingBoxAscent)!==null&&Z!==void 0?Z:91*K,fontBoundingBoxDescent:(it=z.fontBoundingBoxDescent)!==null&&it!==void 0?it:21*K,hangingBaseline:(R=z.hangingBaseline)!==null&&R!==void 0?R:72.80000305175781*K,ideographicBaseline:(L=z.ideographicBaseline)!==null&&L!==void 0?L:-21*K,width:z.width,height:V}}_getContextFont(){return this.fontStyle()+N+this.fontVariant()+N+(this.fontSize()+k)+u(this.fontFamily())}_addTextLine(j){this.align()===p&&(j=j.trim());const X=this._getTextWidth(j);return this.textArr.push({text:j,width:X,lastInParagraph:!1})}_getTextWidth(j){const X=this.letterSpacing(),Y=j.length;return F().measureText(j).width+X*Y}_setTextData(){let j=this.text().split(`
`),X=+this.fontSize(),Y=0,q=this.lineHeight()*X,J=this.attrs.width,I=this.attrs.height,W=J!==a&&J!==void 0,Q=I!==a&&I!==void 0,Z=this.padding(),it=J-Z*2,R=I-Z*2,L=0,H=this.wrap(),V=H!==A,z=H!==d&&V,K=this.ellipsis();this.textArr=[],F().font=this._getContextFont();const nt=K?this._getTextWidth(M):0;for(let tt=0,et=j.length;tt<et;++tt){let $=j[tt],st=this._getTextWidth($);if(W&&st>it)for(;$.length>0;){let rt=0,ot=s($).length,at="",lt=0;for(;rt<ot;){const ft=rt+ot>>>1,ut=s($),Pt=ut.slice(0,ft+1).join(""),Et=this._getTextWidth(Pt)+nt;Et<=it?(rt=ft+1,at=Pt,lt=Et):ot=ft}if(at){if(z){const ft=s($),ut=s(at),Pt=ft[ut.length],Et=Pt===N||Pt===y;let wt;if(Et&&lt<=it)wt=ut.length;else{const Ft=ut.lastIndexOf(N),jt=ut.lastIndexOf(y);wt=Math.max(Ft,jt)+1}wt>0&&(rt=wt,at=ft.slice(0,rt).join(""),lt=this._getTextWidth(at))}if(at=at.trimRight(),this._addTextLine(at),Y=Math.max(Y,lt),L+=q,this._shouldHandleEllipsis(L)){this._tryToAddEllipsisToLastLine();break}if($=s($).slice(rt).join("").trimLeft(),$.length>0&&(st=this._getTextWidth($),st<=it)){this._addTextLine($),L+=q,Y=Math.max(Y,st);break}}else break}else this._addTextLine($),L+=q,Y=Math.max(Y,st),this._shouldHandleEllipsis(L)&&tt<et-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Q&&L+q>R)break}this.textHeight=X,this.textWidth=Y}_shouldHandleEllipsis(j){const X=+this.fontSize(),Y=this.lineHeight()*X,q=this.attrs.height,J=q!==a&&q!==void 0,I=this.padding(),W=q-I*2;return this.wrap()===A||J&&j+Y>W}_tryToAddEllipsisToLastLine(){const j=this.attrs.width,X=j!==a&&j!==void 0,Y=this.padding(),q=j-Y*2,J=this.ellipsis(),I=this.textArr[this.textArr.length-1];!I||!J||(X&&(this._getTextWidth(I.text+M)<q||(I.text=I.text.slice(0,I.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(I.text+M))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const j=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,X=this.hasShadow();return j&&X?!0:super._useBufferCanvas()}};return je.Text=B,B.prototype._fillFunc=O,B.prototype._strokeFunc=D,B.prototype.className=E,B.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,r._registerNode)(B),e.Factory.overWriteSetter(B,"width",(0,n.getNumberOrAutoValidator)()),e.Factory.overWriteSetter(B,"height",(0,n.getNumberOrAutoValidator)()),e.Factory.addGetterSetter(B,"direction",v),e.Factory.addGetterSetter(B,"fontFamily","Arial"),e.Factory.addGetterSetter(B,"fontSize",12,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(B,"fontStyle",P),e.Factory.addGetterSetter(B,"fontVariant",P),e.Factory.addGetterSetter(B,"padding",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(B,"align",f),e.Factory.addGetterSetter(B,"verticalAlign",w),e.Factory.addGetterSetter(B,"lineHeight",1,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(B,"wrap",c),e.Factory.addGetterSetter(B,"ellipsis",!1,(0,n.getBooleanValidator)()),e.Factory.addGetterSetter(B,"letterSpacing",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(B,"text","",(0,n.getStringValidator)()),e.Factory.addGetterSetter(B,"textDecoration",""),je}var yi={},io;function Ic(){if(io)return yi;io=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.TextPath=void 0;const t=Tt(),e=pt(),i=Nt(),o=Dr(),n=Ua(),r=mt(),s=gt(),a="",h="normal";function v(S){S.fillText(this.partialText,0,0)}function p(S){S.strokeText(this.partialText,0,0)}let b=class extends i.Shape{constructor(S){super(S),this.dummyCanvas=t.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return o.Path.getPathLength(this.dataArray)}_getPointAtLength(S){if(!this.attrs.data)return null;const y=this.pathLength;return S-1>y?null:o.Path.getPointAtLengthOfDataArray(S,this.dataArray)}_readDataAttribute(){this.dataArray=o.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(S){S.setAttr("font",this._getContextFont()),S.setAttr("textBaseline",this.textBaseline()),S.setAttr("textAlign","left"),S.save();const y=this.textDecoration(),f=this.fill(),T=this.fontSize(),E=this.glyphInfo;y==="underline"&&S.beginPath();for(let w=0;w<E.length;w++){S.save();const _=E[w].p0;S.translate(_.x,_.y),S.rotate(E[w].rotation),this.partialText=E[w].text,S.fillStrokeShape(this),y==="underline"&&(w===0&&S.moveTo(0,T/2+1),S.lineTo(T,T/2+1)),S.restore()}y==="underline"&&(S.strokeStyle=f,S.lineWidth=T/20,S.stroke()),S.restore()}_hitFunc(S){S.beginPath();const y=this.glyphInfo;if(y.length>=1){const f=y[0].p0;S.moveTo(f.x,f.y)}for(let f=0;f<y.length;f++){const T=y[f].p1;S.lineTo(T.x,T.y)}S.setAttr("lineWidth",this.fontSize()),S.setAttr("strokeStyle",this.colorKey),S.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return t.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(S){return n.Text.prototype.setText.call(this,S)}_getContextFont(){return n.Text.prototype._getContextFont.call(this)}_getTextSize(S){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const f=y.measureText(S);return y.restore(),{width:f.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:S,height:y}=this._getTextSize(this.attrs.text);if(this.textWidth=S,this.textHeight=y,this.glyphInfo=[],!this.attrs.data)return null;const f=this.letterSpacing(),T=this.align(),E=this.kerningFunc(),w=Math.max(this.textWidth+((this.attrs.text||"").length-1)*f,0);let _=0;T==="center"&&(_=Math.max(0,this.pathLength/2-w/2)),T==="right"&&(_=Math.max(0,this.pathLength-w));const m=(0,n.stringToArray)(this.text());let P=_;for(let k=0;k<m.length;k++){const N=this._getPointAtLength(P);if(!N)return;let G=this._getTextSize(m[k]).width+f;if(m[k]===" "&&T==="justify"){const l=this.text().split(" ").length-1;G+=(this.pathLength-w)/l}const g=this._getPointAtLength(P+G);if(!g)return;const c=o.Path.getLineLength(N.x,N.y,g.x,g.y);let d=0;if(E)try{d=E(m[k-1],m[k])*this.fontSize()}catch{d=0}N.x+=d,g.x+=d,this.textWidth+=d;const A=o.Path.getPointOnLine(d+c/2,N.x,N.y,g.x,g.y),M=Math.atan2(g.y-N.y,g.x-N.x);this.glyphInfo.push({transposeX:A.x,transposeY:A.y,text:m[k],rotation:M,p0:N,p1:g}),P+=G}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const S=[];this.glyphInfo.forEach(function(P){S.push(P.p0.x),S.push(P.p0.y),S.push(P.p1.x),S.push(P.p1.y)});let y=S[0]||0,f=S[0]||0,T=S[1]||0,E=S[1]||0,w,_;for(let P=0;P<S.length/2;P++)w=S[P*2],_=S[P*2+1],y=Math.min(y,w),f=Math.max(f,w),T=Math.min(T,_),E=Math.max(E,_);const m=this.fontSize();return{x:y-m/2,y:T-m/2,width:f-y+m,height:E-T+m}}destroy(){return t.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return yi.TextPath=b,b.prototype._fillFunc=v,b.prototype._strokeFunc=p,b.prototype._fillFuncHit=v,b.prototype._strokeFuncHit=p,b.prototype.className="TextPath",b.prototype._attrsAffectingSize=["text","fontSize","data"],(0,s._registerNode)(b),e.Factory.addGetterSetter(b,"data"),e.Factory.addGetterSetter(b,"fontFamily","Arial"),e.Factory.addGetterSetter(b,"fontSize",12,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(b,"fontStyle",h),e.Factory.addGetterSetter(b,"align","left"),e.Factory.addGetterSetter(b,"letterSpacing",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(b,"textBaseline","middle"),e.Factory.addGetterSetter(b,"fontVariant",h),e.Factory.addGetterSetter(b,"text",a),e.Factory.addGetterSetter(b,"textDecoration",""),e.Factory.addGetterSetter(b,"kerningFunc",void 0),yi}var bi={},no;function Lc(){if(no)return bi;no=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Transformer=void 0;const t=Tt(),e=pt(),i=Mt(),o=Nt(),n=La(),r=Nr(),s=gt(),a=mt(),h=gt(),v="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(c=>c+`.${v}`).join(" "),b="nodesRect",S=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],y={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},f="ontouchstart"in s.Konva._global;function T(c,d,A){if(c==="rotater")return A;d+=t.Util.degToRad(y[c]||0);const M=(t.Util.radToDeg(d)%360+360)%360;return t.Util._inRange(M,315+22.5,360)||t.Util._inRange(M,0,22.5)?"ns-resize":t.Util._inRange(M,45-22.5,45+22.5)?"nesw-resize":t.Util._inRange(M,90-22.5,90+22.5)?"ew-resize":t.Util._inRange(M,135-22.5,135+22.5)?"nwse-resize":t.Util._inRange(M,180-22.5,180+22.5)?"ns-resize":t.Util._inRange(M,225-22.5,225+22.5)?"nesw-resize":t.Util._inRange(M,270-22.5,270+22.5)?"ew-resize":t.Util._inRange(M,315-22.5,315+22.5)?"nwse-resize":(t.Util.error("Transformer has unknown angle for cursor detection: "+M),"pointer")}const E=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],w=1e8;function _(c){return{x:c.x+c.width/2*Math.cos(c.rotation)+c.height/2*Math.sin(-c.rotation),y:c.y+c.height/2*Math.cos(c.rotation)+c.width/2*Math.sin(c.rotation)}}function m(c,d,A){const M=A.x+(c.x-A.x)*Math.cos(d)-(c.y-A.y)*Math.sin(d),l=A.y+(c.x-A.x)*Math.sin(d)+(c.y-A.y)*Math.cos(d);return{...c,rotation:c.rotation+d,x:M,y:l}}function P(c,d){const A=_(c);return m(c,d,A)}function k(c,d,A){let M=d;for(let l=0;l<c.length;l++){const x=s.Konva.getAngle(c[l]),u=Math.abs(x-d)%(Math.PI*2);Math.min(u,Math.PI*2-u)<A&&(M=x)}return M}let N=0,G=class extends r.Group{constructor(c){super(c),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}attachTo(c){return this.setNode(c),this}setNode(c){return t.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([c])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(c=[]){this._nodes&&this._nodes.length&&this.detach();const d=c.filter(A=>A.isAncestorOf(this)?(t.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=c=d,c.length===1&&this.useSingleNodeRotation()?this.rotation(c[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(A=>{const M=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=A._attrsAffectingSize.map(x=>x+"Change."+this._getEventNamespace()).join(" ");A.on(l,M),A.on(S.map(x=>x+`.${this._getEventNamespace()}`).join(" "),M),A.on(`absoluteTransformChange.${this._getEventNamespace()}`,M),this._proxyDrag(A)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(c){let d;c.on(`dragstart.${this._getEventNamespace()}`,A=>{d=c.getAbsolutePosition(),!this.isDragging()&&c!==this.findOne(".back")&&this.startDrag(A,!1)}),c.on(`dragmove.${this._getEventNamespace()}`,A=>{if(!d)return;const M=c.getAbsolutePosition(),l=M.x-d.x,x=M.y-d.y;this.nodes().forEach(u=>{if(u===c||u.isDragging())return;const C=u.getAbsolutePosition();u.setAbsolutePosition({x:C.x+l,y:C.y+x}),u.startDrag(A)}),d=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(c=>{c.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(b),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(b,this.__getNodeRect)}__getNodeShape(c,d=this.rotation(),A){const M=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=c.getAbsoluteScale(A),x=c.getAbsolutePosition(A),u=M.x*l.x-c.offsetX()*l.x,C=M.y*l.y-c.offsetY()*l.y,F=(s.Konva.getAngle(c.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),O={x:x.x+u*Math.cos(F)+C*Math.sin(-F),y:x.y+C*Math.cos(F)+u*Math.sin(F),width:M.width*l.x,height:M.height*l.y,rotation:F};return m(O,-s.Konva.getAngle(d),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-w,y:-w,width:0,height:0,rotation:0};const c=[];this.nodes().map(C=>{const F=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),O=[{x:F.x,y:F.y},{x:F.x+F.width,y:F.y},{x:F.x+F.width,y:F.y+F.height},{x:F.x,y:F.y+F.height}],D=C.getAbsoluteTransform();O.forEach(function(U){const B=D.point(U);c.push(B)})});const d=new t.Transform;d.rotate(-s.Konva.getAngle(this.rotation()));let A=1/0,M=1/0,l=-1/0,x=-1/0;c.forEach(function(C){const F=d.point(C);A===void 0&&(A=l=F.x,M=x=F.y),A=Math.min(A,F.x),M=Math.min(M,F.y),l=Math.max(l,F.x),x=Math.max(x,F.y)}),d.invert();const u=d.point({x:A,y:M});return{x:u.x,y:u.y,width:l-A,height:x-M,rotation:s.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),E.forEach(c=>{this._createAnchor(c)}),this._createAnchor("rotater")}_createAnchor(c){const d=new n.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:c+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:f?10:"auto"}),A=this;d.on("mousedown touchstart",function(M){A._handleMouseDown(M)}),d.on("dragstart",M=>{d.stopDrag(),M.cancelBubble=!0}),d.on("dragend",M=>{M.cancelBubble=!0}),d.on("mouseenter",()=>{const M=s.Konva.getAngle(this.rotation()),l=this.rotateAnchorCursor(),x=T(c,M,l);d.getStage().content&&(d.getStage().content.style.cursor=x),this._cursorChange=!0}),d.on("mouseout",()=>{d.getStage().content&&(d.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(d)}_createBack(){const c=new o.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(d,A){const M=A.getParent(),l=M.padding();d.beginPath(),d.rect(-l,-l,A.width()+l*2,A.height()+l*2),d.moveTo(A.width()/2,-l),M.rotateEnabled()&&M.rotateLineVisible()&&d.lineTo(A.width()/2,-M.rotateAnchorOffset()*t.Util._sign(A.height())-l),d.fillStrokeShape(A)},hitFunc:(d,A)=>{if(!this.shouldOverdrawWholeArea())return;const M=this.padding();d.beginPath(),d.rect(-M,-M,A.width()+M*2,A.height()+M*2),d.fillStrokeShape(A)}});this.add(c),this._proxyDrag(c),c.on("dragstart",d=>{d.cancelBubble=!0}),c.on("dragmove",d=>{d.cancelBubble=!0}),c.on("dragend",d=>{d.cancelBubble=!0}),this.on("dragmove",d=>{this.update()})}_handleMouseDown(c){if(this._transforming)return;this._movingAnchorName=c.target.name().split(" ")[0];const d=this._getNodeRect(),A=d.width,M=d.height,l=Math.sqrt(Math.pow(A,2)+Math.pow(M,2));this.sin=Math.abs(M/l),this.cos=Math.abs(A/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const x=c.target.getAbsolutePosition(),u=c.target.getStage().getPointerPosition();this._anchorDragOffset={x:u.x-x.x,y:u.y-x.y},N++,this._fire("transformstart",{evt:c.evt,target:this.getNode()}),this._nodes.forEach(C=>{C._fire("transformstart",{evt:c.evt,target:C})})}_handleMouseMove(c){let d,A,M;const l=this.findOne("."+this._movingAnchorName),x=l.getStage();x.setPointersPositions(c);const u=x.getPointerPosition();let C={x:u.x-this._anchorDragOffset.x,y:u.y-this._anchorDragOffset.y};const F=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(C=this.anchorDragBoundFunc()(F,C,c)),l.setAbsolutePosition(C);const O=l.getAbsolutePosition();if(F.x===O.x&&F.y===O.y)return;if(this._movingAnchorName==="rotater"){const Q=this._getNodeRect();d=l.x()-Q.width/2,A=-l.y()+Q.height/2;let Z=Math.atan2(-A,d)+Math.PI/2;Q.height<0&&(Z-=Math.PI);const it=s.Konva.getAngle(this.rotation())+Z,R=s.Konva.getAngle(this.rotationSnapTolerance()),L=k(this.rotationSnaps(),it,R)-Q.rotation,H=P(Q,L);this._fitNodesInto(H,c);return}const D=this.shiftBehavior();let U;D==="inverted"?U=this.keepRatio()&&!c.shiftKey:D==="none"?U=this.keepRatio():U=this.keepRatio()||c.shiftKey;var q=this.centeredScaling()||c.altKey;if(this._movingAnchorName==="top-left"){if(U){var B=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};M=Math.sqrt(Math.pow(B.x-l.x(),2)+Math.pow(B.y-l.y(),2));var j=this.findOne(".top-left").x()>B.x?-1:1,X=this.findOne(".top-left").y()>B.y?-1:1;d=M*this.cos*j,A=M*this.sin*X,this.findOne(".top-left").x(B.x-d),this.findOne(".top-left").y(B.y-A)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(U){var B=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};M=Math.sqrt(Math.pow(l.x()-B.x,2)+Math.pow(B.y-l.y(),2));var j=this.findOne(".top-right").x()<B.x?-1:1,X=this.findOne(".top-right").y()>B.y?-1:1;d=M*this.cos*j,A=M*this.sin*X,this.findOne(".top-right").x(B.x+d),this.findOne(".top-right").y(B.y-A)}var Y=l.position();this.findOne(".top-left").y(Y.y),this.findOne(".bottom-right").x(Y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(U){var B=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};M=Math.sqrt(Math.pow(B.x-l.x(),2)+Math.pow(l.y()-B.y,2));var j=B.x<l.x()?-1:1,X=l.y()<B.y?-1:1;d=M*this.cos*j,A=M*this.sin*X,l.x(B.x-d),l.y(B.y+A)}Y=l.position(),this.findOne(".top-left").x(Y.x),this.findOne(".bottom-right").y(Y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(U){var B=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};M=Math.sqrt(Math.pow(l.x()-B.x,2)+Math.pow(l.y()-B.y,2));var j=this.findOne(".bottom-right").x()<B.x?-1:1,X=this.findOne(".bottom-right").y()<B.y?-1:1;d=M*this.cos*j,A=M*this.sin*X,this.findOne(".bottom-right").x(B.x+d),this.findOne(".bottom-right").y(B.y+A)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var q=this.centeredScaling()||c.altKey;if(q){const Q=this.findOne(".top-left"),Z=this.findOne(".bottom-right"),it=Q.x(),R=Q.y(),L=this.getWidth()-Z.x(),H=this.getHeight()-Z.y();Z.move({x:-it,y:-R}),Q.move({x:L,y:H})}const J=this.findOne(".top-left").getAbsolutePosition();d=J.x,A=J.y;const I=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),W=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:d,y:A,width:I,height:W,rotation:s.Konva.getAngle(this.rotation())},c)}_handleMouseUp(c){this._removeEvents(c)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(c){var d;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const A=this.getNode();N--,this._fire("transformend",{evt:c,target:A}),(d=this.getLayer())===null||d===void 0||d.batchDraw(),A&&this._nodes.forEach(M=>{var l;M._fire("transformend",{evt:c,target:M}),(l=M.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(c,d){const A=this._getNodeRect(),M=1;if(t.Util._inRange(c.width,-this.padding()*2-M,M)){this.update();return}if(t.Util._inRange(c.height,-this.padding()*2-M,M)){this.update();return}const l=new t.Transform;if(l.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&c.width<0&&this._movingAnchorName.indexOf("left")>=0){const U=l.point({x:-this.padding()*2,y:0});c.x+=U.x,c.y+=U.y,c.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y}else if(this._movingAnchorName&&c.width<0&&this._movingAnchorName.indexOf("right")>=0){const U=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,c.width+=this.padding()*2}if(this._movingAnchorName&&c.height<0&&this._movingAnchorName.indexOf("top")>=0){const U=l.point({x:0,y:-this.padding()*2});c.x+=U.x,c.y+=U.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,c.height+=this.padding()*2}else if(this._movingAnchorName&&c.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const U=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=U.x,this._anchorDragOffset.y-=U.y,c.height+=this.padding()*2}if(this.boundBoxFunc()){const U=this.boundBoxFunc()(A,c);U?c=U:t.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const x=1e7,u=new t.Transform;u.translate(A.x,A.y),u.rotate(A.rotation),u.scale(A.width/x,A.height/x);const C=new t.Transform,F=c.width/x,O=c.height/x;this.flipEnabled()===!1?(C.translate(c.x,c.y),C.rotate(c.rotation),C.translate(c.width<0?c.width:0,c.height<0?c.height:0),C.scale(Math.abs(F),Math.abs(O))):(C.translate(c.x,c.y),C.rotate(c.rotation),C.scale(F,O));const D=C.multiply(u.invert());this._nodes.forEach(U=>{var B;const j=U.getParent().getAbsoluteTransform(),X=U.getTransform().copy();X.translate(U.offsetX(),U.offsetY());const Y=new t.Transform;Y.multiply(j.copy().invert()).multiply(D).multiply(j).multiply(X);const q=Y.decompose();U.setAttrs(q),(B=U.getLayer())===null||B===void 0||B.batchDraw()}),this.rotation(t.Util._getRotation(c.rotation)),this._nodes.forEach(U=>{this._fire("transform",{evt:d,target:U}),U._fire("transform",{evt:d,target:U})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(c,d){this.findOne(c).setAttrs(d)}update(){var c;const d=this._getNodeRect();this.rotation(t.Util._getRotation(d.rotation));const A=d.width,M=d.height,l=this.enabledAnchors(),x=this.resizeEnabled(),u=this.padding(),C=this.anchorSize(),F=this.find("._anchor");F.forEach(D=>{D.setAttrs({width:C,height:C,offsetX:C/2,offsetY:C/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:C/2+u,offsetY:C/2+u,visible:x&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:A/2,y:0,offsetY:C/2+u,visible:x&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:A,y:0,offsetX:C/2-u,offsetY:C/2+u,visible:x&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:M/2,offsetX:C/2+u,visible:x&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:A,y:M/2,offsetX:C/2-u,visible:x&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:M,offsetX:C/2+u,offsetY:C/2-u,visible:x&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:A/2,y:M,offsetY:C/2-u,visible:x&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:A,y:M,offsetX:C/2-u,offsetY:C/2-u,visible:x&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:A/2,y:-this.rotateAnchorOffset()*t.Util._sign(M)-u,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:A,height:M,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const O=this.anchorStyleFunc();O&&F.forEach(D=>{O(D)}),(c=this.getLayer())===null||c===void 0||c.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const c=this.findOne("."+this._movingAnchorName);c&&c.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),r.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return i.Node.prototype.toObject.call(this)}clone(c){return i.Node.prototype.clone.call(this,c)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};bi.Transformer=G,G.isTransforming=()=>N>0;function g(c){return c instanceof Array||t.Util.warn("enabledAnchors value should be an array"),c instanceof Array&&c.forEach(function(d){E.indexOf(d)===-1&&t.Util.warn("Unknown anchor name: "+d+". Available names are: "+E.join(", "))}),c||[]}return G.prototype.className="Transformer",(0,h._registerNode)(G),e.Factory.addGetterSetter(G,"enabledAnchors",E,g),e.Factory.addGetterSetter(G,"flipEnabled",!0,(0,a.getBooleanValidator)()),e.Factory.addGetterSetter(G,"resizeEnabled",!0),e.Factory.addGetterSetter(G,"anchorSize",10,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"rotateEnabled",!0),e.Factory.addGetterSetter(G,"rotateLineVisible",!0),e.Factory.addGetterSetter(G,"rotationSnaps",[]),e.Factory.addGetterSetter(G,"rotateAnchorOffset",50,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"rotateAnchorCursor","crosshair"),e.Factory.addGetterSetter(G,"rotationSnapTolerance",5,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"borderEnabled",!0),e.Factory.addGetterSetter(G,"anchorStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(G,"anchorStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"anchorFill","white"),e.Factory.addGetterSetter(G,"anchorCornerRadius",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"borderStroke","rgb(0, 161, 255)"),e.Factory.addGetterSetter(G,"borderStrokeWidth",1,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"borderDash"),e.Factory.addGetterSetter(G,"keepRatio",!0),e.Factory.addGetterSetter(G,"shiftBehavior","default"),e.Factory.addGetterSetter(G,"centeredScaling",!1),e.Factory.addGetterSetter(G,"ignoreStroke",!1),e.Factory.addGetterSetter(G,"padding",0,(0,a.getNumberValidator)()),e.Factory.addGetterSetter(G,"nodes"),e.Factory.addGetterSetter(G,"node"),e.Factory.addGetterSetter(G,"boundBoxFunc"),e.Factory.addGetterSetter(G,"anchorDragBoundFunc"),e.Factory.addGetterSetter(G,"anchorStyleFunc"),e.Factory.addGetterSetter(G,"shouldOverdrawWholeArea",!1),e.Factory.addGetterSetter(G,"useSingleNodeRotation",!0),e.Factory.backCompat(G,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),bi}var xi={},ro;function Uc(){if(ro)return xi;ro=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Wedge=void 0;const t=pt(),e=Nt(),i=gt(),o=mt(),n=gt();let r=class extends e.Shape{_sceneFunc(s){s.beginPath(),s.arc(0,0,this.radius(),0,i.Konva.getAngle(this.angle()),this.clockwise()),s.lineTo(0,0),s.closePath(),s.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(s){this.radius(s/2)}setHeight(s){this.radius(s/2)}};return xi.Wedge=r,r.prototype.className="Wedge",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(r),t.Factory.addGetterSetter(r,"radius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(r,"angle",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(r,"clockwise",!1),t.Factory.backCompat(r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),xi}var Si={},so;function Bc(){if(so)return Si;so=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Blur=void 0;const t=pt(),e=Mt(),i=mt();function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(h,v){const p=h.data,b=h.width,S=h.height;let y,f,T,E,w,_,m,P,k,N,G,g,c,d,A,M,l,x,u,C,F,O,D,U;const B=v+v+1,j=b-1,X=S-1,Y=v+1,q=Y*(Y+1)/2,J=new o,I=n[v],W=r[v];let Q=null,Z=J,it=null,R=null;for(T=1;T<B;T++)Z=Z.next=new o,T===Y&&(Q=Z);for(Z.next=J,m=_=0,f=0;f<S;f++){for(M=l=x=u=P=k=N=G=0,g=Y*(C=p[_]),c=Y*(F=p[_+1]),d=Y*(O=p[_+2]),A=Y*(D=p[_+3]),P+=q*C,k+=q*F,N+=q*O,G+=q*D,Z=J,T=0;T<Y;T++)Z.r=C,Z.g=F,Z.b=O,Z.a=D,Z=Z.next;for(T=1;T<Y;T++)E=_+((j<T?j:T)<<2),P+=(Z.r=C=p[E])*(U=Y-T),k+=(Z.g=F=p[E+1])*U,N+=(Z.b=O=p[E+2])*U,G+=(Z.a=D=p[E+3])*U,M+=C,l+=F,x+=O,u+=D,Z=Z.next;for(it=J,R=Q,y=0;y<b;y++)p[_+3]=D=G*I>>W,D!==0?(D=255/D,p[_]=(P*I>>W)*D,p[_+1]=(k*I>>W)*D,p[_+2]=(N*I>>W)*D):p[_]=p[_+1]=p[_+2]=0,P-=g,k-=c,N-=d,G-=A,g-=it.r,c-=it.g,d-=it.b,A-=it.a,E=m+((E=y+v+1)<j?E:j)<<2,M+=it.r=p[E],l+=it.g=p[E+1],x+=it.b=p[E+2],u+=it.a=p[E+3],P+=M,k+=l,N+=x,G+=u,it=it.next,g+=C=R.r,c+=F=R.g,d+=O=R.b,A+=D=R.a,M-=C,l-=F,x-=O,u-=D,R=R.next,_+=4;m+=b}for(y=0;y<b;y++){for(l=x=u=M=k=N=G=P=0,_=y<<2,g=Y*(C=p[_]),c=Y*(F=p[_+1]),d=Y*(O=p[_+2]),A=Y*(D=p[_+3]),P+=q*C,k+=q*F,N+=q*O,G+=q*D,Z=J,T=0;T<Y;T++)Z.r=C,Z.g=F,Z.b=O,Z.a=D,Z=Z.next;for(w=b,T=1;T<=v;T++)_=w+y<<2,P+=(Z.r=C=p[_])*(U=Y-T),k+=(Z.g=F=p[_+1])*U,N+=(Z.b=O=p[_+2])*U,G+=(Z.a=D=p[_+3])*U,M+=C,l+=F,x+=O,u+=D,Z=Z.next,T<X&&(w+=b);for(_=y,it=J,R=Q,f=0;f<S;f++)E=_<<2,p[E+3]=D=G*I>>W,D>0?(D=255/D,p[E]=(P*I>>W)*D,p[E+1]=(k*I>>W)*D,p[E+2]=(N*I>>W)*D):p[E]=p[E+1]=p[E+2]=0,P-=g,k-=c,N-=d,G-=A,g-=it.r,c-=it.g,d-=it.b,A-=it.a,E=y+((E=f+Y)<X?E:X)*b<<2,P+=M+=it.r=p[E],k+=l+=it.g=p[E+1],N+=x+=it.b=p[E+2],G+=u+=it.a=p[E+3],it=it.next,g+=C=R.r,c+=F=R.g,d+=O=R.b,A+=D=R.a,M-=C,l-=F,x-=O,u-=D,R=R.next,_+=b}}const a=function(h){const v=Math.round(this.blurRadius());v>0&&s(h,v)};return Si.Blur=a,t.Factory.addGetterSetter(e.Node,"blurRadius",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Si}var wi={},oo;function Hc(){if(oo)return wi;oo=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Brighten=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=this.brightness()*255,s=n.data,a=s.length;for(let h=0;h<a;h+=4)s[h]+=r,s[h+1]+=r,s[h+2]+=r};return wi.Brighten=o,t.Factory.addGetterSetter(e.Node,"brightness",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),wi}var Ci={},ao;function jc(){if(ao)return Ci;ao=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Contrast=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=Math.pow((this.contrast()+100)/100,2),s=n.data,a=s.length;let h=150,v=150,p=150;for(let b=0;b<a;b+=4)h=s[b],v=s[b+1],p=s[b+2],h/=255,h-=.5,h*=r,h+=.5,h*=255,v/=255,v-=.5,v*=r,v+=.5,v*=255,p/=255,p-=.5,p*=r,p+=.5,p*=255,h=h<0?0:h>255?255:h,v=v<0?0:v>255?255:v,p=p<0?0:p>255?255:p,s[b]=h,s[b+1]=v,s[b+2]=p};return Ci.Contrast=o,t.Factory.addGetterSetter(e.Node,"contrast",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ci}var Pi={},lo;function Vc(){if(lo)return Pi;lo=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.Emboss=void 0;const t=pt(),e=Mt(),i=Tt(),o=mt(),n=function(r){const s=this.embossStrength()*10,a=this.embossWhiteLevel()*255,h=this.embossDirection(),v=this.embossBlend(),p=r.data,b=r.width,S=r.height,y=b*4;let f=0,T=0,E=S;switch(h){case"top-left":f=-1,T=-1;break;case"top":f=-1,T=0;break;case"top-right":f=-1,T=1;break;case"right":f=0,T=1;break;case"bottom-right":f=1,T=1;break;case"bottom":f=1,T=0;break;case"bottom-left":f=1,T=-1;break;case"left":f=0,T=-1;break;default:i.Util.error("Unknown emboss direction: "+h)}do{const w=(E-1)*y;let _=f;E+_<1&&(_=0),E+_>S&&(_=0);const m=(E-1+_)*b*4;let P=b;do{const k=w+(P-1)*4;let N=T;P+N<1&&(N=0),P+N>b&&(N=0);const G=m+(P-1+N)*4,g=p[k]-p[G],c=p[k+1]-p[G+1],d=p[k+2]-p[G+2];let A=g;const M=A>0?A:-A,l=c>0?c:-c,x=d>0?d:-d;if(l>M&&(A=c),x>M&&(A=d),A*=s,v){const u=p[k]+A,C=p[k+1]+A,F=p[k+2]+A;p[k]=u>255?255:u<0?0:u,p[k+1]=C>255?255:C<0?0:C,p[k+2]=F>255?255:F<0?0:F}else{let u=a-A;u<0?u=0:u>255&&(u=255),p[k]=p[k+1]=p[k+2]=u}}while(--P)}while(--E)};return Pi.Emboss=n,t.Factory.addGetterSetter(e.Node,"embossStrength",.5,(0,o.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,(0,o.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",void 0,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,void 0,t.Factory.afterSetFilter),Pi}var Ai={},ho;function Wc(){if(ho)return Ai;ho=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Enhance=void 0;const t=pt(),e=Mt(),i=mt();function o(r,s,a,h,v){const p=a-s,b=v-h;if(p===0)return h+b/2;if(b===0)return h;let S=(r-s)/p;return S=b*S+h,S}const n=function(r){const s=r.data,a=s.length;let h=s[0],v=h,p,b=s[1],S=b,y,f=s[2],T=f,E;const w=this.enhance();if(w===0)return;for(let A=0;A<a;A+=4)p=s[A+0],p<h?h=p:p>v&&(v=p),y=s[A+1],y<b?b=y:y>S&&(S=y),E=s[A+2],E<f?f=E:E>T&&(T=E);v===h&&(v=255,h=0),S===b&&(S=255,b=0),T===f&&(T=255,f=0);let _,m,P,k,N,G,g,c,d;w>0?(m=v+w*(255-v),P=h-w*(h-0),N=S+w*(255-S),G=b-w*(b-0),c=T+w*(255-T),d=f-w*(f-0)):(_=(v+h)*.5,m=v+w*(v-_),P=h+w*(h-_),k=(S+b)*.5,N=S+w*(S-k),G=b+w*(b-k),g=(T+f)*.5,c=T+w*(T-g),d=f+w*(f-g));for(let A=0;A<a;A+=4)s[A+0]=o(s[A+0],h,v,P,m),s[A+1]=o(s[A+1],b,S,G,N),s[A+2]=o(s[A+2],f,T,d,c)};return Ai.Enhance=n,t.Factory.addGetterSetter(e.Node,"enhance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ai}var Ti={},co;function zc(){if(co)return Ti;co=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Grayscale=void 0;const t=function(e){const i=e.data,o=i.length;for(let n=0;n<o;n+=4){const r=.34*i[n]+.5*i[n+1]+.16*i[n+2];i[n]=r,i[n+1]=r,i[n+2]=r}};return Ti.Grayscale=t,Ti}var Fi={},uo;function Kc(){if(uo)return Fi;uo=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.HSL=void 0;const t=pt(),e=Mt(),i=mt();t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter);const o=function(n){const r=n.data,s=r.length,a=1,h=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,p=this.luminance()*127,b=a*h*Math.cos(v*Math.PI/180),S=a*h*Math.sin(v*Math.PI/180),y=.299*a+.701*b+.167*S,f=.587*a-.587*b+.33*S,T=.114*a-.114*b-.497*S,E=.299*a-.299*b-.328*S,w=.587*a+.413*b+.035*S,_=.114*a-.114*b+.293*S,m=.299*a-.3*b+1.25*S,P=.587*a-.586*b-1.05*S,k=.114*a+.886*b-.2*S;let N,G,g,c;for(let d=0;d<s;d+=4)N=r[d+0],G=r[d+1],g=r[d+2],c=r[d+3],r[d+0]=y*N+f*G+T*g+p,r[d+1]=E*N+w*G+_*g+p,r[d+2]=m*N+P*G+k*g+p,r[d+3]=c};return Fi.HSL=o,Fi}var Mi={},fo;function $c(){if(fo)return Mi;fo=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.HSV=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=n.data,s=r.length,a=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,p=a*h*Math.cos(v*Math.PI/180),b=a*h*Math.sin(v*Math.PI/180),S=.299*a+.701*p+.167*b,y=.587*a-.587*p+.33*b,f=.114*a-.114*p-.497*b,T=.299*a-.299*p-.328*b,E=.587*a+.413*p+.035*b,w=.114*a-.114*p+.293*b,_=.299*a-.3*p+1.25*b,m=.587*a-.586*p-1.05*b,P=.114*a+.886*p-.2*b;let k,N,G,g;for(let c=0;c<s;c+=4)k=r[c+0],N=r[c+1],G=r[c+2],g=r[c+3],r[c+0]=S*k+y*N+f*G,r[c+1]=T*k+E*N+w*G,r[c+2]=_*k+m*N+P*G,r[c+3]=g};return Mi.HSV=o,t.Factory.addGetterSetter(e.Node,"hue",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Mi}var Ei={},go;function Xc(){if(go)return Ei;go=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.Invert=void 0;const t=function(e){const i=e.data,o=i.length;for(let n=0;n<o;n+=4)i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2]};return Ei.Invert=t,Ei}var ki={},po;function Yc(){if(po)return ki;po=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.Kaleidoscope=void 0;const t=pt(),e=Mt(),i=Tt(),o=mt(),n=function(a,h,v){const p=a.data,b=h.data,S=a.width,y=a.height,f=v.polarCenterX||S/2,T=v.polarCenterY||y/2;let E=Math.sqrt(f*f+T*T),w=S-f,_=y-T;const m=Math.sqrt(w*w+_*_);E=m>E?m:E;const P=y,k=S,N=360/k*Math.PI/180;for(let G=0;G<k;G+=1){const g=Math.sin(G*N),c=Math.cos(G*N);for(let d=0;d<P;d+=1){w=Math.floor(f+E*d/P*c),_=Math.floor(T+E*d/P*g);let A=(_*S+w)*4;const M=p[A+0],l=p[A+1],x=p[A+2],u=p[A+3];A=(G+d*S)*4,b[A+0]=M,b[A+1]=l,b[A+2]=x,b[A+3]=u}}},r=function(a,h,v){const p=a.data,b=h.data,S=a.width,y=a.height,f=v.polarCenterX||S/2,T=v.polarCenterY||y/2;let E=Math.sqrt(f*f+T*T),w=S-f,_=y-T;const m=Math.sqrt(w*w+_*_);E=m>E?m:E;const P=y,k=S,N=0;let G,g;for(w=0;w<S;w+=1)for(_=0;_<y;_+=1){const c=w-f,d=_-T,A=Math.sqrt(c*c+d*d)*P/E;let M=(Math.atan2(d,c)*180/Math.PI+360+N)%360;M=M*k/360,G=Math.floor(M),g=Math.floor(A);let l=(g*S+G)*4;const x=p[l+0],u=p[l+1],C=p[l+2],F=p[l+3];l=(_*S+w)*4,b[l+0]=x,b[l+1]=u,b[l+2]=C,b[l+3]=F}},s=function(a){const h=a.width,v=a.height;let p,b,S,y,f,T,E,w,_,m,P=Math.round(this.kaleidoscopePower());const k=Math.round(this.kaleidoscopeAngle()),N=Math.floor(h*(k%360)/360);if(P<1)return;const G=i.Util.createCanvasElement();G.width=h,G.height=v;const g=G.getContext("2d").getImageData(0,0,h,v);i.Util.releaseCanvas(G),n(a,g,{polarCenterX:h/2,polarCenterY:v/2});let c=h/Math.pow(2,P);for(;c<=8;)c=c*2,P-=1;c=Math.ceil(c);let d=c,A=0,M=d,l=1;for(N+c>h&&(A=d,M=0,l=-1),b=0;b<v;b+=1)for(p=A;p!==M;p+=l)S=Math.round(p+N)%h,_=(h*b+S)*4,f=g.data[_+0],T=g.data[_+1],E=g.data[_+2],w=g.data[_+3],m=(h*b+p)*4,g.data[m+0]=f,g.data[m+1]=T,g.data[m+2]=E,g.data[m+3]=w;for(b=0;b<v;b+=1)for(d=Math.floor(c),y=0;y<P;y+=1){for(p=0;p<d+1;p+=1)_=(h*b+p)*4,f=g.data[_+0],T=g.data[_+1],E=g.data[_+2],w=g.data[_+3],m=(h*b+d*2-p-1)*4,g.data[m+0]=f,g.data[m+1]=T,g.data[m+2]=E,g.data[m+3]=w;d*=2}r(g,a,{polarRotation:0})};return ki.Kaleidoscope=s,t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,(0,o.getNumberValidator)(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,(0,o.getNumberValidator)(),t.Factory.afterSetFilter),ki}var Oi={},mo;function qc(){if(mo)return Oi;mo=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Mask=void 0;const t=pt(),e=Mt(),i=mt();function o(S,y,f){let T=(f*S.width+y)*4;const E=[];return E.push(S.data[T++],S.data[T++],S.data[T++],S.data[T++]),E}function n(S,y){return Math.sqrt(Math.pow(S[0]-y[0],2)+Math.pow(S[1]-y[1],2)+Math.pow(S[2]-y[2],2))}function r(S){const y=[0,0,0];for(let f=0;f<S.length;f++)y[0]+=S[f][0],y[1]+=S[f][1],y[2]+=S[f][2];return y[0]/=S.length,y[1]/=S.length,y[2]/=S.length,y}function s(S,y){const f=o(S,0,0),T=o(S,S.width-1,0),E=o(S,0,S.height-1),w=o(S,S.width-1,S.height-1),_=y||10;if(n(f,T)<_&&n(T,w)<_&&n(w,E)<_&&n(E,f)<_){const m=r([T,f,w,E]),P=[];for(let k=0;k<S.width*S.height;k++){const N=n(m,[S.data[k*4],S.data[k*4+1],S.data[k*4+2]]);P[k]=N<_?0:255}return P}}function a(S,y){for(let f=0;f<S.width*S.height;f++)S.data[4*f+3]=y[f]}function h(S,y,f){const T=[1,1,1,1,0,1,1,1,1],E=Math.round(Math.sqrt(T.length)),w=Math.floor(E/2),_=[];for(let m=0;m<f;m++)for(let P=0;P<y;P++){const k=m*y+P;let N=0;for(let G=0;G<E;G++)for(let g=0;g<E;g++){const c=m+G-w,d=P+g-w;if(c>=0&&c<f&&d>=0&&d<y){const A=c*y+d,M=T[G*E+g];N+=S[A]*M}}_[k]=N===255*8?255:0}return _}function v(S,y,f){const T=[1,1,1,1,1,1,1,1,1],E=Math.round(Math.sqrt(T.length)),w=Math.floor(E/2),_=[];for(let m=0;m<f;m++)for(let P=0;P<y;P++){const k=m*y+P;let N=0;for(let G=0;G<E;G++)for(let g=0;g<E;g++){const c=m+G-w,d=P+g-w;if(c>=0&&c<f&&d>=0&&d<y){const A=c*y+d,M=T[G*E+g];N+=S[A]*M}}_[k]=N>=255*4?255:0}return _}function p(S,y,f){const T=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],E=Math.round(Math.sqrt(T.length)),w=Math.floor(E/2),_=[];for(let m=0;m<f;m++)for(let P=0;P<y;P++){const k=m*y+P;let N=0;for(let G=0;G<E;G++)for(let g=0;g<E;g++){const c=m+G-w,d=P+g-w;if(c>=0&&c<f&&d>=0&&d<y){const A=c*y+d,M=T[G*E+g];N+=S[A]*M}}_[k]=N}return _}const b=function(S){const y=this.threshold();let f=s(S,y);return f&&(f=h(f,S.width,S.height),f=v(f,S.width,S.height),f=p(f,S.width,S.height),a(S,f)),S};return Oi.Mask=b,t.Factory.addGetterSetter(e.Node,"threshold",0,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Oi}var Ni={},vo;function Qc(){if(vo)return Ni;vo=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Noise=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=this.noise()*255,s=n.data,a=s.length,h=r/2;for(let v=0;v<a;v+=4)s[v+0]+=h-2*h*Math.random(),s[v+1]+=h-2*h*Math.random(),s[v+2]+=h-2*h*Math.random()};return Ni.Noise=o,t.Factory.addGetterSetter(e.Node,"noise",.2,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Ni}var Ri={},_o;function Jc(){if(_o)return Ri;_o=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Pixelate=void 0;const t=pt(),e=Tt(),i=Mt(),o=mt(),n=function(r){let s=Math.ceil(this.pixelSize()),a=r.width,h=r.height,v,p,b,S,y,f,T,E=Math.ceil(a/s),w=Math.ceil(h/s),_,m,P,k,N,G,g,c=r.data;if(s<=0){e.Util.error("pixelSize value can not be <= 0");return}for(N=0;N<E;N+=1)for(G=0;G<w;G+=1){for(S=0,y=0,f=0,T=0,_=N*s,m=_+s,P=G*s,k=P+s,g=0,v=_;v<m;v+=1)if(!(v>=a))for(p=P;p<k;p+=1)p>=h||(b=(a*p+v)*4,S+=c[b+0],y+=c[b+1],f+=c[b+2],T+=c[b+3],g+=1);for(S=S/g,y=y/g,f=f/g,T=T/g,v=_;v<m;v+=1)if(!(v>=a))for(p=P;p<k;p+=1)p>=h||(b=(a*p+v)*4,c[b+0]=S,c[b+1]=y,c[b+2]=f,c[b+3]=T)}};return Ri.Pixelate=n,t.Factory.addGetterSetter(i.Node,"pixelSize",8,(0,o.getNumberValidator)(),t.Factory.afterSetFilter),Ri}var Di={},yo;function Zc(){if(yo)return Di;yo=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Posterize=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=Math.round(this.levels()*254)+1,s=n.data,a=s.length,h=255/r;for(let v=0;v<a;v+=1)s[v]=Math.floor(s[v]/h)*h};return Di.Posterize=o,t.Factory.addGetterSetter(e.Node,"levels",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Di}var Gi={},bo;function tu(){if(bo)return Gi;bo=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.RGB=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=n.data,s=r.length,a=this.red(),h=this.green(),v=this.blue();for(let p=0;p<s;p+=4){const b=(.34*r[p]+.5*r[p+1]+.16*r[p+2])/255;r[p]=b*a,r[p+1]=b*h,r[p+2]=b*v,r[p+3]=r[p+3]}};return Gi.RGB=o,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),Gi}var Ii={},xo;function eu(){if(xo)return Ii;xo=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.RGBA=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=n.data,s=r.length,a=this.red(),h=this.green(),v=this.blue(),p=this.alpha();for(let b=0;b<s;b+=4){const S=1-p;r[b]=a*p+r[b]*S,r[b+1]=h*p+r[b+1]*S,r[b+2]=v*p+r[b+2]*S}};return Ii.RGBA=o,t.Factory.addGetterSetter(e.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)}),t.Factory.addGetterSetter(e.Node,"blue",0,i.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n}),Ii}var Li={},So;function iu(){if(So)return Li;So=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Sepia=void 0;const t=function(e){const i=e.data,o=i.length;for(let n=0;n<o;n+=4){const r=i[n+0],s=i[n+1],a=i[n+2];i[n+0]=Math.min(255,r*.393+s*.769+a*.189),i[n+1]=Math.min(255,r*.349+s*.686+a*.168),i[n+2]=Math.min(255,r*.272+s*.534+a*.131)}};return Li.Sepia=t,Li}var Ui={},wo;function nu(){if(wo)return Ui;wo=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Solarize=void 0;const t=function(e){const i=e.data,o=e.width,n=e.height,r=o*4;let s=n;do{const a=(s-1)*r;let h=o;do{const v=a+(h-1)*4;let p=i[v],b=i[v+1],S=i[v+2];p>127&&(p=255-p),b>127&&(b=255-b),S>127&&(S=255-S),i[v]=p,i[v+1]=b,i[v+2]=S}while(--h)}while(--s)};return Ui.Solarize=t,Ui}var Bi={},Co;function ru(){if(Co)return Bi;Co=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Threshold=void 0;const t=pt(),e=Mt(),i=mt(),o=function(n){const r=this.threshold()*255,s=n.data,a=s.length;for(let h=0;h<a;h+=1)s[h]=s[h]<r?0:255};return Bi.Threshold=o,t.Factory.addGetterSetter(e.Node,"threshold",.5,(0,i.getNumberValidator)(),t.Factory.afterSetFilter),Bi}var Po;function su(){if(Po)return ti;Po=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.Konva=void 0;const t=Pc(),e=Ac(),i=Fc(),o=Mc(),n=Ec(),r=kc(),s=Oc(),a=Ga(),h=Dr(),v=La(),p=Nc(),b=Rc(),S=Dc(),y=Gc(),f=Ua(),T=Ic(),E=Lc(),w=Uc(),_=Bc(),m=Hc(),P=jc(),k=Vc(),N=Wc(),G=zc(),g=Kc(),c=$c(),d=Xc(),A=Yc(),M=qc(),l=Qc(),x=Jc(),u=Zc(),C=tu(),F=eu(),O=iu(),D=nu(),U=ru();return ti.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:i.Arrow,Circle:o.Circle,Ellipse:n.Ellipse,Image:r.Image,Label:s.Label,Tag:s.Tag,Line:a.Line,Path:h.Path,Rect:v.Rect,RegularPolygon:p.RegularPolygon,Ring:b.Ring,Sprite:S.Sprite,Star:y.Star,Text:f.Text,TextPath:T.TextPath,Transformer:E.Transformer,Wedge:w.Wedge,Filters:{Blur:_.Blur,Brighten:m.Brighten,Contrast:P.Contrast,Emboss:k.Emboss,Enhance:N.Enhance,Grayscale:G.Grayscale,HSL:g.HSL,HSV:c.HSV,Invert:d.Invert,Kaleidoscope:A.Kaleidoscope,Mask:M.Mask,Noise:l.Noise,Pixelate:x.Pixelate,Posterize:u.Posterize,RGB:C.RGB,RGBA:F.RGBA,Sepia:O.Sepia,Solarize:D.Solarize,Threshold:U.Threshold}}),ti}var ou=mn.exports,Ao;function au(){if(Ao)return mn.exports;Ao=1,Object.defineProperty(ou,"__esModule",{value:!0});const t=su();return mn.exports=t.Konva,mn.exports}var lu=au();const St=xc(lu);function Cn(t){if(!St.autoDrawEnabled){const e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const To={key:!0,style:!0,elm:!0,isRootInsert:!0},Yn=".vue-konva-event";function Ba(t,e,i,o){const n=t.__konvaNode,r={};let s=!1;for(let a in i){if(To.hasOwnProperty(a))continue;const h=a.slice(0,2)==="on",v=i[a]!==e[a];if(h&&v){let p=a.slice(2).toLowerCase();p.slice(0,7)==="content"&&(p="content"+p.slice(7,1).toUpperCase()+p.slice(8)),n==null||n.off(p+Yn,i[a])}!e.hasOwnProperty(a)&&(n==null||n.setAttr(a,void 0))}for(let a in e){if(To.hasOwnProperty(a))continue;let h=a.slice(0,2)==="on";const v=i[a]!==e[a];if(h&&v){let p=a.slice(2).toLowerCase();p.slice(0,7)==="content"&&(p="content"+p.slice(7,1).toUpperCase()+p.slice(8)),e[a]&&(n==null||n.off(p+Yn),n==null||n.on(p+Yn,e[a]))}!h&&(e[a]!==i[a]||o&&e[a]!==(n==null?void 0:n.getAttr(a)))&&(s=!0,r[a]=e[a])}s&&n&&(n.setAttrs(r),Cn(n))}const hu="v";function cu(t){function e(i){return i!=null&&i.__konvaNode?i:i!=null&&i.parent?e(i.parent):(console.error("vue-konva error: Can not find parent node"),null)}return e(t.parent)}function Ha(t){return t.component?t.component.__konvaNode||Ha(t.component.subTree):null}function uu(t){const{el:e,component:i}=t,o=Ha(t);if(e!=null&&e.tagName&&i&&!o){const n=e.tagName.toLowerCase();return console.error(`vue-konva error: You are trying to render "${n}" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.`),null}return o}function du(t){const e=n=>!!(n!=null&&n.hasOwnProperty("component")),i=n=>Array.isArray(n),o=n=>e(n)?[n,...o(n.children)]:i(n)?n.flatMap(o):[];return o(t.children)}function ja(t,e){const i=du(t),o=[];i.forEach(r=>{const s=uu(r);s&&o.push(s)});let n=!1;o.forEach((r,s)=>{r.getZIndex()!==s&&(r.setZIndex(s),n=!0)}),n&&Cn(e)}const fu=On({name:"Stage",props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup(t,{attrs:e,slots:i,expose:o}){const n=Fa();if(!n)return;const r=en({}),s=Xt(null),a=new St.Stage({width:t.config.width,height:t.config.height,container:document.createElement("div")});n.__konvaNode=a,p();function h(){return n==null?void 0:n.__konvaNode}function v(){return n==null?void 0:n.__konvaNode}function p(){if(!n)return;const b=r||{},S={...e,...t.config};Ba(n,S,b,t.__useStrictMode),Object.assign(r,S)}return Rn(()=>{s.value&&(s.value.innerHTML="",a.container(s.value)),p()}),Tr(()=>{p(),ja(n.subTree,a)}),oa(()=>{a.destroy()}),Xi(()=>t.config,p,{deep:!0}),o({getStage:v,getNode:h}),console.log(e),()=>{var b;return ka("div",{ref:s,style:e==null?void 0:e.style},(b=i.default)==null?void 0:b.call(i))}}}),gu=".vue-konva-event",pu={Group:!0,Layer:!0,FastLayer:!0,Label:!0};function mu(t,e){return On({name:t,props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup(i,{attrs:o,slots:n,expose:r}){const s=Fa();if(!s)return;const a=en({}),h=new e;s.__konvaNode=h,s.vnode.__konvaNode=h,b();function v(){return s==null?void 0:s.__konvaNode}function p(){return s==null?void 0:s.__konvaNode}function b(){if(!s)return;const y={};for(const E in s==null?void 0:s.vnode.props)E.slice(0,2)==="on"&&(y[E]=s.vnode.props[E]);const f=a||{},T={...o,...i.config,...y};Ba(s,T,f,i.__useStrictMode),Object.assign(a,T)}Rn(()=>{var y;const f=(y=cu(s))==null?void 0:y.__konvaNode;f&&"add"in f&&f.add(h),Cn(h)}),Fr(()=>{Cn(h),h.destroy(),h.off(gu)}),Tr(()=>{b(),ja(s.subTree,h)}),Xi(()=>i.config,b,{deep:!0}),r({getStage:p,getNode:v});const S=pu.hasOwnProperty(t);return()=>{var y;return S?ka("template",{},(y=n.default)==null?void 0:y.call(n)):null}}})}typeof window<"u"&&!window.Konva&&require("konva");const vu={install:(t,e)=>{const i=(e==null?void 0:e.prefix)||hu,o={Arc:St.Arc,Arrow:St.Arrow,Circle:St.Circle,Ellipse:St.Ellipse,FastLayer:St.FastLayer,Group:St.Group,Image:St.Image,Label:St.Label,Layer:St.Layer,Line:St.Line,Path:St.Path,Rect:St.Rect,RegularPolygon:St.RegularPolygon,Ring:St.Ring,Shape:St.Shape,Sprite:St.Sprite,Star:St.Star,Tag:St.Tag,Text:St.Text,TextPath:St.TextPath,Transformer:St.Transformer,Wedge:St.Wedge,...e==null?void 0:e.customNodes};[fu,...Object.entries(o).map(([n,r])=>mu(n,r))].forEach(n=>{t.component(`${i}${n.name}`,n)})}};var _u=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,qn=Math.ceil,Jt=Math.floor,zt="[BigNumber Error] ",Fo=zt+"Number primitive has more than 15 significant digits: ",ne=1e14,ht=14,Qn=9007199254740991,Jn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],we=1e7,Ot=1e9;function Va(t){var e,i,o,n=_.prototype={constructor:_,toString:null,valueOf:null},r=new _(1),s=20,a=4,h=-7,v=21,p=-1e7,b=1e7,S=!1,y=1,f=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},E="0123456789abcdefghijklmnopqrstuvwxyz",w=!0;function _(g,c){var d,A,M,l,x,u,C,F,O=this;if(!(O instanceof _))return new _(g,c);if(c==null){if(g&&g._isBigNumber===!0){O.s=g.s,!g.c||g.e>b?O.c=O.e=null:g.e<p?O.c=[O.e=0]:(O.e=g.e,O.c=g.c.slice());return}if((u=typeof g=="number")&&g*0==0){if(O.s=1/g<0?(g=-g,-1):1,g===~~g){for(l=0,x=g;x>=10;x/=10,l++);l>b?O.c=O.e=null:(O.e=l,O.c=[g]);return}F=String(g)}else{if(!_u.test(F=String(g)))return o(O,F,u);O.s=F.charCodeAt(0)==45?(F=F.slice(1),-1):1}(l=F.indexOf("."))>-1&&(F=F.replace(".","")),(x=F.search(/e/i))>0?(l<0&&(l=x),l+=+F.slice(x+1),F=F.substring(0,x)):l<0&&(l=F.length)}else{if(Ct(c,2,E.length,"Base"),c==10&&w)return O=new _(g),N(O,s+O.e+1,a);if(F=String(g),u=typeof g=="number"){if(g*0!=0)return o(O,F,u,c);if(O.s=1/g<0?(F=F.slice(1),-1):1,_.DEBUG&&F.replace(/^0\.0*|\./,"").length>15)throw Error(Fo+g)}else O.s=F.charCodeAt(0)===45?(F=F.slice(1),-1):1;for(d=E.slice(0,c),l=x=0,C=F.length;x<C;x++)if(d.indexOf(A=F.charAt(x))<0){if(A=="."){if(x>l){l=C;continue}}else if(!M&&(F==F.toUpperCase()&&(F=F.toLowerCase())||F==F.toLowerCase()&&(F=F.toUpperCase()))){M=!0,x=-1,l=0;continue}return o(O,String(g),u,c)}u=!1,F=i(F,c,10,O.s),(l=F.indexOf("."))>-1?F=F.replace(".",""):l=F.length}for(x=0;F.charCodeAt(x)===48;x++);for(C=F.length;F.charCodeAt(--C)===48;);if(F=F.slice(x,++C)){if(C-=x,u&&_.DEBUG&&C>15&&(g>Qn||g!==Jt(g)))throw Error(Fo+O.s*g);if((l=l-x-1)>b)O.c=O.e=null;else if(l<p)O.c=[O.e=0];else{if(O.e=l,O.c=[],x=(l+1)%ht,l<0&&(x+=ht),x<C){for(x&&O.c.push(+F.slice(0,x)),C-=ht;x<C;)O.c.push(+F.slice(x,x+=ht));x=ht-(F=F.slice(x)).length}else x-=C;for(;x--;F+="0");O.c.push(+F)}}else O.c=[O.e=0]}_.clone=Va,_.ROUND_UP=0,_.ROUND_DOWN=1,_.ROUND_CEIL=2,_.ROUND_FLOOR=3,_.ROUND_HALF_UP=4,_.ROUND_HALF_DOWN=5,_.ROUND_HALF_EVEN=6,_.ROUND_HALF_CEIL=7,_.ROUND_HALF_FLOOR=8,_.EUCLID=9,_.config=_.set=function(g){var c,d;if(g!=null)if(typeof g=="object"){if(g.hasOwnProperty(c="DECIMAL_PLACES")&&(d=g[c],Ct(d,0,Ot,c),s=d),g.hasOwnProperty(c="ROUNDING_MODE")&&(d=g[c],Ct(d,0,8,c),a=d),g.hasOwnProperty(c="EXPONENTIAL_AT")&&(d=g[c],d&&d.pop?(Ct(d[0],-Ot,0,c),Ct(d[1],0,Ot,c),h=d[0],v=d[1]):(Ct(d,-Ot,Ot,c),h=-(v=d<0?-d:d))),g.hasOwnProperty(c="RANGE"))if(d=g[c],d&&d.pop)Ct(d[0],-Ot,-1,c),Ct(d[1],1,Ot,c),p=d[0],b=d[1];else if(Ct(d,-Ot,Ot,c),d)p=-(b=d<0?-d:d);else throw Error(zt+c+" cannot be zero: "+d);if(g.hasOwnProperty(c="CRYPTO"))if(d=g[c],d===!!d)if(d)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=d;else throw S=!d,Error(zt+"crypto unavailable");else S=d;else throw Error(zt+c+" not true or false: "+d);if(g.hasOwnProperty(c="MODULO_MODE")&&(d=g[c],Ct(d,0,9,c),y=d),g.hasOwnProperty(c="POW_PRECISION")&&(d=g[c],Ct(d,0,Ot,c),f=d),g.hasOwnProperty(c="FORMAT"))if(d=g[c],typeof d=="object")T=d;else throw Error(zt+c+" not an object: "+d);if(g.hasOwnProperty(c="ALPHABET"))if(d=g[c],typeof d=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(d))w=d.slice(0,10)=="0123456789",E=d;else throw Error(zt+c+" invalid: "+d)}else throw Error(zt+"Object expected: "+g);return{DECIMAL_PLACES:s,ROUNDING_MODE:a,EXPONENTIAL_AT:[h,v],RANGE:[p,b],CRYPTO:S,MODULO_MODE:y,POW_PRECISION:f,FORMAT:T,ALPHABET:E}},_.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!_.DEBUG)return!0;var c,d,A=g.c,M=g.e,l=g.s;t:if({}.toString.call(A)=="[object Array]"){if((l===1||l===-1)&&M>=-Ot&&M<=Ot&&M===Jt(M)){if(A[0]===0){if(M===0&&A.length===1)return!0;break t}if(c=(M+1)%ht,c<1&&(c+=ht),String(A[0]).length==c){for(c=0;c<A.length;c++)if(d=A[c],d<0||d>=ne||d!==Jt(d))break t;if(d!==0)return!0}}}else if(A===null&&M===null&&(l===null||l===1||l===-1))return!0;throw Error(zt+"Invalid BigNumber: "+g)},_.maximum=_.max=function(){return P(arguments,-1)},_.minimum=_.min=function(){return P(arguments,1)},_.random=function(){var g=9007199254740992,c=Math.random()*g&2097151?function(){return Jt(Math.random()*g)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(d){var A,M,l,x,u,C=0,F=[],O=new _(r);if(d==null?d=s:Ct(d,0,Ot),x=qn(d/ht),S)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(x*=2));C<x;)u=A[C]*131072+(A[C+1]>>>11),u>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),A[C]=M[0],A[C+1]=M[1]):(F.push(u%1e14),C+=2);C=x/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(x*=7);C<x;)u=(A[C]&31)*281474976710656+A[C+1]*1099511627776+A[C+2]*4294967296+A[C+3]*16777216+(A[C+4]<<16)+(A[C+5]<<8)+A[C+6],u>=9e15?crypto.randomBytes(7).copy(A,C):(F.push(u%1e14),C+=7);C=x/7}else throw S=!1,Error(zt+"crypto unavailable");if(!S)for(;C<x;)u=c(),u<9e15&&(F[C++]=u%1e14);for(x=F[--C],d%=ht,x&&d&&(u=Jn[ht-d],F[C]=Jt(x/u)*u);F[C]===0;F.pop(),C--);if(C<0)F=[l=0];else{for(l=-1;F[0]===0;F.splice(0,1),l-=ht);for(C=1,u=F[0];u>=10;u/=10,C++);C<ht&&(l-=ht-C)}return O.e=l,O.c=F,O}}(),_.sum=function(){for(var g=1,c=arguments,d=new _(c[0]);g<c.length;)d=d.plus(c[g++]);return d},i=function(){var g="0123456789";function c(d,A,M,l){for(var x,u=[0],C,F=0,O=d.length;F<O;){for(C=u.length;C--;u[C]*=A);for(u[0]+=l.indexOf(d.charAt(F++)),x=0;x<u.length;x++)u[x]>M-1&&(u[x+1]==null&&(u[x+1]=0),u[x+1]+=u[x]/M|0,u[x]%=M)}return u.reverse()}return function(d,A,M,l,x){var u,C,F,O,D,U,B,j,X=d.indexOf("."),Y=s,q=a;for(X>=0&&(O=f,f=0,d=d.replace(".",""),j=new _(A),U=j.pow(d.length-X),f=O,j.c=c(me(Qt(U.c),U.e,"0"),10,M,g),j.e=j.c.length),B=c(d,A,M,x?(u=E,g):(u=g,E)),F=O=B.length;B[--O]==0;B.pop());if(!B[0])return u.charAt(0);if(X<0?--F:(U.c=B,U.e=F,U.s=l,U=e(U,j,Y,q,M),B=U.c,D=U.r,F=U.e),C=F+Y+1,X=B[C],O=M/2,D=D||C<0||B[C+1]!=null,D=q<4?(X!=null||D)&&(q==0||q==(U.s<0?3:2)):X>O||X==O&&(q==4||D||q==6&&B[C-1]&1||q==(U.s<0?8:7)),C<1||!B[0])d=D?me(u.charAt(1),-Y,u.charAt(0)):u.charAt(0);else{if(B.length=C,D)for(--M;++B[--C]>M;)B[C]=0,C||(++F,B=[1].concat(B));for(O=B.length;!B[--O];);for(X=0,d="";X<=O;d+=u.charAt(B[X++]));d=me(d,F,u.charAt(0))}return d}}(),e=function(){function g(A,M,l){var x,u,C,F,O=0,D=A.length,U=M%we,B=M/we|0;for(A=A.slice();D--;)C=A[D]%we,F=A[D]/we|0,x=B*C+F*U,u=U*C+x%we*we+O,O=(u/l|0)+(x/we|0)+B*F,A[D]=u%l;return O&&(A=[O].concat(A)),A}function c(A,M,l,x){var u,C;if(l!=x)C=l>x?1:-1;else for(u=C=0;u<l;u++)if(A[u]!=M[u]){C=A[u]>M[u]?1:-1;break}return C}function d(A,M,l,x){for(var u=0;l--;)A[l]-=u,u=A[l]<M[l]?1:0,A[l]=u*x+A[l]-M[l];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,M,l,x,u){var C,F,O,D,U,B,j,X,Y,q,J,I,W,Q,Z,it,R,L=A.s==M.s?1:-1,H=A.c,V=M.c;if(!H||!H[0]||!V||!V[0])return new _(!A.s||!M.s||(H?V&&H[0]==V[0]:!V)?NaN:H&&H[0]==0||!V?L*0:L/0);for(X=new _(L),Y=X.c=[],F=A.e-M.e,L=l+F+1,u||(u=ne,F=Zt(A.e/ht)-Zt(M.e/ht),L=L/ht|0),O=0;V[O]==(H[O]||0);O++);if(V[O]>(H[O]||0)&&F--,L<0)Y.push(1),D=!0;else{for(Q=H.length,it=V.length,O=0,L+=2,U=Jt(u/(V[0]+1)),U>1&&(V=g(V,U,u),H=g(H,U,u),it=V.length,Q=H.length),W=it,q=H.slice(0,it),J=q.length;J<it;q[J++]=0);R=V.slice(),R=[0].concat(R),Z=V[0],V[1]>=u/2&&Z++;do{if(U=0,C=c(V,q,it,J),C<0){if(I=q[0],it!=J&&(I=I*u+(q[1]||0)),U=Jt(I/Z),U>1)for(U>=u&&(U=u-1),B=g(V,U,u),j=B.length,J=q.length;c(B,q,j,J)==1;)U--,d(B,it<j?R:V,j,u),j=B.length,C=1;else U==0&&(C=U=1),B=V.slice(),j=B.length;if(j<J&&(B=[0].concat(B)),d(q,B,J,u),J=q.length,C==-1)for(;c(V,q,it,J)<1;)U++,d(q,it<J?R:V,J,u),J=q.length}else C===0&&(U++,q=[0]);Y[O++]=U,q[0]?q[J++]=H[W]||0:(q=[H[W]],J=1)}while((W++<Q||q[0]!=null)&&L--);D=q[0]!=null,Y[0]||Y.splice(0,1)}if(u==ne){for(O=1,L=Y[0];L>=10;L/=10,O++);N(X,l+(X.e=O+F*ht-1)+1,x,D)}else X.e=F,X.r=+D;return X}}();function m(g,c,d,A){var M,l,x,u,C;if(d==null?d=a:Ct(d,0,8),!g.c)return g.toString();if(M=g.c[0],x=g.e,c==null)C=Qt(g.c),C=A==1||A==2&&(x<=h||x>=v)?cn(C,x):me(C,x,"0");else if(g=N(new _(g),c,d),l=g.e,C=Qt(g.c),u=C.length,A==1||A==2&&(c<=l||l<=h)){for(;u<c;C+="0",u++);C=cn(C,l)}else if(c-=x,C=me(C,l,"0"),l+1>u){if(--c>0)for(C+=".";c--;C+="0");}else if(c+=l-u,c>0)for(l+1==u&&(C+=".");c--;C+="0");return g.s<0&&M?"-"+C:C}function P(g,c){for(var d,A,M=1,l=new _(g[0]);M<g.length;M++)A=new _(g[M]),(!A.s||(d=De(l,A))===c||d===0&&l.s===c)&&(l=A);return l}function k(g,c,d){for(var A=1,M=c.length;!c[--M];c.pop());for(M=c[0];M>=10;M/=10,A++);return(d=A+d*ht-1)>b?g.c=g.e=null:d<p?g.c=[g.e=0]:(g.e=d,g.c=c),g}o=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,d=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,x,u,C){var F,O=u?x:x.replace(M,"");if(A.test(O))l.s=isNaN(O)?null:O<0?-1:1;else{if(!u&&(O=O.replace(g,function(D,U,B){return F=(B=B.toLowerCase())=="x"?16:B=="b"?2:8,!C||C==F?U:D}),C&&(F=C,O=O.replace(c,"$1").replace(d,"0.$1")),x!=O))return new _(O,F);if(_.DEBUG)throw Error(zt+"Not a"+(C?" base "+C:"")+" number: "+x);l.s=null}l.c=l.e=null}}();function N(g,c,d,A){var M,l,x,u,C,F,O,D=g.c,U=Jn;if(D){t:{for(M=1,u=D[0];u>=10;u/=10,M++);if(l=c-M,l<0)l+=ht,x=c,C=D[F=0],O=Jt(C/U[M-x-1]%10);else if(F=qn((l+1)/ht),F>=D.length)if(A){for(;D.length<=F;D.push(0));C=O=0,M=1,l%=ht,x=l-ht+1}else break t;else{for(C=u=D[F],M=1;u>=10;u/=10,M++);l%=ht,x=l-ht+M,O=x<0?0:Jt(C/U[M-x-1]%10)}if(A=A||c<0||D[F+1]!=null||(x<0?C:C%U[M-x-1]),A=d<4?(O||A)&&(d==0||d==(g.s<0?3:2)):O>5||O==5&&(d==4||A||d==6&&(l>0?x>0?C/U[M-x]:0:D[F-1])%10&1||d==(g.s<0?8:7)),c<1||!D[0])return D.length=0,A?(c-=g.e+1,D[0]=U[(ht-c%ht)%ht],g.e=-c||0):D[0]=g.e=0,g;if(l==0?(D.length=F,u=1,F--):(D.length=F+1,u=U[ht-l],D[F]=x>0?Jt(C/U[M-x]%U[x])*u:0),A)for(;;)if(F==0){for(l=1,x=D[0];x>=10;x/=10,l++);for(x=D[0]+=u,u=1;x>=10;x/=10,u++);l!=u&&(g.e++,D[0]==ne&&(D[0]=1));break}else{if(D[F]+=u,D[F]!=ne)break;D[F--]=0,u=1}for(l=D.length;D[--l]===0;D.pop());}g.e>b?g.c=g.e=null:g.e<p&&(g.c=[g.e=0])}return g}function G(g){var c,d=g.e;return d===null?g.toString():(c=Qt(g.c),c=d<=h||d>=v?cn(c,d):me(c,d,"0"),g.s<0?"-"+c:c)}return n.absoluteValue=n.abs=function(){var g=new _(this);return g.s<0&&(g.s=1),g},n.comparedTo=function(g,c){return De(this,new _(g,c))},n.decimalPlaces=n.dp=function(g,c){var d,A,M,l=this;if(g!=null)return Ct(g,0,Ot),c==null?c=a:Ct(c,0,8),N(new _(l),g+l.e+1,c);if(!(d=l.c))return null;if(A=((M=d.length-1)-Zt(this.e/ht))*ht,M=d[M])for(;M%10==0;M/=10,A--);return A<0&&(A=0),A},n.dividedBy=n.div=function(g,c){return e(this,new _(g,c),s,a)},n.dividedToIntegerBy=n.idiv=function(g,c){return e(this,new _(g,c),0,1)},n.exponentiatedBy=n.pow=function(g,c){var d,A,M,l,x,u,C,F,O,D=this;if(g=new _(g),g.c&&!g.isInteger())throw Error(zt+"Exponent not an integer: "+G(g));if(c!=null&&(c=new _(c)),u=g.e>14,!D.c||!D.c[0]||D.c[0]==1&&!D.e&&D.c.length==1||!g.c||!g.c[0])return O=new _(Math.pow(+G(D),u?g.s*(2-hn(g)):+G(g))),c?O.mod(c):O;if(C=g.s<0,c){if(c.c?!c.c[0]:!c.s)return new _(NaN);A=!C&&D.isInteger()&&c.isInteger(),A&&(D=D.mod(c))}else{if(g.e>9&&(D.e>0||D.e<-1||(D.e==0?D.c[0]>1||u&&D.c[1]>=24e7:D.c[0]<8e13||u&&D.c[0]<=9999975e7)))return l=D.s<0&&hn(g)?-0:0,D.e>-1&&(l=1/l),new _(C?1/l:l);f&&(l=qn(f/ht+2))}for(u?(d=new _(.5),C&&(g.s=1),F=hn(g)):(M=Math.abs(+G(g)),F=M%2),O=new _(r);;){if(F){if(O=O.times(D),!O.c)break;l?O.c.length>l&&(O.c.length=l):A&&(O=O.mod(c))}if(M){if(M=Jt(M/2),M===0)break;F=M%2}else if(g=g.times(d),N(g,g.e+1,1),g.e>14)F=hn(g);else{if(M=+G(g),M===0)break;F=M%2}D=D.times(D),l?D.c&&D.c.length>l&&(D.c.length=l):A&&(D=D.mod(c))}return A?O:(C&&(O=r.div(O)),c?O.mod(c):l?N(O,f,a,x):O)},n.integerValue=function(g){var c=new _(this);return g==null?g=a:Ct(g,0,8),N(c,c.e+1,g)},n.isEqualTo=n.eq=function(g,c){return De(this,new _(g,c))===0},n.isFinite=function(){return!!this.c},n.isGreaterThan=n.gt=function(g,c){return De(this,new _(g,c))>0},n.isGreaterThanOrEqualTo=n.gte=function(g,c){return(c=De(this,new _(g,c)))===1||c===0},n.isInteger=function(){return!!this.c&&Zt(this.e/ht)>this.c.length-2},n.isLessThan=n.lt=function(g,c){return De(this,new _(g,c))<0},n.isLessThanOrEqualTo=n.lte=function(g,c){return(c=De(this,new _(g,c)))===-1||c===0},n.isNaN=function(){return!this.s},n.isNegative=function(){return this.s<0},n.isPositive=function(){return this.s>0},n.isZero=function(){return!!this.c&&this.c[0]==0},n.minus=function(g,c){var d,A,M,l,x=this,u=x.s;if(g=new _(g,c),c=g.s,!u||!c)return new _(NaN);if(u!=c)return g.s=-c,x.plus(g);var C=x.e/ht,F=g.e/ht,O=x.c,D=g.c;if(!C||!F){if(!O||!D)return O?(g.s=-c,g):new _(D?x:NaN);if(!O[0]||!D[0])return D[0]?(g.s=-c,g):new _(O[0]?x:a==3?-0:0)}if(C=Zt(C),F=Zt(F),O=O.slice(),u=C-F){for((l=u<0)?(u=-u,M=O):(F=C,M=D),M.reverse(),c=u;c--;M.push(0));M.reverse()}else for(A=(l=(u=O.length)<(c=D.length))?u:c,u=c=0;c<A;c++)if(O[c]!=D[c]){l=O[c]<D[c];break}if(l&&(M=O,O=D,D=M,g.s=-g.s),c=(A=D.length)-(d=O.length),c>0)for(;c--;O[d++]=0);for(c=ne-1;A>u;){if(O[--A]<D[A]){for(d=A;d&&!O[--d];O[d]=c);--O[d],O[A]+=ne}O[A]-=D[A]}for(;O[0]==0;O.splice(0,1),--F);return O[0]?k(g,O,F):(g.s=a==3?-1:1,g.c=[g.e=0],g)},n.modulo=n.mod=function(g,c){var d,A,M=this;return g=new _(g,c),!M.c||!g.s||g.c&&!g.c[0]?new _(NaN):!g.c||M.c&&!M.c[0]?new _(M):(y==9?(A=g.s,g.s=1,d=e(M,g,0,3),g.s=A,d.s*=A):d=e(M,g,0,y),g=M.minus(d.times(g)),!g.c[0]&&y==1&&(g.s=M.s),g)},n.multipliedBy=n.times=function(g,c){var d,A,M,l,x,u,C,F,O,D,U,B,j,X,Y,q=this,J=q.c,I=(g=new _(g,c)).c;if(!J||!I||!J[0]||!I[0])return!q.s||!g.s||J&&!J[0]&&!I||I&&!I[0]&&!J?g.c=g.e=g.s=null:(g.s*=q.s,!J||!I?g.c=g.e=null:(g.c=[0],g.e=0)),g;for(A=Zt(q.e/ht)+Zt(g.e/ht),g.s*=q.s,C=J.length,D=I.length,C<D&&(j=J,J=I,I=j,M=C,C=D,D=M),M=C+D,j=[];M--;j.push(0));for(X=ne,Y=we,M=D;--M>=0;){for(d=0,U=I[M]%Y,B=I[M]/Y|0,x=C,l=M+x;l>M;)F=J[--x]%Y,O=J[x]/Y|0,u=B*F+O*U,F=U*F+u%Y*Y+j[l]+d,d=(F/X|0)+(u/Y|0)+B*O,j[l--]=F%X;j[l]=d}return d?++A:j.splice(0,1),k(g,j,A)},n.negated=function(){var g=new _(this);return g.s=-g.s||null,g},n.plus=function(g,c){var d,A=this,M=A.s;if(g=new _(g,c),c=g.s,!M||!c)return new _(NaN);if(M!=c)return g.s=-c,A.minus(g);var l=A.e/ht,x=g.e/ht,u=A.c,C=g.c;if(!l||!x){if(!u||!C)return new _(M/0);if(!u[0]||!C[0])return C[0]?g:new _(u[0]?A:M*0)}if(l=Zt(l),x=Zt(x),u=u.slice(),M=l-x){for(M>0?(x=l,d=C):(M=-M,d=u),d.reverse();M--;d.push(0));d.reverse()}for(M=u.length,c=C.length,M-c<0&&(d=C,C=u,u=d,c=M),M=0;c;)M=(u[--c]=u[c]+C[c]+M)/ne|0,u[c]=ne===u[c]?0:u[c]%ne;return M&&(u=[M].concat(u),++x),k(g,u,x)},n.precision=n.sd=function(g,c){var d,A,M,l=this;if(g!=null&&g!==!!g)return Ct(g,1,Ot),c==null?c=a:Ct(c,0,8),N(new _(l),g,c);if(!(d=l.c))return null;if(M=d.length-1,A=M*ht+1,M=d[M]){for(;M%10==0;M/=10,A--);for(M=d[0];M>=10;M/=10,A++);}return g&&l.e+1>A&&(A=l.e+1),A},n.shiftedBy=function(g){return Ct(g,-Qn,Qn),this.times("1e"+g)},n.squareRoot=n.sqrt=function(){var g,c,d,A,M,l=this,x=l.c,u=l.s,C=l.e,F=s+4,O=new _("0.5");if(u!==1||!x||!x[0])return new _(!u||u<0&&(!x||x[0])?NaN:x?l:1/0);if(u=Math.sqrt(+G(l)),u==0||u==1/0?(c=Qt(x),(c.length+C)%2==0&&(c+="0"),u=Math.sqrt(+c),C=Zt((C+1)/2)-(C<0||C%2),u==1/0?c="5e"+C:(c=u.toExponential(),c=c.slice(0,c.indexOf("e")+1)+C),d=new _(c)):d=new _(u+""),d.c[0]){for(C=d.e,u=C+F,u<3&&(u=0);;)if(M=d,d=O.times(M.plus(e(l,M,F,1))),Qt(M.c).slice(0,u)===(c=Qt(d.c)).slice(0,u))if(d.e<C&&--u,c=c.slice(u-3,u+1),c=="9999"||!A&&c=="4999"){if(!A&&(N(M,M.e+s+2,0),M.times(M).eq(l))){d=M;break}F+=4,u+=4,A=1}else{(!+c||!+c.slice(1)&&c.charAt(0)=="5")&&(N(d,d.e+s+2,1),g=!d.times(d).eq(l));break}}return N(d,d.e+s+1,a,g)},n.toExponential=function(g,c){return g!=null&&(Ct(g,0,Ot),g++),m(this,g,c,1)},n.toFixed=function(g,c){return g!=null&&(Ct(g,0,Ot),g=g+this.e+1),m(this,g,c)},n.toFormat=function(g,c,d){var A,M=this;if(d==null)g!=null&&c&&typeof c=="object"?(d=c,c=null):g&&typeof g=="object"?(d=g,g=c=null):d=T;else if(typeof d!="object")throw Error(zt+"Argument not an object: "+d);if(A=M.toFixed(g,c),M.c){var l,x=A.split("."),u=+d.groupSize,C=+d.secondaryGroupSize,F=d.groupSeparator||"",O=x[0],D=x[1],U=M.s<0,B=U?O.slice(1):O,j=B.length;if(C&&(l=u,u=C,C=l,j-=l),u>0&&j>0){for(l=j%u||u,O=B.substr(0,l);l<j;l+=u)O+=F+B.substr(l,u);C>0&&(O+=F+B.slice(l)),U&&(O="-"+O)}A=D?O+(d.decimalSeparator||"")+((C=+d.fractionGroupSize)?D.replace(new RegExp("\\d{"+C+"}\\B","g"),"$&"+(d.fractionGroupSeparator||"")):D):O}return(d.prefix||"")+A+(d.suffix||"")},n.toFraction=function(g){var c,d,A,M,l,x,u,C,F,O,D,U,B=this,j=B.c;if(g!=null&&(u=new _(g),!u.isInteger()&&(u.c||u.s!==1)||u.lt(r)))throw Error(zt+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+G(u));if(!j)return new _(B);for(c=new _(r),F=d=new _(r),A=C=new _(r),U=Qt(j),l=c.e=U.length-B.e-1,c.c[0]=Jn[(x=l%ht)<0?ht+x:x],g=!g||u.comparedTo(c)>0?l>0?c:F:u,x=b,b=1/0,u=new _(U),C.c[0]=0;O=e(u,c,0,1),M=d.plus(O.times(A)),M.comparedTo(g)!=1;)d=A,A=M,F=C.plus(O.times(M=F)),C=M,c=u.minus(O.times(M=c)),u=M;return M=e(g.minus(d),A,0,1),C=C.plus(M.times(F)),d=d.plus(M.times(A)),C.s=F.s=B.s,l=l*2,D=e(F,A,l,a).minus(B).abs().comparedTo(e(C,d,l,a).minus(B).abs())<1?[F,A]:[C,d],b=x,D},n.toNumber=function(){return+G(this)},n.toPrecision=function(g,c){return g!=null&&Ct(g,1,Ot),m(this,g,c,2)},n.toString=function(g){var c,d=this,A=d.s,M=d.e;return M===null?A?(c="Infinity",A<0&&(c="-"+c)):c="NaN":(g==null?c=M<=h||M>=v?cn(Qt(d.c),M):me(Qt(d.c),M,"0"):g===10&&w?(d=N(new _(d),s+M+1,a),c=me(Qt(d.c),d.e,"0")):(Ct(g,2,E.length,"Base"),c=i(me(Qt(d.c),M,"0"),10,g,A,!0)),A<0&&d.c[0]&&(c="-"+c)),c},n.valueOf=n.toJSON=function(){return G(this)},n._isBigNumber=!0,n[Symbol.toStringTag]="BigNumber",n[Symbol.for("nodejs.util.inspect.custom")]=n.valueOf,t!=null&&_.set(t),_}function Zt(t){var e=t|0;return t>0||t===e?e:e-1}function Qt(t){for(var e,i,o=1,n=t.length,r=t[0]+"";o<n;){for(e=t[o++]+"",i=ht-e.length;i--;e="0"+e);r+=e}for(n=r.length;r.charCodeAt(--n)===48;);return r.slice(0,n+1||1)}function De(t,e){var i,o,n=t.c,r=e.c,s=t.s,a=e.s,h=t.e,v=e.e;if(!s||!a)return null;if(i=n&&!n[0],o=r&&!r[0],i||o)return i?o?0:-a:s;if(s!=a)return s;if(i=s<0,o=h==v,!n||!r)return o?0:!n^i?1:-1;if(!o)return h>v^i?1:-1;for(a=(h=n.length)<(v=r.length)?h:v,s=0;s<a;s++)if(n[s]!=r[s])return n[s]>r[s]^i?1:-1;return h==v?0:h>v^i?1:-1}function Ct(t,e,i,o){if(t<e||t>i||t!==Jt(t))throw Error(zt+(o||"Argument")+(typeof t=="number"?t<e||t>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function hn(t){var e=t.c.length-1;return Zt(t.e/ht)==e&&t.c[e]%2!=0}function cn(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function me(t,e,i){var o,n;if(e<0){for(n=i+".";++e;n+=i);t=n+t}else if(o=t.length,++e>o){for(n=i,e-=o;--e;n+=i);t+=n}else e<o&&(t=t.slice(0,e)+"."+t.slice(e));return t}var ye=Va();ye.config({EXPONENTIAL_AT:[-100,100]});const yu=(t,e)=>{let i=0;return function(){let o=+new Date;(o-i>e||!i)&&(t.apply(this,arguments),i=o)}},be=t=>t==null||typeof t=="string"&&(t=t.replace(/[^0-9.-]/g,"").replace(/(\..*)\./g,""),!t)?0:new ye(t).toNumber(),Mo=(t,e)=>(t=be(t),e=be(e),new ye(t).times(e)),Eo=(t,e)=>(t=be(t),e=be(e),new ye(t).dividedBy(e)),Zn=(t,e)=>(t=be(t),e=be(e),new ye(t).plus(e)),Ut=(t,e)=>(t=be(t),e=be(e),new ye(t).minus(e)),bu=(t,e,i,o)=>{if(!t)return"";t instanceof ye||(t=be(t));const n={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,...o};return new ye(t).toFormat(e||0,ye.ROUND_FLOOR,n)},ko={width:500,height:340,marginX:50,marginY:20,fontSize:12,fontColor:"#909198",bidsColor:"#0BC688",asksColor:"#F14B4B",bidsBgColor:"rgba(11,198,136,0.2)",asksBgColor:"rgba(241,75,75,0.2)",dottedBgColor:"rgba(91,89,89,0.02)",axisColor:"#5B5959",axisXBgColor:"#F7F7F7",axisYBgColor:"#F7F7F7",axisXBorderColor:"#F7F7F7",axisYBorderColor:"#F7F7F7",axisLineWidth:4,tipFontSize:14,tipColor:"#FFFFFF",tipPriceText:"",tipTotalText:"",wheel:50},xu={currentPrice:0,priceScale:2,qtyScale:2},Su={bids:[],asks:[]},wu=On({name:"depthChart",__name:"depthChart",props:{options:{type:Object,default:()=>ko},symbolData:{type:Object,default:()=>xu},depthData:{type:Object,default:()=>Su}},setup(t){const e=t,i=re(()=>({...ko,...e.options})),o=Xt(i.value.width||500),n=Xt(i.value.height||340),r=Xt(Ut(o.value,i.value.marginX).toNumber()),s=Xt(r.value/2),a=Xt(Ut(n.value,i.value.marginX).toNumber()),h=Xt(i.value.wheel||50),v=re(()=>(e.depthData.bids||[]).map(c=>Array.isArray(c)?{...c,price:c[0],totalAmount:c[1]}:c).filter(c=>c.price<e.symbolData.currentPrice).slice(0,h.value)),p=re(()=>(e.depthData.asks||[]).map(c=>Array.isArray(c)?{...c,price:c[0],totalAmount:c[1]}:c).filter(c=>c.price>e.symbolData.currentPrice).slice(-h.value)),b=10,S=re(()=>{const c=e.depthData.bids.length,d=e.depthData.asks.length;return Math.max(c,d,b)}),y=Xt(0),f=re(()=>{const c=e.symbolData.currentPrice,d=v.value.length?Ut(c,v.value[v.value.length-1].price).dividedBy(3).toNumber():0,A=+d>0?[Ut(c,Mo(d,2)),Ut(c,d)]:[0,0],M=p.value.length?Ut(p.value[0].price,c).dividedBy(3).toNumber():0,l=+M>0?[Zn(c,M).toNumber(),Zn(c,Mo(M,2)).toNumber()]:[0,0];return[...A,c,...l].map(x=>bu(x,e.symbolData.priceScale))}),T=re(()=>{var c,d;return Math.max(((c=v.value[v.value.length-1])==null?void 0:c.totalAmount)||0,((d=p.value[0])==null?void 0:d.totalAmount)||0)}),E=re(()=>{const c=a.value>800?20:10,d=Zn(T.value,T.value%10).toNumber(),A=Eo(d,c);return Array.from(new Array(c)).map((M,l)=>{const x=A.multipliedBy(l).toFormat(e.symbolData.qtyScale),u=Eo(a.value,c).multipliedBy(l),C=Ut(a.value,u).toFixed(2);return{currentScaleTotal:x,y:C}}).filter(M=>+M.currentScaleTotal>0)}),w=re(()=>{if(!v.value.length||!T.value)return null;const c=a.value-i.value.marginY,d=e.symbolData.currentPrice,A=Ut(d,v.value[v.value.length-1].price);let M="";return{data:[...v.value].reverse().map((l,x)=>{const u=+Ut(l.price,d).dividedBy(A).multipliedBy(s.value).plus(s.value).toFixed(e.symbolData.priceScale),C=Math.max(+Ut(T.value,l.totalAmount).dividedBy(T.value).multipliedBy(c).toFixed(e.symbolData.qtyScale+1),i.value.marginY);return x===0?M+=`M-1 ${a.value} V${C} `:x===v.value.length-1?M+=`H${u} V${C} V${a.value}`:M+=`H${u} V${C} `,{...l,x:u,y:C}}),path:M}}),_=re(()=>{if(!p.value.length||!T.value)return null;const c=a.value-i.value.marginY,d=e.symbolData.currentPrice,A=Ut(p.value[0].price,d);let M="";return{data:p.value.map((l,x)=>{const u=+Ut(l.price,d).dividedBy(A).multipliedBy(s.value).plus(s.value).toFixed(e.symbolData.priceScale),C=Math.max(+Ut(T.value,l.totalAmount).dividedBy(T.value).multipliedBy(c).toFixed(e.symbolData.qtyScale+1),i.value.marginY);return x===0?M+=`M${r.value} ${a.value} V${C} `:x===p.value.length-1?M+=`H${u} V${C} V${a.value}`:M+=`H${u} V${C} `,{...l,x:u,y:C}}),path:M}}),m=re(()=>{var c,d,A,M,l,x;const u=y.value;if(!y||u>r.value)return;let C;if(u<s.value){const F=((A=(d=(c=w.value)==null?void 0:c.data)==null?void 0:d.slice())==null?void 0:A.reverse())||[];if(!F.length)return;for(let O=0;O<F.length;O++){const D=F[O];if(u>+D.x){C=D;break}}}else{const F=((x=(l=(M=_.value)==null?void 0:M.data)==null?void 0:l.slice())==null?void 0:x.reverse())||[];if(!F.length)return;for(let O=0;O<F.length;O++){const D=F[O];if(u<+D.x){C=D;break}}}return C}),P=Xt(),k=Xt(0),N=Xt(),G=()=>{N.value&&(o.value=N.value.clientWidth,n.value=N.value.clientHeight||n.value,r.value=Ut(o.value,i.value.marginX).toNumber(),s.value=r.value/2,a.value=Ut(n.value,i.value.marginY).toNumber(),window.addEventListener("resize",G))};Rn(()=>{G()});const g=yu(c=>{c.evt.preventDefault(),y.value=c.evt.offsetX},300);return(c,d)=>{const A=Ce("kv-path"),M=Ce("kv-Rect"),l=Ce("kv-text"),x=Ce("kv-circle"),u=Ce("kv-group"),C=Ce("kv-layer"),F=Ce("kv-stage");return Ae(),dn("div",{class:"depth-chart",ref_key:"depthChartEl",ref:N},[vt(F,{config:{width:o.value,height:n.value},onWheel:d[0]||(d[0]=O=>{O.evt.preventDefault(),O.evt.wheelDelta<0?h.value=Math.min(h.value+2,S.value):h.value=Math.max(h.value-2,b)}),onMousemove:qo(g),onMouseleave:d[1]||(d[1]=()=>y.value=0),onTouchmove:d[2]||(d[2]=O=>{O.evt.preventDefault(),O.evt.targetTouches.length>1?(k.value&&(Math.abs(O.evt.targetTouches[0].pageX-O.evt.targetTouches[1].pageX)<k.value?h.value=Math.min(h.value+2,S.value):h.value=Math.max(h.value-2,b)),k.value=Math.abs(O.evt.targetTouches[0].pageX-O.evt.targetTouches[1].pageX)):!k.value&&(y.value=O.evt.changedTouches[0].pageX)}),onTouchend:d[3]||(d[3]=O=>{O.evt.preventDefault(),y.value=0,k.value=0})},{default:We(()=>[vt(C,null,{default:We(()=>{var O,D;return[vt(A,{fill:i.value.bidsBgColor,stroke:i.value.bidsColor,strokeWidth:1,data:(O=w.value)==null?void 0:O.path},null,8,["fill","stroke","data"]),vt(A,{fill:i.value.asksBgColor,stroke:i.value.asksColor,strokeWidth:1,data:(D=_.value)==null?void 0:D.path},null,8,["fill","stroke","data"]),vt(A,{stroke:i.value.axisColor,strokeWidth:1,data:`M${s.value} 0 L${s.value} ${a.value} Z`},null,8,["stroke","data"]),m.value?(Ae(),fn(u,{key:0},{default:We(()=>{var U,B,j,X,Y,q,J,I,W,Q,Z,it,R,L,H,V;return[vt(A,{data:+m.value.x<s.value?`M0 ${(U=m.value)==null?void 0:U.y} L${s.value} ${(B=m.value)==null?void 0:B.y} Z`:`M${s.value} ${(j=m.value)==null?void 0:j.y} L${r.value} ${(X=m.value)==null?void 0:X.y} Z`,stroke:+m.value.x<s.value?i.value.bidsColor:i.value.asksColor,strokeWidth:.5,dash:[2,4]},null,8,["data","stroke"]),vt(A,{data:+m.value.x<s.value?`M-1 -1 L-1 ${n.value} L${(Y=m.value)==null?void 0:Y.x} ${n.value} L${(q=m.value)==null?void 0:q.x} -1 Z`:`M${r.value+1} -1 L${(J=m.value)==null?void 0:J.x} -1 L${(I=m.value)==null?void 0:I.x} ${n.value} L${r.value+1} ${n.value} Z`,stroke:+m.value.x<s.value?i.value.bidsColor:i.value.asksColor,fill:i.value.dottedBgColor,strokeWidth:.5,dash:[2,4]},null,8,["data","stroke","fill"]),vt(M,{width:(((Q=(W=P.value)==null?void 0:W.getNode())==null?void 0:Q.textWidth)||0)+40,height:(((it=(Z=P.value)==null?void 0:Z.getNode())==null?void 0:it.textHeight)||0)*4.3,x:+m.value.x<s.value?+m.value.x+50:+m.value.x-(((L=(R=P.value)==null?void 0:R.getNode())==null?void 0:L.textWidth)||0)-100,cornerRadius:8,y:Math.max(10,+m.value.y-100),fill:+m.value.x<s.value?i.value.bidsColor:i.value.asksColor},null,8,["width","height","x","y","fill"]),vt(l,{text:`${i.value.tipPriceText}  ${m.value.price}
${i.value.tipTotalText}  ${+m.value.totalAmount>999,m.value.totalAmount}`,padding:10,lineHeight:1.5,fill:i.value.tipColor,fontSize:i.value.tipFontSize,x:+m.value.x<s.value?+m.value.x+50:+m.value.x-(((V=(H=P.value)==null?void 0:H.getNode())==null?void 0:V.textWidth)||0)-100,y:Math.max(10,+m.value.y-100),ref_key:"overlayEl",ref:P},null,8,["text","fill","fontSize","x","y"]),vt(x,{fill:+m.value.x<s.value?i.value.bidsColor:i.value.asksColor,width:6,height:6,x:+m.value.x,y:+m.value.y},null,8,["fill","x","y"])]}),_:1})):Oh("",!0),vt(A,{stroke:i.value.axisXBorderColor,fill:i.value.axisXBgColor,strokeWidth:1,data:`M0 ${n.value} L0 ${a.value+1} L${o.value} ${a.value+1} L${o.value} ${n.value} Z`},null,8,["stroke","fill","data"]),(Ae(!0),dn(se,null,jr(f.value,(U,B)=>(Ae(),fn(u,{key:B},{default:We(()=>[vt(A,{stroke:i.value.axisColor,strokeWidth:1,data:`M${r.value/6*(B+1)} ${a.value} L${r.value/6*(B+1)} ${a.value+i.value.axisLineWidth} Z`},null,8,["stroke","data"]),vt(l,{text:U,fill:i.value.fontColor,fontSize:i.value.fontSize,x:r.value/6*(B+1),y:a.value+i.value.axisLineWidth+2,width:r.value/3,align:"center",offsetX:r.value/3/2},null,8,["text","fill","fontSize","x","y","width","offsetX"])]),_:2},1024))),128)),vt(A,{stroke:i.value.axisYBorderColor,fill:i.value.axisYBgColor,data:`M${r.value} 0 L${r.value} ${n.value} L${o.value} ${n.value} L${o.value} 0 Z`},null,8,["stroke","fill","data"]),(Ae(!0),dn(se,null,jr(E.value,(U,B)=>(Ae(),fn(u,{key:B},{default:We(()=>[vt(A,{stroke:i.value.axisColor,strokeWidth:1,data:`M${r.value} ${U.y} L${r.value+i.value.axisLineWidth} ${U.y} Z`},null,8,["stroke","data"]),vt(l,{text:U.currentScaleTotal,fill:i.value.fontColor,fontSize:i.value.fontSize,x:r.value+i.value.axisLineWidth+2,y:+U.y-5,verticalAlign:"middle"},null,8,["text","fill","fontSize","x","y"])]),_:2},1024))),128))]}),_:1})]),_:1},8,["config","onMousemove"])],512)}}}),Cu=(t,e)=>{const i=t.__vccOpts||t;for(const[o,n]of e)i[o]=n;return i},Pu=Cu(wu,[["__scopeId","data-v-7a8cd0f2"]]),Au=[Pu];function Tu(t){Au.forEach(e=>{t.use(vu,{prefix:"kv"}),t.component(e.name,e)})}const Fu={install:Tu},Wa=dc(bc);Wa.use(Fu);Wa.mount("#app");
